(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.HeliaUnixfs = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var HeliaUnixfs=(()=>{var nf=Object.create;var Or=Object.defineProperty;var of=Object.getOwnPropertyDescriptor;var sf=Object.getOwnPropertyNames;var af=Object.getPrototypeOf,cf=Object.prototype.hasOwnProperty;var O=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),re=(t,e)=>{for(var r in e)Or(t,r,{get:e[r],enumerable:!0})},vo=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of sf(e))!cf.call(t,i)&&i!==r&&Or(t,i,{get:()=>e[i],enumerable:!(n=of(e,i))||n.enumerable});return t};var R=(t,e,r)=>(r=t!=null?nf(af(t)):{},vo(e||!t||!t.__esModule?Or(r,"default",{value:t,enumerable:!0}):r,t)),uf=t=>vo(Or({},"__esModule",{value:!0}),t);var ne=O((zd,So)=>{"use strict";function Eo(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function ff(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Eo(t,r)}catch{r.message=t.message,r.stack=t.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),Eo(new i,r)}}So.exports=ff});var Ko=O((v0,Qo)=>{"use strict";Qo.exports=dl;function dl(t,e){for(var r=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(c,a){r[n]=function(u){if(o)if(o=!1,u)a(u);else{for(var h=new Array(arguments.length-1),p=0;p<h.length;)h[p++]=arguments[p];c.apply(null,h)}};try{t.apply(e||null,r)}catch(l){o&&(o=!1,a(l))}})}});var es=O(Jo=>{"use strict";var jr=Jo;jr.length=function(e){var r=e.length;if(!r)return 0;for(var n=0;--r%4>1&&e.charAt(r)==="=";)++n;return Math.ceil(e.length*3)/4-n};var Ft=new Array(64),Zo=new Array(123);for(Be=0;Be<64;)Zo[Ft[Be]=Be<26?Be+65:Be<52?Be+71:Be<62?Be-4:Be-59|43]=Be++;var Be;jr.encode=function(e,r,n){for(var i=null,o=[],s=0,c=0,a;r<n;){var l=e[r++];switch(c){case 0:o[s++]=Ft[l>>2],a=(l&3)<<4,c=1;break;case 1:o[s++]=Ft[a|l>>4],a=(l&15)<<2,c=2;break;case 2:o[s++]=Ft[a|l>>6],o[s++]=Ft[l&63],c=0;break}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0)}return c&&(o[s++]=Ft[a],o[s++]=61,c===1&&(o[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))};var Xo="invalid encoding";jr.decode=function(e,r,n){for(var i=n,o=0,s,c=0;c<e.length;){var a=e.charCodeAt(c++);if(a===61&&o>1)break;if((a=Zo[a])===void 0)throw Error(Xo);switch(o){case 0:s=a,o=1;break;case 1:r[n++]=s<<2|(a&48)>>4,s=a,o=2;break;case 2:r[n++]=(s&15)<<4|(a&60)>>2,s=a,o=3;break;case 3:r[n++]=(s&3)<<6|a,o=0;break}}if(o===1)throw Error(Xo);return n-i};jr.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var rs=O((S0,ts)=>{"use strict";ts.exports=Gr;function Gr(){this._listeners={}}Gr.prototype.on=function(e,r,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:n||this}),this};Gr.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===r?n.splice(i,1):++i;return this};Gr.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this}});var us=O((B0,cs)=>{"use strict";cs.exports=ns(ns);function ns(t){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=r[3]===128;function i(a,l,u){e[0]=a,l[u]=r[0],l[u+1]=r[1],l[u+2]=r[2],l[u+3]=r[3]}function o(a,l,u){e[0]=a,l[u]=r[3],l[u+1]=r[2],l[u+2]=r[1],l[u+3]=r[0]}t.writeFloatLE=n?i:o,t.writeFloatBE=n?o:i;function s(a,l){return r[0]=a[l],r[1]=a[l+1],r[2]=a[l+2],r[3]=a[l+3],e[0]}function c(a,l){return r[3]=a[l],r[2]=a[l+1],r[1]=a[l+2],r[0]=a[l+3],e[0]}t.readFloatLE=n?s:c,t.readFloatBE=n?c:s}():function(){function e(n,i,o,s){var c=i<0?1:0;if(c&&(i=-i),i===0)n(1/i>0?0:2147483648,o,s);else if(isNaN(i))n(2143289344,o,s);else if(i>34028234663852886e22)n((c<<31|2139095040)>>>0,o,s);else if(i<11754943508222875e-54)n((c<<31|Math.round(i/1401298464324817e-60))>>>0,o,s);else{var a=Math.floor(Math.log(i)/Math.LN2),l=Math.round(i*Math.pow(2,-a)*8388608)&8388607;n((c<<31|a+127<<23|l)>>>0,o,s)}}t.writeFloatLE=e.bind(null,is),t.writeFloatBE=e.bind(null,os);function r(n,i,o){var s=n(i,o),c=(s>>31)*2+1,a=s>>>23&255,l=s&8388607;return a===255?l?NaN:c*(1/0):a===0?c*1401298464324817e-60*l:c*Math.pow(2,a-150)*(l+8388608)}t.readFloatLE=r.bind(null,ss),t.readFloatBE=r.bind(null,as)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=r[7]===128;function i(a,l,u){e[0]=a,l[u]=r[0],l[u+1]=r[1],l[u+2]=r[2],l[u+3]=r[3],l[u+4]=r[4],l[u+5]=r[5],l[u+6]=r[6],l[u+7]=r[7]}function o(a,l,u){e[0]=a,l[u]=r[7],l[u+1]=r[6],l[u+2]=r[5],l[u+3]=r[4],l[u+4]=r[3],l[u+5]=r[2],l[u+6]=r[1],l[u+7]=r[0]}t.writeDoubleLE=n?i:o,t.writeDoubleBE=n?o:i;function s(a,l){return r[0]=a[l],r[1]=a[l+1],r[2]=a[l+2],r[3]=a[l+3],r[4]=a[l+4],r[5]=a[l+5],r[6]=a[l+6],r[7]=a[l+7],e[0]}function c(a,l){return r[7]=a[l],r[6]=a[l+1],r[5]=a[l+2],r[4]=a[l+3],r[3]=a[l+4],r[2]=a[l+5],r[1]=a[l+6],r[0]=a[l+7],e[0]}t.readDoubleLE=n?s:c,t.readDoubleBE=n?c:s}():function(){function e(n,i,o,s,c,a){var l=s<0?1:0;if(l&&(s=-s),s===0)n(0,c,a+i),n(1/s>0?0:2147483648,c,a+o);else if(isNaN(s))n(0,c,a+i),n(2146959360,c,a+o);else if(s>17976931348623157e292)n(0,c,a+i),n((l<<31|2146435072)>>>0,c,a+o);else{var u;if(s<22250738585072014e-324)u=s/5e-324,n(u>>>0,c,a+i),n((l<<31|u/4294967296)>>>0,c,a+o);else{var h=Math.floor(Math.log(s)/Math.LN2);h===1024&&(h=1023),u=s*Math.pow(2,-h),n(u*4503599627370496>>>0,c,a+i),n((l<<31|h+1023<<20|u*1048576&1048575)>>>0,c,a+o)}}}t.writeDoubleLE=e.bind(null,is,0,4),t.writeDoubleBE=e.bind(null,os,4,0);function r(n,i,o,s,c){var a=n(s,c+i),l=n(s,c+o),u=(l>>31)*2+1,h=l>>>20&2047,p=4294967296*(l&1048575)+a;return h===2047?p?NaN:u*(1/0):h===0?u*5e-324*p:u*Math.pow(2,h-1075)*(p+4503599627370496)}t.readDoubleLE=r.bind(null,ss,0,4),t.readDoubleBE=r.bind(null,as,4,0)}(),t}function is(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function os(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function ss(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function as(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var fs=O((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var hs=O(ls=>{"use strict";var si=ls;si.length=function(e){for(var r=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?r+=1:n<2048?r+=2:(n&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,r+=4):r+=3;return r};si.read=function(e,r,n){var i=n-r;if(i<1)return"";for(var o=null,s=[],c=0,a;r<n;)a=e[r++],a<128?s[c++]=a:a>191&&a<224?s[c++]=(a&31)<<6|e[r++]&63:a>239&&a<365?(a=((a&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,s[c++]=55296+(a>>10),s[c++]=56320+(a&1023)):s[c++]=(a&15)<<12|(e[r++]&63)<<6|e[r++]&63,c>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),c=0);return o?(c&&o.push(String.fromCharCode.apply(String,s.slice(0,c))),o.join("")):String.fromCharCode.apply(String,s.slice(0,c))};si.write=function(e,r,n){for(var i=n,o,s,c=0;c<e.length;++c)o=e.charCodeAt(c),o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=o&63|128):(o&64512)===55296&&((s=e.charCodeAt(c+1))&64512)===56320?(o=65536+((o&1023)<<10)+(s&1023),++c,r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=o&63|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=o&63|128);return n-i}});var ps=O((I0,ds)=>{"use strict";ds.exports=pl;function pl(t,e,r){var n=r||8192,i=n>>>1,o=null,s=n;return function(a){if(a<1||a>i)return t(a);s+a>n&&(o=t(n),s=0);var l=e.call(o,s,s+=a);return s&7&&(s=(s|7)+1),l}}});var ys=O((T0,ms)=>{"use strict";ms.exports=X;var cr=pt();function X(t,e){this.lo=t>>>0,this.hi=e>>>0}var dt=X.zero=new X(0,0);dt.toNumber=function(){return 0};dt.zzEncode=dt.zzDecode=function(){return this};dt.length=function(){return 1};var ml=X.zeroHash="\0\0\0\0\0\0\0\0";X.fromNumber=function(e){if(e===0)return dt;var r=e<0;r&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new X(n,i)};X.from=function(e){if(typeof e=="number")return X.fromNumber(e);if(cr.isString(e))if(cr.Long)e=cr.Long.fromString(e);else return X.fromNumber(parseInt(e,10));return e.low||e.high?new X(e.low>>>0,e.high>>>0):dt};X.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};X.prototype.toLong=function(e){return cr.Long?new cr.Long(this.lo|0,this.hi|0,!!e):{low:this.lo|0,high:this.hi|0,unsigned:!!e}};var Xe=String.prototype.charCodeAt;X.fromHash=function(e){return e===ml?dt:new X((Xe.call(e,0)|Xe.call(e,1)<<8|Xe.call(e,2)<<16|Xe.call(e,3)<<24)>>>0,(Xe.call(e,4)|Xe.call(e,5)<<8|Xe.call(e,6)<<16|Xe.call(e,7)<<24)>>>0)};X.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};X.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};X.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};X.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var pt=O(ai=>{"use strict";var I=ai;I.asPromise=Ko();I.base64=es();I.EventEmitter=rs();I.float=us();I.inquire=fs();I.utf8=hs();I.pool=ps();I.LongBits=ys();I.isNode=!!(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);I.global=I.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||ai;I.emptyArray=Object.freeze?Object.freeze([]):[];I.emptyObject=Object.freeze?Object.freeze({}):{};I.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};I.isString=function(e){return typeof e=="string"||e instanceof String};I.isObject=function(e){return e&&typeof e=="object"};I.isset=I.isSet=function(e,r){var n=e[r];return n!=null&&e.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};I.Buffer=function(){try{var t=I.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch{return null}}();I._Buffer_from=null;I._Buffer_allocUnsafe=null;I.newBuffer=function(e){return typeof e=="number"?I.Buffer?I._Buffer_allocUnsafe(e):new I.Array(e):I.Buffer?I._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};I.Array=typeof Uint8Array<"u"?Uint8Array:Array;I.Long=I.global.dcodeIO&&I.global.dcodeIO.Long||I.global.Long||I.inquire("long");I.key2Re=/^true|false|0|1$/;I.key32Re=/^-?(?:0|[1-9][0-9]*)$/;I.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;I.longToHash=function(e){return e?I.LongBits.from(e).toHash():I.LongBits.zeroHash};I.longFromHash=function(e,r){var n=I.LongBits.fromHash(e);return I.Long?I.Long.fromBits(n.lo,n.hi,r):n.toNumber(!!r)};function gs(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;++i)(t[n[i]]===void 0||!r)&&(t[n[i]]=e[n[i]]);return t}I.merge=gs;I.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function ws(t){function e(r,n){if(!(this instanceof e))return new e(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&gs(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}I.newError=ws;I.ProtocolError=ws("ProtocolError");I.oneOfGetter=function(e){for(var r={},n=0;n<e.length;++n)r[e[n]]=1;return function(){for(var i=Object.keys(this),o=i.length-1;o>-1;--o)if(r[i[o]]===1&&this[i[o]]!==void 0&&this[i[o]]!==null)return i[o]}};I.oneOfSetter=function(e){return function(r){for(var n=0;n<e.length;++n)e[n]!==r&&delete this[e[n]]}};I.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};I._configure=function(){var t=I.Buffer;if(!t){I._Buffer_from=I._Buffer_allocUnsafe=null;return}I._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,n){return new t(r,n)},I._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var fi=O((N0,vs)=>{"use strict";vs.exports=W;var ke=pt(),ui,_s=ke.LongBits,yl=ke.utf8;function Ie(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function W(t){this.buf=t,this.pos=0,this.len=t.length}var bs=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new W(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new W(e);throw Error("illegal buffer")},As=function(){return ke.Buffer?function(r){return(W.create=function(i){return ke.Buffer.isBuffer(i)?new ui(i):bs(i)})(r)}:bs};W.create=As();W.prototype._slice=ke.Array.prototype.subarray||ke.Array.prototype.slice;W.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Ie(this,10);return e}}();W.prototype.int32=function(){return this.uint32()|0};W.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function ci(){var t=new _s(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw Ie(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw Ie(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}W.prototype.bool=function(){return this.uint32()!==0};function Wr(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}W.prototype.fixed32=function(){if(this.pos+4>this.len)throw Ie(this,4);return Wr(this.buf,this.pos+=4)};W.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Ie(this,4);return Wr(this.buf,this.pos+=4)|0};function xs(){if(this.pos+8>this.len)throw Ie(this,8);return new _s(Wr(this.buf,this.pos+=4),Wr(this.buf,this.pos+=4))}W.prototype.float=function(){if(this.pos+4>this.len)throw Ie(this,4);var e=ke.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};W.prototype.double=function(){if(this.pos+8>this.len)throw Ie(this,4);var e=ke.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};W.prototype.bytes=function(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw Ie(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(r,n);if(r===n){var i=ke.Buffer;return i?i.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,r,n)};W.prototype.string=function(){var e=this.bytes();return yl.read(e,0,e.length)};W.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw Ie(this,e);this.pos+=e}else do if(this.pos>=this.len)throw Ie(this);while(this.buf[this.pos++]&128);return this};W.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};W._configure=function(t){ui=t,W.create=As(),ui._configure();var e=ke.Long?"toLong":"toNumber";ke.merge(W.prototype,{int64:function(){return ci.call(this)[e](!1)},uint64:function(){return ci.call(this)[e](!0)},sint64:function(){return ci.call(this).zzDecode()[e](!1)},fixed64:function(){return xs.call(this)[e](!0)},sfixed64:function(){return xs.call(this)[e](!1)}})}});var ks=O((D0,Bs)=>{"use strict";Bs.exports=mt;var Ss=fi();(mt.prototype=Object.create(Ss.prototype)).constructor=mt;var Es=pt();function mt(t){Ss.call(this,t)}mt._configure=function(){Es.Buffer&&(mt.prototype._slice=Es.Buffer.prototype.slice)};mt.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};mt._configure()});var gi=O((F0,Ns)=>{"use strict";Ns.exports=U;var ve=pt(),li,qr=ve.LongBits,Is=ve.base64,Ts=ve.utf8;function ur(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function di(){}function gl(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function U(){this.len=0,this.head=new ur(di,0,0),this.tail=this.head,this.states=null}var Cs=function(){return ve.Buffer?function(){return(U.create=function(){return new li})()}:function(){return new U}};U.create=Cs();U.alloc=function(e){return new ve.Array(e)};ve.Array!==Array&&(U.alloc=ve.pool(U.alloc,ve.Array.prototype.subarray));U.prototype._push=function(e,r,n){return this.tail=this.tail.next=new ur(e,r,n),this.len+=r,this};function pi(t,e,r){e[r]=t&255}function wl(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function mi(t,e){this.len=t,this.next=void 0,this.val=e}mi.prototype=Object.create(ur.prototype);mi.prototype.fn=wl;U.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new mi((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};U.prototype.int32=function(e){return e<0?this._push(yi,10,qr.fromNumber(e)):this.uint32(e)};U.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function yi(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}U.prototype.uint64=function(e){var r=qr.from(e);return this._push(yi,r.length(),r)};U.prototype.int64=U.prototype.uint64;U.prototype.sint64=function(e){var r=qr.from(e).zzEncode();return this._push(yi,r.length(),r)};U.prototype.bool=function(e){return this._push(pi,1,e?1:0)};function hi(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}U.prototype.fixed32=function(e){return this._push(hi,4,e>>>0)};U.prototype.sfixed32=U.prototype.fixed32;U.prototype.fixed64=function(e){var r=qr.from(e);return this._push(hi,4,r.lo)._push(hi,4,r.hi)};U.prototype.sfixed64=U.prototype.fixed64;U.prototype.float=function(e){return this._push(ve.float.writeFloatLE,4,e)};U.prototype.double=function(e){return this._push(ve.float.writeDoubleLE,8,e)};var bl=ve.Array.prototype.set?function(e,r,n){r.set(e,n)}:function(e,r,n){for(var i=0;i<e.length;++i)r[n+i]=e[i]};U.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(pi,1,0);if(ve.isString(e)){var n=U.alloc(r=Is.length(e));Is.decode(e,n,0),e=n}return this.uint32(r)._push(bl,r,e)};U.prototype.string=function(e){var r=Ts.length(e);return r?this.uint32(r)._push(Ts.write,r,e):this._push(pi,1,0)};U.prototype.fork=function(){return this.states=new gl(this),this.head=this.tail=new ur(di,0,0),this.len=0,this};U.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ur(di,0,0),this.len=0),this};U.prototype.ldelim=function(){var e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=r,this.len+=n),this};U.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r};U._configure=function(t){li=t,U.create=Cs(),li._configure()}});var Ls=O((L0,Fs)=>{"use strict";Fs.exports=Ue;var Ds=gi();(Ue.prototype=Object.create(Ds.prototype)).constructor=Ue;var Ze=pt();function Ue(){Ds.call(this)}Ue._configure=function(){Ue.alloc=Ze._Buffer_allocUnsafe,Ue.writeBytesBuffer=Ze.Buffer&&Ze.Buffer.prototype instanceof Uint8Array&&Ze.Buffer.prototype.set.name==="set"?function(e,r,n){r.set(e,n)}:function(e,r,n){if(e.copy)e.copy(r,n,0,e.length);else for(var i=0;i<e.length;)r[n++]=e[i++]}};Ue.prototype.bytes=function(e){Ze.isString(e)&&(e=Ze._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(Ue.writeBytesBuffer,r,e),this};function xl(t,e,r){t.length<40?Ze.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}Ue.prototype.string=function(e){var r=Ze.Buffer.byteLength(e);return this.uint32(r),r&&this._push(xl,r,e),this};Ue._configure()});var na=O((yr,Kr)=>{(function(t,e){"use strict";var r={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function n(f){if(!Array.isArray(f)&&!ArrayBuffer.isView(f))return!1;for(var d=0;d<f.length;d++)if(!Number.isInteger(f[d])||f[d]<0||f[d]>255)return!1;return!0}function i(f,d){return(f&65535)*d+(((f>>>16)*d&65535)<<16)}function o(f,d){return f<<d|f>>>32-d}function s(f){return f^=f>>>16,f=i(f,2246822507),f^=f>>>13,f=i(f,3266489909),f^=f>>>16,f}function c(f,d){f=[f[0]>>>16,f[0]&65535,f[1]>>>16,f[1]&65535],d=[d[0]>>>16,d[0]&65535,d[1]>>>16,d[1]&65535];var m=[0,0,0,0];return m[3]+=f[3]+d[3],m[2]+=m[3]>>>16,m[3]&=65535,m[2]+=f[2]+d[2],m[1]+=m[2]>>>16,m[2]&=65535,m[1]+=f[1]+d[1],m[0]+=m[1]>>>16,m[1]&=65535,m[0]+=f[0]+d[0],m[0]&=65535,[m[0]<<16|m[1],m[2]<<16|m[3]]}function a(f,d){f=[f[0]>>>16,f[0]&65535,f[1]>>>16,f[1]&65535],d=[d[0]>>>16,d[0]&65535,d[1]>>>16,d[1]&65535];var m=[0,0,0,0];return m[3]+=f[3]*d[3],m[2]+=m[3]>>>16,m[3]&=65535,m[2]+=f[2]*d[3],m[1]+=m[2]>>>16,m[2]&=65535,m[2]+=f[3]*d[2],m[1]+=m[2]>>>16,m[2]&=65535,m[1]+=f[1]*d[3],m[0]+=m[1]>>>16,m[1]&=65535,m[1]+=f[2]*d[2],m[0]+=m[1]>>>16,m[1]&=65535,m[1]+=f[3]*d[1],m[0]+=m[1]>>>16,m[1]&=65535,m[0]+=f[0]*d[3]+f[1]*d[2]+f[2]*d[1]+f[3]*d[0],m[0]&=65535,[m[0]<<16|m[1],m[2]<<16|m[3]]}function l(f,d){return d%=64,d===32?[f[1],f[0]]:d<32?[f[0]<<d|f[1]>>>32-d,f[1]<<d|f[0]>>>32-d]:(d-=32,[f[1]<<d|f[0]>>>32-d,f[0]<<d|f[1]>>>32-d])}function u(f,d){return d%=64,d===0?f:d<32?[f[0]<<d|f[1]>>>32-d,f[1]<<d]:[f[1]<<d-32,0]}function h(f,d){return[f[0]^d[0],f[1]^d[1]]}function p(f){return f=h(f,[0,f[0]>>>1]),f=a(f,[4283543511,3981806797]),f=h(f,[0,f[0]>>>1]),f=a(f,[3301882366,444984403]),f=h(f,[0,f[0]>>>1]),f}r.x86.hash32=function(f,d){if(r.inputValidation&&!n(f))return e;d=d||0;for(var m=f.length%4,_=f.length-m,y=d,w=0,x=3432918353,A=461845907,T=0;T<_;T=T+4)w=f[T]|f[T+1]<<8|f[T+2]<<16|f[T+3]<<24,w=i(w,x),w=o(w,15),w=i(w,A),y^=w,y=o(y,13),y=i(y,5)+3864292196;switch(w=0,m){case 3:w^=f[T+2]<<16;case 2:w^=f[T+1]<<8;case 1:w^=f[T],w=i(w,x),w=o(w,15),w=i(w,A),y^=w}return y^=f.length,y=s(y),y>>>0},r.x86.hash128=function(f,d){if(r.inputValidation&&!n(f))return e;d=d||0;for(var m=f.length%16,_=f.length-m,y=d,w=d,x=d,A=d,T=0,v=0,b=0,B=0,D=597399067,M=2869860233,K=951274213,xe=2716044179,F=0;F<_;F=F+16)T=f[F]|f[F+1]<<8|f[F+2]<<16|f[F+3]<<24,v=f[F+4]|f[F+5]<<8|f[F+6]<<16|f[F+7]<<24,b=f[F+8]|f[F+9]<<8|f[F+10]<<16|f[F+11]<<24,B=f[F+12]|f[F+13]<<8|f[F+14]<<16|f[F+15]<<24,T=i(T,D),T=o(T,15),T=i(T,M),y^=T,y=o(y,19),y+=w,y=i(y,5)+1444728091,v=i(v,M),v=o(v,16),v=i(v,K),w^=v,w=o(w,17),w+=x,w=i(w,5)+197830471,b=i(b,K),b=o(b,17),b=i(b,xe),x^=b,x=o(x,15),x+=A,x=i(x,5)+2530024501,B=i(B,xe),B=o(B,18),B=i(B,D),A^=B,A=o(A,13),A+=y,A=i(A,5)+850148119;switch(T=0,v=0,b=0,B=0,m){case 15:B^=f[F+14]<<16;case 14:B^=f[F+13]<<8;case 13:B^=f[F+12],B=i(B,xe),B=o(B,18),B=i(B,D),A^=B;case 12:b^=f[F+11]<<24;case 11:b^=f[F+10]<<16;case 10:b^=f[F+9]<<8;case 9:b^=f[F+8],b=i(b,K),b=o(b,17),b=i(b,xe),x^=b;case 8:v^=f[F+7]<<24;case 7:v^=f[F+6]<<16;case 6:v^=f[F+5]<<8;case 5:v^=f[F+4],v=i(v,M),v=o(v,16),v=i(v,K),w^=v;case 4:T^=f[F+3]<<24;case 3:T^=f[F+2]<<16;case 2:T^=f[F+1]<<8;case 1:T^=f[F],T=i(T,D),T=o(T,15),T=i(T,M),y^=T}return y^=f.length,w^=f.length,x^=f.length,A^=f.length,y+=w,y+=x,y+=A,w+=y,x+=y,A+=y,y=s(y),w=s(w),x=s(x),A=s(A),y+=w,y+=x,y+=A,w+=y,x+=y,A+=y,("00000000"+(y>>>0).toString(16)).slice(-8)+("00000000"+(w>>>0).toString(16)).slice(-8)+("00000000"+(x>>>0).toString(16)).slice(-8)+("00000000"+(A>>>0).toString(16)).slice(-8)},r.x64.hash128=function(f,d){if(r.inputValidation&&!n(f))return e;d=d||0;for(var m=f.length%16,_=f.length-m,y=[0,d],w=[0,d],x=[0,0],A=[0,0],T=[2277735313,289559509],v=[1291169091,658871167],b=0;b<_;b=b+16)x=[f[b+4]|f[b+5]<<8|f[b+6]<<16|f[b+7]<<24,f[b]|f[b+1]<<8|f[b+2]<<16|f[b+3]<<24],A=[f[b+12]|f[b+13]<<8|f[b+14]<<16|f[b+15]<<24,f[b+8]|f[b+9]<<8|f[b+10]<<16|f[b+11]<<24],x=a(x,T),x=l(x,31),x=a(x,v),y=h(y,x),y=l(y,27),y=c(y,w),y=c(a(y,[0,5]),[0,1390208809]),A=a(A,v),A=l(A,33),A=a(A,T),w=h(w,A),w=l(w,31),w=c(w,y),w=c(a(w,[0,5]),[0,944331445]);switch(x=[0,0],A=[0,0],m){case 15:A=h(A,u([0,f[b+14]],48));case 14:A=h(A,u([0,f[b+13]],40));case 13:A=h(A,u([0,f[b+12]],32));case 12:A=h(A,u([0,f[b+11]],24));case 11:A=h(A,u([0,f[b+10]],16));case 10:A=h(A,u([0,f[b+9]],8));case 9:A=h(A,[0,f[b+8]]),A=a(A,v),A=l(A,33),A=a(A,T),w=h(w,A);case 8:x=h(x,u([0,f[b+7]],56));case 7:x=h(x,u([0,f[b+6]],48));case 6:x=h(x,u([0,f[b+5]],40));case 5:x=h(x,u([0,f[b+4]],32));case 4:x=h(x,u([0,f[b+3]],24));case 3:x=h(x,u([0,f[b+2]],16));case 2:x=h(x,u([0,f[b+1]],8));case 1:x=h(x,[0,f[b]]),x=a(x,T),x=l(x,31),x=a(x,v),y=h(y,x)}return y=h(y,[0,f.length]),w=h(w,[0,f.length]),y=c(y,w),w=c(w,y),y=p(y),w=p(w),y=c(y,w),w=c(w,y),("00000000"+(y[0]>>>0).toString(16)).slice(-8)+("00000000"+(y[1]>>>0).toString(16)).slice(-8)+("00000000"+(w[0]>>>0).toString(16)).slice(-8)+("00000000"+(w[1]>>>0).toString(16)).slice(-8)},typeof yr<"u"?(typeof Kr<"u"&&Kr.exports&&(yr=Kr.exports=r),yr.murmurHash3=r):typeof define=="function"&&define.amd?define([],function(){return r}):(r._murmurHash3=t.murmurHash3,r.noConflict=function(){return t.murmurHash3=r._murmurHash3,r._murmurHash3=e,r.noConflict=e,r},t.murmurHash3=r)})(yr)});var oa=O((wm,ia)=>{ia.exports=na()});var Zr=O((Sm,aa)=>{"use strict";aa.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,r){let n=this._internalPositionFor(e,!1);if(r===void 0)n!==-1&&(this._unsetInternalPos(n),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let i=!1;n===-1?(n=this._data.length,this._setBit(e),this._changedData=!0):i=!0,this._setInternalPos(n,e,r,i),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();let r=this._internalPositionFor(e,!0);if(r!==-1)return this._data[r][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){let e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let r=0;for(;r<this.length;)e(this.get(r),r,this),r++}map(e){let r=0,n=new Array(this.length);for(;r<this.length;)n[r]=e(this.get(r),r,this),r++;return n}reduce(e,r){let n=0,i=r;for(;n<this.length;){let o=this.get(n);i=e(i,o,n),n++}return i}find(e){let r=0,n,i;for(;r<this.length&&!n;)i=this.get(r),n=e(i),r++;return n?i:void 0}_internalPositionFor(e,r){let n=this._bytePosFor(e,r);if(n>=this._bitArrays.length)return-1;let i=this._bitArrays[n],o=e-n*7;if(!((i&1<<o)>0))return-1;let c=this._bitArrays.slice(0,n).reduce(n1,0),a=~(4294967295<<o+1),l=sa(i&a);return c+l-1}_bytePosFor(e,r){let n=Math.floor(e/7),i=n+1;for(;!r&&this._bitArrays.length<i;)this._bitArrays.push(0);return n}_setBit(e){let r=this._bytePosFor(e,!1);this._bitArrays[r]|=1<<e-r*7}_unsetBit(e){let r=this._bytePosFor(e,!1);this._bitArrays[r]&=~(1<<e-r*7)}_setInternalPos(e,r,n,i){let o=this._data,s=[r,n];if(i)this._sortData(),o[e]=s;else{if(o.length)if(o[o.length-1][0]>=r)o.push(s);else if(o[0][0]<=r)o.unshift(s);else{let c=Math.round(o.length/2);this._data=o.slice(0,c).concat(s).concat(o.slice(c))}else this._data.push(s);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(i1),this._changedData=!1}bitField(){let e=[],r=8,n=0,i=0,o,s=this._bitArrays.slice();for(;s.length||n;){n===0&&(o=s.shift(),n=7);let a=Math.min(n,r),l=~(255<<a),u=o&l;i|=u<<8-r,o=o>>>a,n-=a,r-=a,(!r||!n&&!s.length)&&(e.push(i),i=0,r=8)}for(var c=e.length-1;c>0&&e[c]===0;c--)e.pop();return e}compactArray(){return this._sortData(),this._data.map(o1)}};function n1(t,e){return t+sa(e)}function sa(t){let e=t;return e=e-(e>>1&1431655765),e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}function i1(t,e){return t[0]-e[0]}function o1(t){return t[1]}});var Aa=O((s2,_a)=>{var ji=class{constructor(e,r=12,n=8*1024,i=32*1024,o=64,s){this.bits=r,this.min=n,this.max=i,this.asModule=e,this.rabin=new e.Rabin(r,n,i,o,s),this.polynomial=s}fingerprint(e){let{__retain:r,__release:n,__allocArray:i,__getInt32Array:o,Int32Array_ID:s,Uint8Array_ID:c}=this.asModule,a=new Int32Array(Math.ceil(e.length/this.min)),l=r(i(s,a)),u=r(i(c,e)),h=this.rabin.fingerprint(u,l),p=o(h);n(u),n(l);let f=p.indexOf(0);return f>=0?p.subarray(0,f):p}};_a.exports=ji});var Ia=O(br=>{"use strict";var w1=typeof BigUint64Array<"u",gr=Symbol(),wr=1024;function va(t,e){let r=new Uint32Array(t),n=new Uint16Array(t);var i=r[e+-4>>>2]>>>1,o=e>>>1;if(i<=wr)return String.fromCharCode.apply(String,n.subarray(o,o+i));let s=[];do{let c=n[o+wr-1],a=c>=55296&&c<56320?wr-1:wr;s.push(String.fromCharCode.apply(String,n.subarray(o,o+=a))),i-=a}while(i>wr);return s.join("")+String.fromCharCode.apply(String,n.subarray(o,o+i))}function Gi(t){let e={};function r(i,o){return i?va(i.buffer,o):"<yet unknown>"}let n=t.env=t.env||{};return n.abort=n.abort||function(o,s,c,a){let l=e.memory||n.memory;throw Error("abort: "+r(l,o)+" at "+r(l,s)+":"+c+":"+a)},n.trace=n.trace||function(o,s){let c=e.memory||n.memory;console.log("trace: "+r(c,o)+(s?" ":"")+Array.prototype.slice.call(arguments,2,2+s).join(", "))},t.Math=t.Math||Math,t.Date=t.Date||Date,e}function Wi(t,e){let r=e.exports,n=r.memory,i=r.table,o=r.__alloc,s=r.__retain,c=r.__rtti_base||-1;function a(v){let b=new Uint32Array(n.buffer),B=b[c>>>2];if((v>>>=0)>=B)throw Error("invalid id: "+v);return b[(c+4>>>2)+v*2]}function l(v){let b=new Uint32Array(n.buffer),B=b[c>>>2];if((v>>>=0)>=B)throw Error("invalid id: "+v);return b[(c+4>>>2)+v*2+1]}function u(v){return 31-Math.clz32(v>>>5&31)}function h(v){return 31-Math.clz32(v>>>14&31)}function p(v){let b=v.length,B=o(b<<1,1),D=new Uint16Array(n.buffer);for(var M=0,K=B>>>1;M<b;++M)D[K+M]=v.charCodeAt(M);return B}t.__allocString=p;function f(v){let b=n.buffer;if(new Uint32Array(b)[v+-8>>>2]!==1)throw Error("not a string: "+v);return va(b,v)}t.__getString=f;function d(v,b,B){let D=n.buffer;if(B)switch(v){case 2:return new Float32Array(D);case 3:return new Float64Array(D)}else switch(v){case 0:return new(b?Int8Array:Uint8Array)(D);case 1:return new(b?Int16Array:Uint16Array)(D);case 2:return new(b?Int32Array:Uint32Array)(D);case 3:return new(b?BigInt64Array:BigUint64Array)(D)}throw Error("unsupported align: "+v)}function m(v,b){let B=a(v);if(!(B&3))throw Error("not an array: "+v+" @ "+B);let D=u(B),M=b.length,K=o(M<<D,0),xe=o(B&2?16:12,v),F=new Uint32Array(n.buffer);F[xe+0>>>2]=s(K),F[xe+4>>>2]=K,F[xe+8>>>2]=M<<D,B&2&&(F[xe+12>>>2]=M);let Ao=d(D,B&1024,B&2048);if(B&8192)for(let Rr=0;Rr<M;++Rr)Ao[(K>>>D)+Rr]=s(b[Rr]);else Ao.set(b,K>>>D);return xe}t.__allocArray=m;function _(v){let b=new Uint32Array(n.buffer),B=b[v+-8>>>2],D=a(B);if(!(D&1))throw Error("not an array: "+B);let M=u(D);var K=b[v+4>>>2];let xe=D&2?b[v+12>>>2]:b[K+-4>>>2]>>>M;return d(M,D&1024,D&2048).subarray(K>>>=M,K+xe)}t.__getArrayView=_;function y(v){let b=_(v),B=b.length,D=new Array(B);for(let M=0;M<B;M++)D[M]=b[M];return D}t.__getArray=y;function w(v){let b=n.buffer,B=new Uint32Array(b)[v+-4>>>2];return b.slice(v,v+B)}t.__getArrayBuffer=w;function x(v,b,B){return new v(A(v,b,B))}function A(v,b,B){let D=n.buffer,M=new Uint32Array(D),K=M[B+4>>>2];return new v(D,K,M[K+-4>>>2]>>>b)}t.__getInt8Array=x.bind(null,Int8Array,0),t.__getInt8ArrayView=A.bind(null,Int8Array,0),t.__getUint8Array=x.bind(null,Uint8Array,0),t.__getUint8ArrayView=A.bind(null,Uint8Array,0),t.__getUint8ClampedArray=x.bind(null,Uint8ClampedArray,0),t.__getUint8ClampedArrayView=A.bind(null,Uint8ClampedArray,0),t.__getInt16Array=x.bind(null,Int16Array,1),t.__getInt16ArrayView=A.bind(null,Int16Array,1),t.__getUint16Array=x.bind(null,Uint16Array,1),t.__getUint16ArrayView=A.bind(null,Uint16Array,1),t.__getInt32Array=x.bind(null,Int32Array,2),t.__getInt32ArrayView=A.bind(null,Int32Array,2),t.__getUint32Array=x.bind(null,Uint32Array,2),t.__getUint32ArrayView=A.bind(null,Uint32Array,2),w1&&(t.__getInt64Array=x.bind(null,BigInt64Array,3),t.__getInt64ArrayView=A.bind(null,BigInt64Array,3),t.__getUint64Array=x.bind(null,BigUint64Array,3),t.__getUint64ArrayView=A.bind(null,BigUint64Array,3)),t.__getFloat32Array=x.bind(null,Float32Array,2),t.__getFloat32ArrayView=A.bind(null,Float32Array,2),t.__getFloat64Array=x.bind(null,Float64Array,3),t.__getFloat64ArrayView=A.bind(null,Float64Array,3);function T(v,b){let B=new Uint32Array(n.buffer);var D=B[v+-8>>>2];if(D<=B[c>>>2])do if(D==b)return!0;while(D=l(D));return!1}return t.__instanceof=T,t.memory=t.memory||n,t.table=t.table||i,ka(r,t)}function Ea(t){return typeof Response<"u"&&t instanceof Response}async function Sa(t,e){return Ea(t=await t)?Ba(t,e):Wi(Gi(e||(e={})),await WebAssembly.instantiate(t instanceof WebAssembly.Module?t:await WebAssembly.compile(t),e))}br.instantiate=Sa;function b1(t,e){return Wi(Gi(e||(e={})),new WebAssembly.Instance(t instanceof WebAssembly.Module?t:new WebAssembly.Module(t),e))}br.instantiateSync=b1;async function Ba(t,e){return WebAssembly.instantiateStreaming?Wi(Gi(e||(e={})),(await WebAssembly.instantiateStreaming(t,e)).instance):Sa(Ea(t=await t)?t.arrayBuffer():t,e)}br.instantiateStreaming=Ba;function ka(t,e){var r=e?Object.create(e):{},n=t.__argumentsLength?function(i){t.__argumentsLength.value=i}:t.__setArgumentsLength||t.__setargc||function(){};for(let i in t){if(!Object.prototype.hasOwnProperty.call(t,i))continue;let o=t[i],s=i.split("."),c=r;for(;s.length>1;){let u=s.shift();Object.prototype.hasOwnProperty.call(c,u)||(c[u]={}),c=c[u]}let a=s[0],l=a.indexOf("#");if(l>=0){let u=a.substring(0,l),h=c[u];if(typeof h>"u"||!h.prototype){let p=function(...f){return p.wrap(p.prototype.constructor(0,...f))};p.prototype={valueOf:function(){return this[gr]}},p.wrap=function(f){return Object.create(p.prototype,{[gr]:{value:f,writable:!1}})},h&&Object.getOwnPropertyNames(h).forEach(f=>Object.defineProperty(p,f,Object.getOwnPropertyDescriptor(h,f))),c[u]=p}if(a=a.substring(l+1),c=c[u].prototype,/^(get|set):/.test(a)){if(!Object.prototype.hasOwnProperty.call(c,a=a.substring(4))){let p=t[i.replace("set:","get:")],f=t[i.replace("get:","set:")];Object.defineProperty(c,a,{get:function(){return p(this[gr])},set:function(d){f(this[gr],d)},enumerable:!0})}}else a==="constructor"?(c[a]=(...p)=>(n(p.length),o(...p))).original=o:(c[a]=function(...p){return n(p.length),o(this[gr],...p)}).original=o}else/^(get|set):/.test(a)?Object.prototype.hasOwnProperty.call(c,a=a.substring(4))||Object.defineProperty(c,a,{get:t[i.replace("set:","get:")],set:t[i.replace("get:","set:")],enumerable:!0}):typeof o=="function"&&o!==n?(c[a]=(...u)=>(n(u.length),o(...u))).original=o:c[a]=o}return r}br.demangle=ka});var Ca=O((c2,Ta)=>{var{instantiate:x1}=Ia();qi.supported=typeof WebAssembly<"u";function qi(t={}){if(!qi.supported)return null;var e=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return x1(new Response(new Blob([e],{type:"application/wasm"})),t)}Ta.exports=qi});var Fa=O((u2,Da)=>{var Na=Aa(),_1=Ca(),A1=async(t,e,r,n,i)=>{let o=await _1();return new Na(o,t,e,r,n,i)};Da.exports={Rabin:Na,create:A1}});var au=O((u3,io)=>{"use strict";var Eh=Object.prototype.hasOwnProperty,ae="~";function Ir(){}Object.create&&(Ir.prototype=Object.create(null),new Ir().__proto__||(ae=!1));function Sh(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function su(t,e,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var o=new Sh(r,n||t,i),s=ae?ae+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],o]:t._events[s].push(o):(t._events[s]=o,t._eventsCount++),t}function gn(t,e){--t._eventsCount===0?t._events=new Ir:delete t._events[e]}function ie(){this._events=new Ir,this._eventsCount=0}ie.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)Eh.call(r,n)&&e.push(ae?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};ie.prototype.listeners=function(e){var r=ae?ae+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s};ie.prototype.listenerCount=function(e){var r=ae?ae+e:e,n=this._events[r];return n?n.fn?1:n.length:0};ie.prototype.emit=function(e,r,n,i,o,s){var c=ae?ae+e:e;if(!this._events[c])return!1;var a=this._events[c],l=arguments.length,u,h;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),l){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,r),!0;case 3:return a.fn.call(a.context,r,n),!0;case 4:return a.fn.call(a.context,r,n,i),!0;case 5:return a.fn.call(a.context,r,n,i,o),!0;case 6:return a.fn.call(a.context,r,n,i,o,s),!0}for(h=1,u=new Array(l-1);h<l;h++)u[h-1]=arguments[h];a.fn.apply(a.context,u)}else{var p=a.length,f;for(h=0;h<p;h++)switch(a[h].once&&this.removeListener(e,a[h].fn,void 0,!0),l){case 1:a[h].fn.call(a[h].context);break;case 2:a[h].fn.call(a[h].context,r);break;case 3:a[h].fn.call(a[h].context,r,n);break;case 4:a[h].fn.call(a[h].context,r,n,i);break;default:if(!u)for(f=1,u=new Array(l-1);f<l;f++)u[f-1]=arguments[f];a[h].fn.apply(a[h].context,u)}}return!0};ie.prototype.on=function(e,r,n){return su(this,e,r,n,!1)};ie.prototype.once=function(e,r,n){return su(this,e,r,n,!0)};ie.prototype.removeListener=function(e,r,n,i){var o=ae?ae+e:e;if(!this._events[o])return this;if(!r)return gn(this,o),this;var s=this._events[o];if(s.fn)s.fn===r&&(!i||s.once)&&(!n||s.context===n)&&gn(this,o);else{for(var c=0,a=[],l=s.length;c<l;c++)(s[c].fn!==r||i&&!s[c].once||n&&s[c].context!==n)&&a.push(s[c]);a.length?this._events[o]=a.length===1?a[0]:a:gn(this,o)}return this};ie.prototype.removeAllListeners=function(e){var r;return e?(r=ae?ae+e:e,this._events[r]&&gn(this,r)):(this._events=new Ir,this._eventsCount=0),this};ie.prototype.off=ie.prototype.removeListener;ie.prototype.addListener=ie.prototype.on;ie.prefixed=ae;ie.EventEmitter=ie;typeof io<"u"&&(io.exports=ie)});var Bu=O((J3,Su)=>{"use strict";Su.exports=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}});var Du=O((Cu,Nu)=>{"use strict";var Tn=Bu(),{hasOwnProperty:Iu}=Object.prototype,{propertyIsEnumerable:Ph}=Object,Gt=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0}),Uh=Cu,ku={concatArrays:!1,ignoreUndefined:!1},Cn=t=>{let e=[];for(let r in t)Iu.call(t,r)&&e.push(r);if(Object.getOwnPropertySymbols){let r=Object.getOwnPropertySymbols(t);for(let n of r)Ph.call(t,n)&&e.push(n)}return e};function Wt(t){return Array.isArray(t)?zh(t):Tn(t)?Rh(t):t}function zh(t){let e=t.slice(0,0);return Cn(t).forEach(r=>{Gt(e,r,Wt(t[r]))}),e}function Rh(t){let e=Object.getPrototypeOf(t)===null?Object.create(null):{};return Cn(t).forEach(r=>{Gt(e,r,Wt(t[r]))}),e}var Tu=(t,e,r,n)=>(r.forEach(i=>{typeof e[i]>"u"&&n.ignoreUndefined||(i in t&&t[i]!==Object.getPrototypeOf(t)?Gt(t,i,mo(t[i],e[i],n)):Gt(t,i,Wt(e[i])))}),t),Oh=(t,e,r)=>{let n=t.slice(0,0),i=0;return[t,e].forEach(o=>{let s=[];for(let c=0;c<o.length;c++)Iu.call(o,c)&&(s.push(String(c)),o===t?Gt(n,i++,o[c]):Gt(n,i++,Wt(o[c])));n=Tu(n,o,Cn(o).filter(c=>!s.includes(c)),r)}),n};function mo(t,e,r){return r.concatArrays&&Array.isArray(t)&&Array.isArray(e)?Oh(t,e,r):!Tn(e)||!Tn(t)?Wt(e):Tu(t,e,Cn(e),r)}Nu.exports=function(...t){let e=mo(Wt(ku),this!==Uh&&this||{},ku),r={_:{}};for(let n of t)if(n!==void 0){if(!Tn(n))throw new TypeError("`"+n+"` is not an Option Object");r=mo(r,{_:n},e)}return r._}});var Pu=O((rg,Lu)=>{var Yt=1e3,Qt=Yt*60,Kt=Qt*60,Et=Kt*24,Mh=Et*7,Vh=Et*365.25;Lu.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Hh(t);if(r==="number"&&isFinite(t))return e.long?jh(t):$h(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Hh(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Vh;case"weeks":case"week":case"w":return r*Mh;case"days":case"day":case"d":return r*Et;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Kt;case"minutes":case"minute":case"mins":case"min":case"m":return r*Qt;case"seconds":case"second":case"secs":case"sec":case"s":return r*Yt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function $h(t){var e=Math.abs(t);return e>=Et?Math.round(t/Et)+"d":e>=Kt?Math.round(t/Kt)+"h":e>=Qt?Math.round(t/Qt)+"m":e>=Yt?Math.round(t/Yt)+"s":t+"ms"}function jh(t){var e=Math.abs(t);return e>=Et?Fn(t,e,Et,"day"):e>=Kt?Fn(t,e,Kt,"hour"):e>=Qt?Fn(t,e,Qt,"minute"):e>=Yt?Fn(t,e,Yt,"second"):t+" ms"}function Fn(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var zu=O((ng,Uu)=>{function Gh(t){r.debug=r,r.default=r,r.coerce=a,r.disable=o,r.enable=i,r.enabled=s,r.humanize=Pu(),r.destroy=l,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let h=0;for(let p=0;p<u.length;p++)h=(h<<5)-h+u.charCodeAt(p),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=e;function r(u){let h,p=null,f,d;function m(..._){if(!m.enabled)return;let y=m,w=Number(new Date),x=w-(h||w);y.diff=x,y.prev=h,y.curr=w,h=w,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let A=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(v,b)=>{if(v==="%%")return"%";A++;let B=r.formatters[b];if(typeof B=="function"){let D=_[A];v=B.call(y,D),_.splice(A,1),A--}return v}),r.formatArgs.call(y,_),(y.log||r.log).apply(y,_)}return m.namespace=u,m.useColors=r.useColors(),m.color=r.selectColor(u),m.extend=n,m.destroy=r.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==r.namespaces&&(f=r.namespaces,d=r.enabled(u)),d),set:_=>{p=_}}),typeof r.init=="function"&&r.init(m),m}function n(u,h){let p=r(this.namespace+(typeof h>"u"?":":h)+u);return p.log=this.log,p}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let h,p=(typeof u=="string"?u:"").split(/[\s,]+/),f=p.length;for(h=0;h<f;h++)p[h]&&(u=p[h].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.slice(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function o(){let u=[...r.names.map(c),...r.skips.map(c).map(h=>"-"+h)].join(",");return r.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let h,p;for(h=0,p=r.skips.length;h<p;h++)if(r.skips[h].test(u))return!1;for(h=0,p=r.names.length;h<p;h++)if(r.names[h].test(u))return!0;return!1}function c(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function a(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Uu.exports=Gh});var Ru=O((we,Ln)=>{we.formatArgs=qh;we.save=Yh;we.load=Qh;we.useColors=Wh;we.storage=Kh();we.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();we.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Wh(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function qh(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Ln.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}we.log=console.debug||console.log||(()=>{});function Yh(t){try{t?we.storage.setItem("debug",t):we.storage.removeItem("debug")}catch{}}function Qh(){let t;try{t=we.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function Kh(){try{return localStorage}catch{}}Ln.exports=zu()(we);var{formatters:Xh}=Ln.exports;Xh.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Pd={};re(Pd,{globSource:()=>void 0,unixfs:()=>Ld,urlSource:()=>tf});var $i=R(ne(),1);function lf(t){return t[Symbol.asyncIterator]!=null}function hf(t){if(lf(t))return(async()=>{for await(let e of t)return e})();for(let e of t)return e}var Gn=hf;function df(t){return t[Symbol.asyncIterator]!=null}function pf(t,e=1){return e=Number(e),df(t)?async function*(){let r=[];if(e<1&&(e=1),e!==Math.round(e))throw new Error("Batch size must be an integer");for await(let n of t)for(r.push(n);r.length>=e;)yield r.slice(0,e),r=r.slice(e);for(;r.length>0;)yield r.slice(0,e),r=r.slice(e)}():function*(){let r=[];if(e<1&&(e=1),e!==Math.round(e))throw new Error("Batch size must be an integer");for(let n of t)for(r.push(n);r.length>=e;)yield r.slice(0,e),r=r.slice(e);for(;r.length>0;)yield r.slice(0,e),r=r.slice(e)}()}var tr=pf;async function*rr(t,e=1){for await(let r of tr(t,e)){let n=r.map(async i=>i().then(o=>({ok:!0,value:o}),o=>({ok:!1,err:o})));for(let i=0;i<n.length;i++){let o=await n[i];if(o.ok)yield o.value;else throw o.err}}}function ct(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function je(t=0){return globalThis.Buffer?.alloc!=null?ct(globalThis.Buffer.alloc(t)):new Uint8Array(t)}function ut(t=0){return globalThis.Buffer?.allocUnsafe!=null?ct(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function ft(t,e){e==null&&(e=t.reduce((i,o)=>i+o.length,0));let r=ut(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return ct(r)}function Bo(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var Io=Symbol.for("@achingbrain/uint8arraylist");function ko(t,e){if(e==null||e<0)throw new RangeError("index is out of bounds");let r=0;for(let n of t){let i=r+n.byteLength;if(e<i)return{buf:n,index:e-r};r=i}throw new RangeError("index is out of bounds")}function Mr(t){return!!t?.[Io]}var lt=class t{constructor(...e){Object.defineProperty(this,Io,{value:!0}),this.bufs=[],this.length=0,e.length>0&&this.appendAll(e)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...e){this.appendAll(e)}appendAll(e){let r=0;for(let n of e)if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.push(n);else if(Mr(n))r+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}prepend(...e){this.prependAll(e)}prependAll(e){let r=0;for(let n of e.reverse())if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.unshift(n);else if(Mr(n))r+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}get(e){let r=ko(this.bufs,e);return r.buf[r.index]}set(e,r){let n=ko(this.bufs,e);n.buf[n.index]=r}write(e,r=0){if(e instanceof Uint8Array)for(let n=0;n<e.length;n++)this.set(r+n,e[n]);else if(Mr(e))for(let n=0;n<e.length;n++)this.set(r+n,e.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0)){if(e===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(e>=this.bufs[0].byteLength)e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}}}slice(e,r){let{bufs:n,length:i}=this._subList(e,r);return ft(n,i)}subarray(e,r){let{bufs:n,length:i}=this._subList(e,r);return n.length===1?n[0]:ft(n,i)}sublist(e,r){let{bufs:n,length:i}=this._subList(e,r),o=new t;return o.length=i,o.bufs=n,o}_subList(e,r){if(e=e??0,r=r??this.length,e<0&&(e=this.length+e),r<0&&(r=this.length+r),e<0||r>this.length)throw new RangeError("index is out of bounds");if(e===r)return{bufs:[],length:0};if(e===0&&r===this.length)return{bufs:[...this.bufs],length:this.length};let n=[],i=0;for(let o=0;o<this.bufs.length;o++){let s=this.bufs[o],c=i,a=c+s.byteLength;if(i=a,e>=a)continue;let l=e>=c&&e<a,u=r>c&&r<=a;if(l&&u){if(e===c&&r===a){n.push(s);break}let h=e-c;n.push(s.subarray(h,h+(r-e)));break}if(l){if(e===0){n.push(s);continue}n.push(s.subarray(e-c));continue}if(u){if(r===a){n.push(s);break}n.push(s.subarray(0,r-c));break}n.push(s)}return{bufs:n,length:r-e}}indexOf(e,r=0){if(!Mr(e)&&!(e instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');let n=e instanceof Uint8Array?e:e.subarray();if(r=Number(r??0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),e.length===0)return r>this.length?this.length:r;let i=n.byteLength;if(i===0)throw new TypeError("search must be at least 1 byte long");let o=256,s=new Int32Array(o);for(let h=0;h<o;h++)s[h]=-1;for(let h=0;h<i;h++)s[n[h]]=h;let c=s,a=this.byteLength-n.byteLength,l=n.byteLength-1,u;for(let h=r;h<=a;h+=u){u=0;for(let p=l;p>=0;p--){let f=this.get(h+p);if(n[p]!==f){u=Math.max(1,p-c[f]);break}}if(u===0)return h}return-1}getInt8(e){let r=this.subarray(e,e+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt8(0)}setInt8(e,r){let n=ut(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,r),this.write(n,e)}getInt16(e,r){let n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,r)}setInt16(e,r,n){let i=je(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt16(0,r,n),this.write(i,e)}getInt32(e,r){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,r)}setInt32(e,r,n){let i=je(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt32(0,r,n),this.write(i,e)}getBigInt64(e,r){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,r)}setBigInt64(e,r,n){let i=je(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigInt64(0,r,n),this.write(i,e)}getUint8(e){let r=this.subarray(e,e+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint8(0)}setUint8(e,r){let n=ut(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,r),this.write(n,e)}getUint16(e,r){let n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,r)}setUint16(e,r,n){let i=je(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint16(0,r,n),this.write(i,e)}getUint32(e,r){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,r)}setUint32(e,r,n){let i=je(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,r,n),this.write(i,e)}getBigUint64(e,r){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,r)}setBigUint64(e,r,n){let i=je(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigUint64(0,r,n),this.write(i,e)}getFloat32(e,r){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,r)}setFloat32(e,r,n){let i=je(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat32(0,r,n),this.write(i,e)}getFloat64(e,r){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,r)}setFloat64(e,r,n){let i=je(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat64(0,r,n),this.write(i,e)}equals(e){if(e==null||!(e instanceof t)||e.bufs.length!==this.bufs.length)return!1;for(let r=0;r<this.bufs.length;r++)if(!Bo(this.bufs[r],e.bufs[r]))return!1;return!0}static fromUint8Arrays(e,r){let n=new t;return n.bufs=e,r==null&&(r=e.reduce((i,o)=>i+o.byteLength,0)),n.length=r,n}};var mf=262144,nr=(t={})=>{let e=t.chunkSize??mf;return async function*(n){let i=new lt,o=0,s=!1;for await(let c of n)for(i.append(c),o+=c.length;o>=e;)if(yield i.slice(0,e),s=!0,e===i.length)i=new lt,o=0;else{let a=new lt;a.append(i.sublist(e)),i=a,o-=e}(!s||o>0)&&(yield i.subarray(0,o))}};var Q={};re(Q,{code:()=>J,createLink:()=>Yo,createNode:()=>qo,decode:()=>G,encode:()=>P,name:()=>hl,prepare:()=>$,validate:()=>oi});var Jn={};re(Jn,{base32:()=>Ke,base32hex:()=>kf,base32hexpad:()=>Tf,base32hexpadupper:()=>Cf,base32hexupper:()=>If,base32pad:()=>Sf,base32padupper:()=>Bf,base32upper:()=>Ef,base32z:()=>Nf});function yf(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var c=t.length,a=t.charAt(0),l=Math.log(c)/Math.log(256),u=Math.log(256)/Math.log(c);function h(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";for(var m=0,_=0,y=0,w=d.length;y!==w&&d[y]===0;)y++,m++;for(var x=(w-y)*u+1>>>0,A=new Uint8Array(x);y!==w;){for(var T=d[y],v=0,b=x-1;(T!==0||v<_)&&b!==-1;b--,v++)T+=256*A[b]>>>0,A[b]=T%c>>>0,T=T/c>>>0;if(T!==0)throw new Error("Non-zero carry");_=v,y++}for(var B=x-_;B!==x&&A[B]===0;)B++;for(var D=a.repeat(m);B<x;++B)D+=t.charAt(A[B]);return D}function p(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;var m=0;if(d[m]!==" "){for(var _=0,y=0;d[m]===a;)_++,m++;for(var w=(d.length-m)*l+1>>>0,x=new Uint8Array(w);d[m];){var A=r[d.charCodeAt(m)];if(A===255)return;for(var T=0,v=w-1;(A!==0||T<y)&&v!==-1;v--,T++)A+=c*x[v]>>>0,x[v]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");y=T,m++}if(d[m]!==" "){for(var b=w-y;b!==w&&x[b]===0;)b++;for(var B=new Uint8Array(_+(w-b)),D=_;b!==w;)B[D++]=x[b++];return B}}}function f(d){var m=p(d);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:p,decode:f}}var gf=yf,wf=gf,To=wf;var Bt={};re(Bt,{coerce:()=>_e,empty:()=>Co,equals:()=>Wn,fromHex:()=>xf,fromString:()=>qn,isBinary:()=>_f,toHex:()=>bf,toString:()=>Yn});var Co=new Uint8Array(0),bf=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),""),xf=t=>{let e=t.match(/../g);return e?new Uint8Array(e.map(r=>parseInt(r,16))):Co},Wn=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},_e=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},_f=t=>t instanceof ArrayBuffer||ArrayBuffer.isView(t),qn=t=>new TextEncoder().encode(t),Yn=t=>new TextDecoder().decode(t);var Qn=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Kn=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return No(this,e)}},Xn=class{constructor(e){this.decoders=e}or(e){return No(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},No=(t,e)=>new Xn({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),Zn=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Qn(e,r,n),this.decoder=new Kn(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},kt=({name:t,prefix:e,encode:r,decode:n})=>new Zn(t,e,r,n),Qe=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=To(r,e);return kt({prefix:t,name:e,encode:n,decode:o=>_e(i(o))})},Af=(t,e,r,n)=>{let i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),c=0,a=0,l=0;for(let u=0;u<o;++u){let h=i[t[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);a=a<<r|h,c+=r,c>=8&&(c-=8,s[l++]=255&a>>c)}if(c>=r||255&a<<8-c)throw new SyntaxError("Unexpected end of data");return s},vf=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,c=0;for(let a=0;a<t.length;++a)for(c=c<<8|t[a],s+=8;s>r;)s-=r,o+=e[i&c>>s];if(s&&(o+=e[i&c<<r-s]),n)for(;o.length*r&7;)o+="=";return o},H=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>kt({prefix:e,name:t,encode(i){return vf(i,n,r)},decode(i){return Af(i,n,r,t)}});var Ke=H({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ef=H({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Sf=H({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Bf=H({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),kf=H({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),If=H({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Tf=H({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Cf=H({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Nf=H({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var ei={};re(ei,{base58btc:()=>Ae,base58flickr:()=>Df});var Ae=Qe({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Df=Qe({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Ff=Lo,Do=128,Lf=127,Pf=~Lf,Uf=Math.pow(2,31);function Lo(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Uf;)e[r++]=t&255|Do,t/=128;for(;t&Pf;)e[r++]=t&255|Do,t>>>=7;return e[r]=t|0,Lo.bytes=r-n+1,e}var zf=ti,Rf=128,Fo=127;function ti(t,n){var r=0,n=n||0,i=0,o=n,s,c=t.length;do{if(o>=c)throw ti.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&Fo)<<i:(s&Fo)*Math.pow(2,i),i+=7}while(s>=Rf);return ti.bytes=o-n,r}var Of=Math.pow(2,7),Mf=Math.pow(2,14),Vf=Math.pow(2,21),Hf=Math.pow(2,28),$f=Math.pow(2,35),jf=Math.pow(2,42),Gf=Math.pow(2,49),Wf=Math.pow(2,56),qf=Math.pow(2,63),Yf=function(t){return t<Of?1:t<Mf?2:t<Vf?3:t<Hf?4:t<$f?5:t<jf?6:t<Gf?7:t<Wf?8:t<qf?9:10},Qf={encode:Ff,decode:zf,encodingLength:Yf},Kf=Qf,ir=Kf;var or=(t,e=0)=>[ir.decode(t,e),ir.decode.bytes],It=(t,e,r=0)=>(ir.encode(t,e,r),e),Tt=t=>ir.encodingLength(t);var ht=(t,e)=>{let r=e.byteLength,n=Tt(t),i=n+Tt(r),o=new Uint8Array(i+r);return It(t,o,0),It(r,o,n),o.set(e,i),new Ct(t,r,e,o)},Hr=t=>{let e=_e(t),[r,n]=or(e),[i,o]=or(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new Ct(r,i,s,e)},Po=(t,e)=>{if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&Wn(t.bytes,r.bytes)}},Ct=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};var Uo=(t,e)=>{let{bytes:r,version:n}=t;switch(n){case 0:return Zf(r,ri(t),e||Ae.encoder);default:return Jf(r,ri(t),e||Ke.encoder)}};var zo=new WeakMap,ri=t=>{let e=zo.get(t);if(e==null){let r=new Map;return zo.set(t,r),r}return e},L=class t{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==sr)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==el)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=ht(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return t.equals(this,e)}static equals(e,r){let n=r;return n&&e.code===n.code&&e.version===n.version&&Po(e.multihash,n.multihash)}toString(e){return Uo(this,e)}toJSON(){return{"/":Uo(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof t)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:o,bytes:s}=r;return new t(n,i,o,s||Ro(n,i,o.bytes))}else if(r[tl]===!0){let{version:n,multihash:i,code:o}=r,s=Hr(i);return t.create(n,o,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==sr)throw new Error(`Version 0 CID must use dag-pb (code: ${sr}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let i=Ro(e,r,n.bytes);return new t(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,sr,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,i=_e(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=i.subarray(r.multihashSize-r.digestSize),s=new Ct(r.multihashCode,r.digestSize,o,i);return[r.version===0?t.createV0(s):t.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[h,p]=or(e.subarray(r));return r+=p,h},i=n(),o=sr;if(i===18?(i=0,r=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,c=n(),a=n(),l=r+a,u=l-s;return{version:i,codec:o,multihashCode:c,digestSize:a,multihashSize:u,size:l}}static parse(e,r){let[n,i]=Xf(e,r),o=t.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return ri(o).set(n,e),o}},Xf=(t,e)=>{switch(t[0]){case"Q":{let r=e||Ae;return[Ae.prefix,r.decode(`${Ae.prefix}${t}`)]}case Ae.prefix:{let r=e||Ae;return[Ae.prefix,r.decode(t)]}case Ke.prefix:{let r=e||Ke;return[Ke.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},Zf=(t,e,r)=>{let{prefix:n}=r;if(n!==Ae.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let o=r.encode(t).slice(1);return e.set(n,o),o}else return i},Jf=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let o=r.encode(t);return e.set(n,o),o}else return i},sr=112,el=18,Ro=(t,e,r)=>{let n=Tt(t),i=n+Tt(e),o=new Uint8Array(i+r.byteLength);return It(t,o,0),It(e,o,n),o.set(r,i),o},tl=Symbol.for("@ipld/js-cid/CID");var rl=new TextDecoder;function ni(t,e){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");let i=t[e++];if(r+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[r,e]}function $r(t,e){let r;[r,e]=ni(t,e);let n=e+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,n),n]}function Oo(t,e){let r;return[r,e]=ni(t,e),[r&7,r>>3,e]}function nl(t){let e={},r=t.length,n=0;for(;n<r;){let i,o;if([i,o,n]=Oo(t,n),o===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=$r(t,n)}else if(o===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let s;[s,n]=$r(t,n),e.Name=rl.decode(s)}else if(o===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=ni(t,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function Mo(t){let e=t.length,r=0,n,i=!1,o;for(;r<e;){let c,a;if([c,a,r]=Oo(t,r),c!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${c}`);if(a===1){if(o)throw new Error("protobuf: (PBNode) duplicate Data section");[o,r]=$r(t,r),n&&(i=!0)}else if(a===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let l;[l,r]=$r(t,r),n.push(nl(l))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${a}`)}if(r>e)throw new Error("protobuf: (PBNode) unexpected end of data");let s={};return o&&(s.Data=o),s.Links=n||[],s}var Ho=new TextEncoder,Vo=2**32,il=2**31;function ol(t,e){let r=e.length;if(typeof t.Tsize=="number"){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");r=ar(e,r,t.Tsize)-1,e[r]=24}if(typeof t.Name=="string"){let n=Ho.encode(t.Name);r-=n.length,e.set(n,r),r=ar(e,r,n.length)-1,e[r]=18}return t.Hash&&(r-=t.Hash.length,e.set(t.Hash,r),r=ar(e,r,t.Hash.length)-1,e[r]=10),e.length-r}function $o(t){let e=al(t),r=new Uint8Array(e),n=e;if(t.Data&&(n-=t.Data.length,r.set(t.Data,n),n=ar(r,n,t.Data.length)-1,r[n]=10),t.Links)for(let i=t.Links.length-1;i>=0;i--){let o=ol(t.Links[i],r.subarray(0,n));n-=o,n=ar(r,n,o)-1,r[n]=18}return r}function sl(t){let e=0;if(t.Hash){let r=t.Hash.length;e+=1+r+Dt(r)}if(typeof t.Name=="string"){let r=Ho.encode(t.Name).length;e+=1+r+Dt(r)}return typeof t.Tsize=="number"&&(e+=1+Dt(t.Tsize)),e}function al(t){let e=0;if(t.Data){let r=t.Data.length;e+=1+r+Dt(r)}if(t.Links)for(let r of t.Links){let n=sl(r);e+=1+n+Dt(n)}return e}function ar(t,e,r){e-=Dt(r);let n=e;for(;r>=il;)t[e++]=r&127|128,r/=128;for(;r>=128;)t[e++]=r&127|128,r>>>=7;return t[e]=r,n}function Dt(t){return t%2===0&&t++,Math.floor((cl(t)+6)/7)}function cl(t){let e=0;return t>=Vo&&(t=Math.floor(t/Vo),e=32),t>=65536&&(t>>>=16,e+=16),t>=256&&(t>>>=8,e+=8),e+ul[t]}var ul=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];var fl=["Data","Links"],ll=["Hash","Name","Tsize"],ii=new TextEncoder;function Go(t,e){if(t===e)return 0;let r=t.Name?ii.encode(t.Name):[],n=e.Name?ii.encode(e.Name):[],i=r.length,o=n.length;for(let s=0,c=Math.min(i,o);s<c;++s)if(r[s]!==n[s]){i=r[s],o=n[s];break}return i<o?-1:o<i?1:0}function jo(t,e){return!Object.keys(t).some(r=>!e.includes(r))}function Wo(t){if(typeof t.asCID=="object"){let r=L.asCID(t);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");let e={};if(t.Hash){let r=L.asCID(t.Hash);try{r||(typeof t.Hash=="string"?r=L.parse(t.Hash):t.Hash instanceof Uint8Array&&(r=L.decode(t.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(e.Hash=r)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof t.Name=="string"&&(e.Name=t.Name),typeof t.Tsize=="number"&&(e.Tsize=t.Tsize),e}function $(t){if((t instanceof Uint8Array||typeof t=="string")&&(t={Data:t}),typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");let e={};if(t.Data!==void 0)if(typeof t.Data=="string")e.Data=ii.encode(t.Data);else if(t.Data instanceof Uint8Array)e.Data=t.Data;else throw new TypeError("Invalid DAG-PB form");if(t.Links!==void 0)if(Array.isArray(t.Links))e.Links=t.Links.map(Wo),e.Links.sort(Go);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function oi(t){if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form");if(!jo(t,fl))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(t.Data!==void 0&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let e=0;e<t.Links.length;e++){let r=t.Links[e];if(!r||typeof r!="object"||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!jo(r,ll))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(r.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash==null||!r.Hash["/"]||r.Hash["/"]!==r.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0){if(typeof r.Tsize!="number"||r.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(r.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(e>0&&Go(r,t.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function qo(t,e=[]){return $({Data:t,Links:e})}function Yo(t,e,r){return Wo({Hash:r,Name:t,Tsize:e})}var hl="dag-pb",J=112;function P(t){oi(t);let e={};return t.Links&&(e.Links=t.Links.map(r=>{let n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),t.Data&&(e.Data=t.Data),$o(e)}function G(t){let e=Mo(t),r={};return e.Data&&(r.Data=e.Data),e.Links&&(r.Links=e.Links.map(n=>{let i={};try{i.Hash=L.decode(n.Hash)}catch{}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(i.Name=n.Name),n.Tsize!==void 0&&(i.Tsize=n.Tsize),i})),r}var vi=R(ne(),1);var wi=R(fi(),1),Ps=R(ks(),1),Us=R(pt(),1),bi=R(gi(),1),zs=R(Ls(),1);function _l(){Us.default._configure(),wi.default._configure(Ps.default),bi.default._configure(zs.default)}_l();var Rs=["uint64","int64","sint64","fixed64","sfixed64"];function Al(t){for(let e of Rs){if(t[e]==null)continue;let r=t[e];t[e]=function(){return BigInt(r.call(this).toString())}}return t}function xi(t){return Al(new wi.default(t))}function vl(t){for(let e of Rs){if(t[e]==null)continue;let r=t[e];t[e]=function(n){return r.call(this,n.toString())}}return t}function _i(){return vl(bi.default.create())}function fr(t,e){let r=xi(t instanceof Uint8Array?t:t.subarray());return e.decode(r)}function lr(t,e){let r=_i();return e.encode(t,r,{lengthDelimited:!1}),r.finish()}var Lt;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})(Lt||(Lt={}));function Yr(t,e,r,n){return{name:t,type:e,encode:r,decode:n}}function Ai(t){function e(i){if(t[i.toString()]==null)throw new Error("Invalid enum value");return t[i]}let r=function(o,s){let c=e(o);s.int32(c)},n=function(o){let s=o.int32();return e(s)};return Yr("enum",Lt.VARINT,r,n)}function hr(t,e){return Yr("message",Lt.LENGTH_DELIMITED,t,e)}var Te;(function(t){let e;(function(i){i.Raw="Raw",i.Directory="Directory",i.File="File",i.Metadata="Metadata",i.Symlink="Symlink",i.HAMTShard="HAMTShard"})(e=t.DataType||(t.DataType={}));let r;(function(i){i[i.Raw=0]="Raw",i[i.Directory=1]="Directory",i[i.File=2]="File",i[i.Metadata=3]="Metadata",i[i.Symlink=4]="Symlink",i[i.HAMTShard=5]="HAMTShard"})(r||(r={})),function(i){i.codec=()=>Ai(r)}(e=t.DataType||(t.DataType={}));let n;t.codec=()=>(n==null&&(n=hr((i,o,s={})=>{if(s.lengthDelimited!==!1&&o.fork(),i.Type!=null&&(o.uint32(8),t.DataType.codec().encode(i.Type,o)),i.Data!=null&&(o.uint32(18),o.bytes(i.Data)),i.filesize!=null&&(o.uint32(24),o.uint64(i.filesize)),i.blocksizes!=null)for(let c of i.blocksizes)o.uint32(32),o.uint64(c);i.hashType!=null&&(o.uint32(40),o.uint64(i.hashType)),i.fanout!=null&&(o.uint32(48),o.uint64(i.fanout)),i.mode!=null&&(o.uint32(56),o.uint32(i.mode)),i.mtime!=null&&(o.uint32(66),Qr.codec().encode(i.mtime,o)),s.lengthDelimited!==!1&&o.ldelim()},(i,o)=>{let s={blocksizes:[]},c=o==null?i.len:i.pos+o;for(;i.pos<c;){let a=i.uint32();switch(a>>>3){case 1:s.Type=t.DataType.codec().decode(i);break;case 2:s.Data=i.bytes();break;case 3:s.filesize=i.uint64();break;case 4:s.blocksizes.push(i.uint64());break;case 5:s.hashType=i.uint64();break;case 6:s.fanout=i.uint64();break;case 7:s.mode=i.uint32();break;case 8:s.mtime=Qr.codec().decode(i,i.uint32());break;default:i.skipType(a&7);break}}return s})),n),t.encode=i=>lr(i,t.codec()),t.decode=i=>fr(i,t.codec())})(Te||(Te={}));var Qr;(function(t){let e;t.codec=()=>(e==null&&(e=hr((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Seconds!=null&&(n.uint32(8),n.int64(r.Seconds)),r.FractionalNanoseconds!=null&&(n.uint32(21),n.fixed32(r.FractionalNanoseconds)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},o=n==null?r.len:r.pos+n;for(;r.pos<o;){let s=r.uint32();switch(s>>>3){case 1:i.Seconds=r.int64();break;case 2:i.FractionalNanoseconds=r.fixed32();break;default:r.skipType(s&7);break}}return i})),e),t.encode=r=>lr(r,t.codec()),t.decode=r=>fr(r,t.codec())})(Qr||(Qr={}));var Os;(function(t){let e;t.codec=()=>(e==null&&(e=hr((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.MimeType!=null&&(n.uint32(10),n.string(r.MimeType)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},o=n==null?r.len:r.pos+n;for(;r.pos<o;){let s=r.uint32();switch(s>>>3){case 1:i.MimeType=r.string();break;default:r.skipType(s&7);break}}return i})),e),t.encode=r=>lr(r,t.codec()),t.decode=r=>fr(r,t.codec())})(Os||(Os={}));var Ms={Raw:"raw",Directory:"directory",File:"file",Metadata:"metadata",Symlink:"symlink",HAMTShard:"hamt-sharded-directory"},El=["directory","hamt-sharded-directory"],Vs=parseInt("0644",8),Hs=parseInt("0755",8),C=class t{static unmarshal(e){let r=Te.decode(e),n=new t({type:Ms[r.Type!=null?r.Type.toString():"File"],data:r.Data,blockSizes:r.blocksizes,mode:r.mode,mtime:r.mtime!=null?{secs:r.mtime.Seconds??0n,nsecs:r.mtime.FractionalNanoseconds}:void 0,fanout:r.fanout});return n._originalMode=r.mode??0,n}type;data;blockSizes;hashType;fanout;mtime;_mode;_originalMode;constructor(e={type:"file"}){let{type:r,data:n,blockSizes:i,hashType:o,fanout:s,mtime:c,mode:a}=e;if(r!=null&&!Object.values(Ms).includes(r))throw(0,vi.default)(new Error("Type: "+r+" is not valid"),"ERR_INVALID_TYPE");this.type=r??"file",this.data=n,this.hashType=o,this.fanout=s,this.blockSizes=i??[],this._originalMode=0,this.mode=a,this.mtime=c}set mode(e){e==null?this._mode=this.isDirectory()?Hs:Vs:this._mode=e&4095}get mode(){return this._mode}isDirectory(){return El.includes(this.type)}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0n;let e=0n;return this.blockSizes.forEach(r=>{e+=r}),this.data!=null&&(e+=BigInt(this.data.length)),e}marshal(){let e;switch(this.type){case"raw":e=Te.DataType.Raw;break;case"directory":e=Te.DataType.Directory;break;case"file":e=Te.DataType.File;break;case"metadata":e=Te.DataType.Metadata;break;case"symlink":e=Te.DataType.Symlink;break;case"hamt-sharded-directory":e=Te.DataType.HAMTShard;break;default:throw(0,vi.default)(new Error(`Type: ${e} is not valid`),"ERR_INVALID_TYPE")}let r=this.data;(this.data==null||this.data.length===0)&&(r=void 0);let n;this.mode!=null&&(n=this._originalMode&4294963200|(this.mode??0),n===Vs&&!this.isDirectory()&&(n=void 0),n===Hs&&this.isDirectory()&&(n=void 0));let i;return this.mtime!=null&&(i={Seconds:this.mtime.secs,FractionalNanoseconds:this.mtime.nsecs}),Te.encode({Type:e,Data:r,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:n,mtime:i})}};var ze={};re(ze,{code:()=>ue,decode:()=>kl,encode:()=>Bl,name:()=>Sl});var Sl="raw",ue=85,Bl=t=>_e(t),kl=t=>_e(t);var j=class extends Event{constructor(e,r){super(e),this.detail=r}};var Si={};re(Si,{sha256:()=>fe,sha512:()=>Il});var yt=({name:t,code:e,encode:r})=>new Ei(t,e,r),Ei=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?ht(this.code,r):r.then(n=>ht(this.code,n))}else throw Error("Unknown type, must be binary type")}};var js=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),fe=yt({name:"sha2-256",code:18,encode:js("SHA-256")}),Il=yt({name:"sha2-512",code:19,encode:js("SHA-512")});var Ce=async(t,e,r)=>{r.codec==null&&(r.codec=Q);let n=await fe.digest(t),i=L.create(r.cidVersion,r.codec.code,n);return await e.put(i,t,r),i};function Gs(t){return async function*(r,n){let i=0n;for await(let o of r.content)yield async()=>{let s,c={codec:Q,cidVersion:t.cidVersion,onProgress:t.onProgress};t.rawLeaves?(c.codec=ze,c.cidVersion=1):(s=new C({type:t.leafType,data:o}),o=P({Data:s.marshal(),Links:[]}));let a=await Ce(o,n,c);return i+=BigInt(o.byteLength),t.onProgress?.(new j("unixfs:importer:progress:file:write",{bytesWritten:i,cid:a,path:r.path})),{cid:a,unixfs:s,size:BigInt(o.length),block:o}}}}var Bi=R(ne(),1);var Ws=async(t,e,r)=>{let n=new C({type:"directory",mtime:t.mtime,mode:t.mode}),i=P($({Data:n.marshal()})),o=await Ce(i,e,r),s=t.path;return{cid:o,path:s,unixfs:n,size:BigInt(i.length),originalPath:t.originalPath,block:i}};async function*Tl(t,e,r){let n=-1,i;for await(let o of rr(r.bufferImporter(t,e),r.blockWriteConcurrency)){if(n++,n===0){i={...o,single:!0};continue}else n===1&&i!=null&&(yield{...i,block:void 0,single:void 0},i=void 0);yield{...o,block:void 0}}i!=null&&(yield i)}function qs(t){return t.single===!0}var Cl=(t,e,r)=>async function(i){if(i.length===1&&qs(i[0])&&r.reduceSingleLeafToSelf){let u=i[0],h=u.block;return qs(u)&&(t.mtime!==void 0||t.mode!==void 0)&&(u.unixfs=new C({type:"file",mtime:t.mtime,mode:t.mode,data:u.block}),h={Data:u.unixfs.marshal(),Links:[]},u.block=P($(h)),u.cid=await Ce(u.block,e,{...r,cidVersion:r.cidVersion}),u.size=BigInt(u.block.length)),r.onProgress?.(new j("unixfs:importer:progress:file:layout",{cid:u.cid,path:u.originalPath})),{cid:u.cid,path:t.path,unixfs:u.unixfs,size:u.size,originalPath:u.originalPath}}let o=new C({type:"file",mtime:t.mtime,mode:t.mode}),s=i.filter(u=>u.cid.code===ue&&u.size>0||u.unixfs!=null&&u.unixfs.data==null&&u.unixfs.fileSize()>0n?!0:!!u.unixfs?.data?.length).map(u=>u.cid.code===ue?(o.addBlockSize(u.size),{Name:"",Tsize:Number(u.size),Hash:u.cid}):(u.unixfs==null||u.unixfs.data==null?o.addBlockSize(u.unixfs?.fileSize()??0n):o.addBlockSize(BigInt(u.unixfs.data.length)),{Name:"",Tsize:Number(u.size),Hash:u.cid})),c={Data:o.marshal(),Links:s},a=P($(c)),l=await Ce(a,e,r);return r.onProgress?.(new j("unixfs:importer:progress:file:layout",{cid:l,path:t.originalPath})),{cid:l,path:t.path,unixfs:o,size:BigInt(a.length+c.Links.reduce((u,h)=>u+(h.Tsize??0),0)),originalPath:t.originalPath,block:a}},Ys=async(t,e,r)=>r.layout(Tl(t,e,r),Cl(t,e,r));function Nl(t){return Symbol.iterator in t}function Dl(t){return Symbol.asyncIterator in t}function Fl(t){try{if(t instanceof Uint8Array)return async function*(){yield t}();if(Nl(t))return async function*(){yield*t}();if(Dl(t))return t}catch{throw(0,Bi.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw(0,Bi.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}function Qs(t){return async function*(r,n){for await(let i of r){let o;if(i.path!=null&&(o=i.path,i.path=i.path.split("/").filter(s=>s!=null&&s!==".").join("/")),Ll(i)){let s={path:i.path,mtime:i.mtime,mode:i.mode,content:async function*(){let c=0n;for await(let a of t.chunker(t.chunkValidator(Fl(i.content)))){let l=BigInt(a.byteLength);c+=l,t.onProgress?.(new j("unixfs:importer:progress:file:read",{bytesRead:c,chunkSize:l,path:i.path})),yield a}}(),originalPath:o};yield async()=>Ys(s,n,t)}else if(i.path!=null){let s={path:i.path,mtime:i.mtime,mode:i.mode,originalPath:o};yield async()=>Ws(s,n,t)}else throw new Error("Import candidate must have content or path or both")}}}function Ll(t){return t.content!=null}var Mi=R(ne(),1);var ki={};re(ki,{base10:()=>Pl});var Pl=Qe({prefix:"9",name:"base10",alphabet:"0123456789"});var Ii={};re(Ii,{base16:()=>Ul,base16upper:()=>zl});var Ul=H({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),zl=H({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ti={};re(Ti,{base2:()=>Rl});var Rl=H({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Ci={};re(Ci,{base256emoji:()=>$l});var Ks=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Ol=Ks.reduce((t,e,r)=>(t[r]=e,t),[]),Ml=Ks.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Vl(t){return t.reduce((e,r)=>(e+=Ol[r],e),"")}function Hl(t){let e=[];for(let r of t){let n=Ml[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var $l=kt({prefix:"\u{1F680}",name:"base256emoji",encode:Vl,decode:Hl});var Ni={};re(Ni,{base36:()=>jl,base36upper:()=>Gl});var jl=Qe({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Gl=Qe({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Fi={};re(Fi,{base64:()=>Di,base64pad:()=>Wl,base64url:()=>ql,base64urlpad:()=>Yl});var Di=H({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Wl=H({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ql=H({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Yl=H({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Li={};re(Li,{base8:()=>Ql});var Ql=H({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Pi={};re(Pi,{identity:()=>Kl});var Kl=kt({prefix:"\0",name:"identity",encode:t=>Yn(t),decode:t=>qn(t)});var Lp=new TextEncoder,Pp=new TextDecoder;var zi={};re(zi,{identity:()=>Ui});var Xs=0,Zl="identity",Zs=_e,Jl=t=>ht(Xs,Zs(t)),Ui={code:Xs,name:Zl,encode:Zs,digest:Jl};var Ri={...Pi,...Ti,...Li,...ki,...Ii,...Jn,...Ni,...ei,...Fi,...Ci},Vp={...Si,...zi};function ea(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var Js=ea("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Oi=ea("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=ut(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),e1={utf8:Js,"utf-8":Js,hex:Ri.base16,latin1:Oi,ascii:Oi,binary:Oi,...Ri},ta=e1;function Je(t,e="utf8"){let r=ta[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ct(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var ra=()=>async function*(e){for await(let r of e){if(r.length===void 0)throw(0,Mi.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if(typeof r=="string"||r instanceof String)yield Je(r.toString());else if(Array.isArray(r))yield Uint8Array.from(r);else if(r instanceof Uint8Array)yield r;else throw(0,Mi.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}};var t1=174;function dr(t){let e=t?.maxChildrenPerNode??t1;return async function r(n,i){let o=[];for await(let s of tr(n,e))o.push(await i(s));return o.length>1?r(o,i):o[0]}}var Re=class{options;root;dir;path;dirty;flat;parent;parentKey;unixfs;mode;mtime;cid;size;nodeSize;constructor(e,r){this.options=r??{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime}},pr=L.parse("QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn"),mr=L.parse("zdj7WbTaiJT1fgatdet9Ei9iDB5hdCxkbVyhyh8YTUnXMiwYi");var gt=class extends Re{_children;constructor(e,r){super(e,r),this._children=new Map}async put(e,r){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,this._children.set(e,r)}async get(e){return Promise.resolve(this._children.get(e))}childCount(){return this._children.size}directChildrenCount(){return this.childCount()}onlyChild(){return this._children.values().next().value}async*eachChildSeries(){for(let[e,r]of this._children.entries())yield{key:e,child:r}}estimateNodeSize(){if(this.nodeSize!==void 0)return this.nodeSize;this.nodeSize=0;for(let[e,r]of this._children.entries())r.size!=null&&r.cid!=null&&(this.nodeSize+=e.length+(this.options.cidVersion===1?mr.bytes.byteLength:pr.bytes.byteLength));return this.nodeSize}async*flush(e){let r=[];for(let[a,l]of this._children.entries()){let u=l;if(l instanceof Re)for await(let h of l.flush(e))u=h,yield h;u.size!=null&&u.cid!=null&&r.push({Name:a,Tsize:Number(u.size),Hash:u.cid})}let n=new C({type:"directory",mtime:this.mtime,mode:this.mode}),i={Data:n.marshal(),Links:r},o=P($(i)),s=await Ce(o,e,this.options),c=o.length+i.Links.reduce((a,l)=>a+(l.Tsize==null?0:l.Tsize),0);this.cid=s,this.size=c,yield{cid:s,unixfs:n,path:this.path,size:BigInt(c)}}};var Xr=R(oa(),1);function r1(t){let e=new Array(4);for(let r=0;r<4;r++)e[r]=t&255,t=t>>8;return new Uint8Array(e)}var _m=yt({name:"murmur3-32",code:35,encode:t=>r1(Xr.default.x86.hash32(t))}),wt=yt({name:"murmur3-128",code:34,encode:t=>Bt.fromHex(Xr.default.x64.hash128(t))}),Am=yt({name:"murmur3-x64-64",code:34,encode:t=>Bt.fromHex(Xr.default.x64.hash128(t)).subarray(0,8)});var ca=R(Zr(),1);var le=class t{constructor(e,r,n=0){this._options=e,this._popCount=0,this._parent=r,this._posAtParent=n,this._children=new ca.default,this.key=null}async put(e,r){let n=await this._findNewBucketAndPos(e);await n.bucket._putAt(n,e,r)}async get(e){let r=await this._findChild(e);if(r!=null)return r.value}async del(e){let r=await this._findPlace(e),n=r.bucket._at(r.pos);n!=null&&n.key===e&&r.bucket._delAt(r.pos)}leafCount(){return this._children.compactArray().reduce((r,n)=>n instanceof t?r+n.leafCount():r+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){let e=this._children.compactArray();for(let r of e)r instanceof t?yield*r.eachLeafSeries():yield r}serialize(e,r){let n=[];return r(this._children.reduce((i,o,s)=>(o!=null&&(o instanceof t?i.push(o.serialize(e,r)):i.push(e(o,s))),i),n))}async asyncTransform(e,r){return await ua(this,e,r)}toJSON(){return this.serialize(a1,c1)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){let r=await this._findPlace(e),n=r.bucket._at(r.pos);if(!(n instanceof t)&&n!=null&&n.key===e)return n}async _findPlace(e){let r=this._options.hash(typeof e=="string"?Je(e):e),n=await r.take(this._options.bits),i=this._children.get(n);return i instanceof t?await i._findPlace(r):{bucket:this,pos:n,hash:r,existingChild:i}}async _findNewBucketAndPos(e){let r=await this._findPlace(e);if(r.existingChild!=null&&r.existingChild.key!==e){let n=new t(this._options,r.bucket,r.pos);r.bucket._putObjectAt(r.pos,n);let i=await n._findPlace(r.existingChild.hash);return i.bucket._putAt(i,r.existingChild.key,r.existingChild.value),await n._findNewBucketAndPos(r.hash)}return r}_putAt(e,r,n){this._putObjectAt(e.pos,{key:r,value:n,hash:e.hash})}_putObjectAt(e,r){this._children.get(e)==null&&this._popCount++,this._children.set(e,r)}_delAt(e){if(e===-1)throw new Error("Invalid position");this._children.get(e)!=null&&this._popCount--,this._children.unset(e),this._level()}_level(){if(this._parent!=null&&this._popCount<=1)if(this._popCount===1){let e=this._children.find(s1);if(e!=null&&!(e instanceof t)){let r=e.hash;r.untake(this._options.bits);let n={pos:this._posAtParent,hash:r,bucket:this._parent};this._parent._putAt(n,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}};function s1(t){return!!t}function a1(t,e){return t.key}function c1(t){return t}async function ua(t,e,r){let n=[];for(let i of t._children.compactArray())if(i instanceof le)await ua(i,e,r);else{let o=await e(i);n.push({bitField:t._children.bitField(),children:o})}return await r(n)}var u1=[255,254,252,248,240,224,192,128],f1=[1,3,7,15,31,63,127,255],Jr=class{constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let r=e,n=0;for(;r>0&&this._haveBits();){let i=this._value[this._currentBytePos],o=this._currentBitPos+1,s=Math.min(o,r),c=l1(i,o-s,s);n=(n<<s)+c,r-=s,this._currentBitPos-=s,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function l1(t,e,r){let n=h1(e,r);return(t&n)>>>e}function h1(t,e){return u1[t]&f1[Math.min(e+t-1,7)]}function fa(t){function e(r){return r instanceof en?r:new en(r,t)}return e}var en=class{constructor(e,r){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=r,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let r=e;for(;this._availableBits<r;)await this._produceMoreBits();let n=0;for(;r>0;){let i=this._buffers[this._currentBufferIndex],o=Math.min(i.availableBits(),r),s=i.take(o);n=(n<<o)+s,r-=o,this._availableBits-=o,i.availableBits()===0&&this._currentBufferIndex++}return n}untake(e){let r=e;for(;r>0;){let n=this._buffers[this._currentBufferIndex],i=Math.min(n.totalBits()-n.availableBits(),r);n.untake(i),r-=i,this._availableBits+=i,this._currentBufferIndex>0&&n.totalBits()===n.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;let e=this._depth>0?ft([this._value,Uint8Array.from([this._depth])]):this._value,r=await this._hashFn(e),n=new Jr(r);this._buffers.push(n),this._availableBits+=n.availableBits()}};function Pt(t){if(t==null||t.hashFn==null)throw new Error("please define an options.hashFn");let e={bits:t.bits??8,hash:fa(t.hashFn)};return new le(e)}async function d1(t){return(await wt.encode(t)).slice(0,8).reverse()}var la=BigInt(34),p1=8,Vi=class extends Re{_bucket;constructor(e,r){super(e,r),this._bucket=Pt({hashFn:d1,bits:r.shardFanoutBits??p1})}async put(e,r){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,await this._bucket.put(e,r)}async get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(let{key:e,value:r}of this._bucket.eachLeafSeries())yield{key:e,child:r}}estimateNodeSize(){return this.nodeSize!==void 0?this.nodeSize:(this.nodeSize=pa(this._bucket,this,this.options),this.nodeSize)}async*flush(e){for await(let r of da(this._bucket,e,this,this.options))yield{...r,path:this.path}}},ha=Vi;async function*da(t,e,r,n){let i=t._children,o=(t.tableSize()-1).toString(16).length,s=[],c=0n;for(let d=0;d<i.length;d++){let m=i.get(d);if(m==null)continue;let _=d.toString(16).toUpperCase().padStart(o,"0");if(m instanceof le){let y;for await(let w of da(m,e,null,n))y=w;if(y==null)throw new Error("Could not flush sharded directory, no subshard found");s.push({Name:_,Tsize:Number(y.size),Hash:y.cid}),c+=y.size}else if(m1(m.value)){let y=m.value,w;for await(let A of y.flush(e))w=A,yield w;if(w==null)throw new Error("Did not flush dir");let x=_+m.key;s.push({Name:x,Tsize:Number(w.size),Hash:w.cid}),c+=w.size}else{let y=m.value;if(y.cid==null)continue;let w=_+m.key,x=y.size;s.push({Name:w,Tsize:Number(x),Hash:y.cid}),c+=BigInt(x??0)}}let a=Uint8Array.from(i.bitField().reverse()),l=new C({type:"hamt-sharded-directory",data:a,fanout:BigInt(t.tableSize()),hashType:la,mtime:r?.mtime,mode:r?.mode}),u={Data:l.marshal(),Links:s},h=P($(u)),p=await Ce(h,e,n),f=BigInt(h.byteLength)+c;yield{cid:p,unixfs:l,size:f}}function m1(t){return typeof t.flush=="function"}function pa(t,e,r){let n=t._children,i=(t.tableSize()-1).toString(16).length,o=[];for(let l=0;l<n.length;l++){let u=n.get(l);if(u==null)continue;let h=l.toString(16).toUpperCase().padStart(i,"0");if(u instanceof le){let p=pa(u,null,r);o.push({Name:h,Tsize:Number(p),Hash:r.cidVersion===0?pr:mr})}else if(typeof u.value.flush=="function"){let f=u.value.nodeSize();o.push({Name:h+u.key,Tsize:Number(f),Hash:r.cidVersion===0?pr:mr})}else{let p=u.value;if(p.cid==null)continue;let f=h+u.key,d=p.size;o.push({Name:f,Tsize:Number(d),Hash:p.cid})}}let s=Uint8Array.from(n.bitField().reverse()),c=new C({type:"hamt-sharded-directory",data:s,fanout:BigInt(t.tableSize()),hashType:la,mtime:e?.mtime,mode:e?.mode});return P($({Data:c.marshal(),Links:o})).length}async function Hi(t,e,r,n){let i=e;e instanceof gt&&e.estimateNodeSize()>r&&(i=await y1(e,n));let o=i.parent;if(o!=null){if(i!==e){if(t!=null&&(t.parent=i),i.parentKey==null)throw new Error("No parent key found");await o.put(i.parentKey,i)}return Hi(i,o,r,n)}return i}async function y1(t,e){let r=new ha({root:t.root,dir:!0,parent:t.parent,parentKey:t.parentKey,path:t.path,dirty:t.dirty,flat:!1,mtime:t.mtime,mode:t.mode},e);for await(let{key:n,child:i}of t.eachChildSeries())await r.put(n,i);return r}var ma=(t="")=>t.split(/(?<!\\)\//).filter(Boolean);async function g1(t,e,r){let n=ma(t.path??""),i=n.length-1,o=e,s="";for(let c=0;c<n.length;c++){let a=n[c];s+=`${s!==""?"/":""}${a}`;let l=c===i;if(o.dirty=!0,o.cid=void 0,o.size=void 0,l)await o.put(a,t),e=await Hi(null,o,r.shardSplitThresholdBytes,r);else{let u=await o.get(a);(u==null||!(u instanceof Re))&&(u=new gt({root:!1,dir:!0,parent:o,parentKey:a,path:s,dirty:!0,flat:!0,mtime:u?.unixfs?.mtime,mode:u?.unixfs?.mode},r)),await o.put(a,u),o=u}}return e}async function*ya(t,e){if(!(t instanceof Re)){t.unixfs?.isDirectory()===!0&&(yield t);return}yield*t.flush(e)}function ga(t){return async function*(r,n){let i=new gt({root:!0,dir:!0,path:"",dirty:!0,flat:!0},t),o,s=!1;for await(let c of r){if(c==null)continue;let a=`${c.originalPath??""}`.split("/")[0];a!=null&&a!==""&&(o==null?(o=a,s=!0):o!==a&&(s=!1)),i=await g1(c,i,t),(c.unixfs==null||!c.unixfs.isDirectory())&&(yield c)}if(t.wrapWithDirectory||s&&i.childCount()>1)yield*ya(i,n);else for await(let c of i.eachChildSeries())c!=null&&(yield*ya(c.child,n))}}async function*et(t,e,r={}){let n;Symbol.asyncIterator in t||Symbol.iterator in t?n=t:n=[t];let i=r.wrapWithDirectory??!1,o=r.shardSplitThresholdBytes??262144,s=r.shardFanoutBits??8,c=r.cidVersion??1,a=r.rawLeaves??!0,l=r.leafType??"file",u=r.fileImportConcurrency??50,h=r.blockWriteConcurrency??10,p=r.reduceSingleLeafToSelf??!0,f=r.chunker??nr(),d=r.chunkValidator??ra(),m=r.dagBuilder??Qs({chunker:f,chunkValidator:d,wrapWithDirectory:i,layout:r.layout??dr(),bufferImporter:r.bufferImporter??Gs({cidVersion:c,rawLeaves:a,leafType:l,onProgress:r.onProgress}),blockWriteConcurrency:h,reduceSingleLeafToSelf:p,cidVersion:c,onProgress:r.onProgress}),_=r.treeBuilder??ga({wrapWithDirectory:i,shardSplitThresholdBytes:o,shardFanoutBits:s,cidVersion:c,onProgress:r.onProgress});for await(let y of _(rr(m(n,e),u),e))yield{cid:y.cid,path:y.path,unixfs:y.unixfs,size:y.size}}async function tn(t,e,r={}){let n=await Gn(et([t],e,r));if(n==null)throw(0,$i.default)(new Error("Nothing imported"),"ERR_INVALID_PARAMS");return n}async function wa(t,e,r={}){let n=await Gn(et([t],e,r));if(n==null)throw(0,$i.default)(new Error("Nothing imported"),"ERR_INVALID_PARAMS");return n}async function ba(t,e,r={}){return tn({content:t},e,r)}async function xa(t,e,r={}){return tn({content:t},e,r)}var v1=R(ne(),1),E1=R(Fa(),1);var xr={cidVersion:1,rawLeaves:!0,layout:dr({maxChildrenPerNode:1024}),chunker:nr({chunkSize:1048576})};async function*La(t,e,r={}){yield*et(t,e,{...xr,...r})}async function Pa(t,e,r={}){let{cid:n}=await ba(t,e,{...xr,...r});return n}async function Ua(t,e,r={}){let{cid:n}=await xa(t,e,{...xr,...r});return n}async function za(t,e,r={}){let{cid:n}=await tn(t,e,{...xr,...r});return n}async function Ra(t,e,r={}){let{cid:n}=await wa({...t,path:t.path??"-"},e,{...xr,...r});return n}var kn=R(ne(),1);function S1(t){return t[Symbol.asyncIterator]!=null}function B1(t){if(S1(t))return(async()=>{let r;for await(let n of t)r=n;return r})();let e;for(let r of t)e=r;return e}var tt=B1;var k1=["string","number","bigint","symbol"],I1=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Oa(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";let e=typeof t;if(k1.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(T1(t))return"Buffer";let r=C1(t);return r||"Object"}function T1(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function C1(t){let e=Object.prototype.toString.call(t).slice(8,-1);if(I1.includes(e))return e}var g=class{constructor(e,r,n){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};g.uint=new g(0,"uint",!0);g.negint=new g(1,"negint",!0);g.bytes=new g(2,"bytes",!0);g.string=new g(3,"string",!0);g.array=new g(4,"array",!1);g.map=new g(5,"map",!1);g.tag=new g(6,"tag",!1);g.float=new g(7,"float",!0);g.false=new g(7,"false",!0);g.true=new g(7,"true",!0);g.null=new g(7,"null",!0);g.undefined=new g(7,"undefined",!0);g.break=new g(7,"break",!0);var S=class{constructor(e,r,n){this.type=e,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var Ut=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",N1=new TextDecoder,D1=new TextEncoder;function rn(t){return Ut&&globalThis.Buffer.isBuffer(t)}function $a(t){return t instanceof Uint8Array?rn(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}var ja=Ut?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):Va(t,e,r):(t,e,r)=>r-e>64?N1.decode(t.subarray(e,r)):Va(t,e,r),Ga=Ut?t=>t.length>64?globalThis.Buffer.from(t):Ma(t):t=>t.length>64?D1.encode(t):Ma(t);var zt=Ut?(t,e,r)=>rn(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),Wa=Ut?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),$a(globalThis.Buffer.concat(t,e))):(t,e)=>{let r=new Uint8Array(e),n=0;for(let i of t)n+i.length>r.length&&(i=i.subarray(0,r.length-n)),r.set(i,n),n+=i.length;return r},qa=Ut?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function Ya(t,e){if(rn(t)&&rn(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function Ma(t){let e=[],r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e}function Va(t,e,r){let n=[];for(;e<r;){let i=t[e],o=null,s=i>239?4:i>223?3:i>191?2:1;if(e+s<=r){let c,a,l,u;switch(s){case 1:i<128&&(o=i);break;case 2:c=t[e+1],(c&192)===128&&(u=(i&31)<<6|c&63,u>127&&(o=u));break;case 3:c=t[e+1],a=t[e+2],(c&192)===128&&(a&192)===128&&(u=(i&15)<<12|(c&63)<<6|a&63,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:c=t[e+1],a=t[e+2],l=t[e+3],(c&192)===128&&(a&192)===128&&(l&192)===128&&(u=(i&15)<<18|(c&63)<<12|(a&63)<<6|l&63,u>65535&&u<1114112&&(o=u))}}o===null?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),e+=s}return F1(n)}var Ha=4096;function F1(t){let e=t.length;if(e<=Ha)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Ha));return r}var L1=256,nn=class{constructor(e=L1){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let i=r.length-(this.maxCursor-this.cursor)-1;r.set(e,i)}else{if(r){let i=r.length-(this.maxCursor-this.cursor)-1;i<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=qa(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=zt(n,0,this.cursor)}else r=Wa(this.chunks,this.cursor);return e&&this.reset(),r}};var N="CBOR decode error:",Yi="CBOR encode error:",_r=[];_r[23]=1;_r[24]=2;_r[25]=3;_r[26]=5;_r[27]=9;function Ge(t,e,r){if(t.length-e<r)throw new Error(`${N} not enough data for type`)}var Z=[24,256,65536,4294967296,BigInt("18446744073709551616")];function he(t,e,r){Ge(t,e,1);let n=t[e];if(r.strict===!0&&n<Z[0])throw new Error(`${N} integer encoded in more bytes than necessary (strict decode)`);return n}function de(t,e,r){Ge(t,e,2);let n=t[e]<<8|t[e+1];if(r.strict===!0&&n<Z[1])throw new Error(`${N} integer encoded in more bytes than necessary (strict decode)`);return n}function pe(t,e,r){Ge(t,e,4);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<Z[2])throw new Error(`${N} integer encoded in more bytes than necessary (strict decode)`);return n}function me(t,e,r){Ge(t,e,8);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],i=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(r.strict===!0&&o<Z[3])throw new Error(`${N} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(r.allowBigInt===!0)return o;throw new Error(`${N} integers outside of the safe integer range are not supported`)}function Qa(t,e,r,n){return new S(g.uint,he(t,e+1,n),2)}function Ka(t,e,r,n){return new S(g.uint,de(t,e+1,n),3)}function Xa(t,e,r,n){return new S(g.uint,pe(t,e+1,n),5)}function Za(t,e,r,n){return new S(g.uint,me(t,e+1,n),9)}function Ee(t,e){return ee(t,0,e.value)}function ee(t,e,r){if(r<Z[0]){let n=Number(r);t.push([e|n])}else if(r<Z[1]){let n=Number(r);t.push([e|24,n])}else if(r<Z[2]){let n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<Z[3]){let n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<Z[4]){let i=[e|27,0,0,0,0,0,0,0],o=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=o&255,o=o>>8,i[7]=o&255,o=o>>8,i[6]=o&255,o=o>>8,i[5]=o&255,i[4]=s&255,s=s>>8,i[3]=s&255,s=s>>8,i[2]=s&255,s=s>>8,i[1]=s&255,t.push(i)}else throw new Error(`${N} encountered BigInt larger than allowable range`)}}Ee.encodedSize=function(e){return ee.encodedSize(e.value)};ee.encodedSize=function(e){return e<Z[0]?1:e<Z[1]?2:e<Z[2]?3:e<Z[3]?5:9};Ee.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};function Ja(t,e,r,n){return new S(g.negint,-1-he(t,e+1,n),2)}function ec(t,e,r,n){return new S(g.negint,-1-de(t,e+1,n),3)}function tc(t,e,r,n){return new S(g.negint,-1-pe(t,e+1,n),5)}var Qi=BigInt(-1),rc=BigInt(1);function nc(t,e,r,n){let i=me(t,e+1,n);if(typeof i!="bigint"){let o=-1-i;if(o>=Number.MIN_SAFE_INTEGER)return new S(g.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${N} integers outside of the safe integer range are not supported`);return new S(g.negint,Qi-BigInt(i),9)}function on(t,e){let r=e.value,n=typeof r=="bigint"?r*Qi-rc:r*-1-1;ee(t,e.type.majorEncoded,n)}on.encodedSize=function(e){let r=e.value,n=typeof r=="bigint"?r*Qi-rc:r*-1-1;return n<Z[0]?1:n<Z[1]?2:n<Z[2]?3:n<Z[3]?5:9};on.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};function Ar(t,e,r,n){Ge(t,e,r+n);let i=zt(t,e+r,e+r+n);return new S(g.bytes,i,r+n)}function ic(t,e,r,n){return Ar(t,e,1,r)}function oc(t,e,r,n){return Ar(t,e,2,he(t,e+1,n))}function sc(t,e,r,n){return Ar(t,e,3,de(t,e+1,n))}function ac(t,e,r,n){return Ar(t,e,5,pe(t,e+1,n))}function cc(t,e,r,n){let i=me(t,e+1,n);if(typeof i=="bigint")throw new Error(`${N} 64-bit integer bytes lengths not supported`);return Ar(t,e,9,i)}function sn(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===g.string?Ga(t.value):t.value),t.encodedBytes}function Rt(t,e){let r=sn(e);ee(t,e.type.majorEncoded,r.length),t.push(r)}Rt.encodedSize=function(e){let r=sn(e);return ee.encodedSize(r.length)+r.length};Rt.compareTokens=function(e,r){return U1(sn(e),sn(r))};function U1(t,e){return t.length<e.length?-1:t.length>e.length?1:Ya(t,e)}function vr(t,e,r,n,i){let o=r+n;Ge(t,e,o);let s=new S(g.string,ja(t,e+r,e+o),o);return i.retainStringBytes===!0&&(s.byteValue=zt(t,e+r,e+o)),s}function uc(t,e,r,n){return vr(t,e,1,r,n)}function fc(t,e,r,n){return vr(t,e,2,he(t,e+1,n),n)}function lc(t,e,r,n){return vr(t,e,3,de(t,e+1,n),n)}function hc(t,e,r,n){return vr(t,e,5,pe(t,e+1,n),n)}function dc(t,e,r,n){let i=me(t,e+1,n);if(typeof i=="bigint")throw new Error(`${N} 64-bit integer string lengths not supported`);return vr(t,e,9,i,n)}var pc=Rt;function Ot(t,e,r,n){return new S(g.array,n,r)}function mc(t,e,r,n){return Ot(t,e,1,r)}function yc(t,e,r,n){return Ot(t,e,2,he(t,e+1,n))}function gc(t,e,r,n){return Ot(t,e,3,de(t,e+1,n))}function wc(t,e,r,n){return Ot(t,e,5,pe(t,e+1,n))}function bc(t,e,r,n){let i=me(t,e+1,n);if(typeof i=="bigint")throw new Error(`${N} 64-bit integer array lengths not supported`);return Ot(t,e,9,i)}function xc(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${N} indefinite length items not allowed`);return Ot(t,e,1,1/0)}function an(t,e){ee(t,g.array.majorEncoded,e.value)}an.compareTokens=Ee.compareTokens;an.encodedSize=function(e){return ee.encodedSize(e.value)};function Mt(t,e,r,n){return new S(g.map,n,r)}function _c(t,e,r,n){return Mt(t,e,1,r)}function Ac(t,e,r,n){return Mt(t,e,2,he(t,e+1,n))}function vc(t,e,r,n){return Mt(t,e,3,de(t,e+1,n))}function Ec(t,e,r,n){return Mt(t,e,5,pe(t,e+1,n))}function Sc(t,e,r,n){let i=me(t,e+1,n);if(typeof i=="bigint")throw new Error(`${N} 64-bit integer map lengths not supported`);return Mt(t,e,9,i)}function Bc(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${N} indefinite length items not allowed`);return Mt(t,e,1,1/0)}function cn(t,e){ee(t,g.map.majorEncoded,e.value)}cn.compareTokens=Ee.compareTokens;cn.encodedSize=function(e){return ee.encodedSize(e.value)};function kc(t,e,r,n){return new S(g.tag,r,1)}function Ic(t,e,r,n){return new S(g.tag,he(t,e+1,n),2)}function Tc(t,e,r,n){return new S(g.tag,de(t,e+1,n),3)}function Cc(t,e,r,n){return new S(g.tag,pe(t,e+1,n),5)}function Nc(t,e,r,n){return new S(g.tag,me(t,e+1,n),9)}function un(t,e){ee(t,g.tag.majorEncoded,e.value)}un.compareTokens=Ee.compareTokens;un.encodedSize=function(e){return ee.encodedSize(e.value)};var H1=20,$1=21,j1=22,G1=23;function Dc(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${N} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new S(g.null,null,1):new S(g.undefined,void 0,1)}function Fc(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${N} indefinite length items not allowed`);return new S(g.break,void 0,1)}function Ki(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${N} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${N} Infinity values are not supported`)}return new S(g.float,t,e)}function Lc(t,e,r,n){return Ki(Xi(t,e+1),3,n)}function Pc(t,e,r,n){return Ki(Zi(t,e+1),5,n)}function Uc(t,e,r,n){return Ki(Mc(t,e+1),9,n)}function fn(t,e,r){let n=e.value;if(n===!1)t.push([g.float.majorEncoded|H1]);else if(n===!0)t.push([g.float.majorEncoded|$1]);else if(n===null)t.push([g.float.majorEncoded|j1]);else if(n===void 0)t.push([g.float.majorEncoded|G1]);else{let i,o=!1;(!r||r.float64!==!0)&&(Rc(n),i=Xi(Ne,1),n===i||Number.isNaN(n)?(Ne[0]=249,t.push(Ne.slice(0,3)),o=!0):(Oc(n),i=Zi(Ne,1),n===i&&(Ne[0]=250,t.push(Ne.slice(0,5)),o=!0))),o||(W1(n),i=Mc(Ne,1),Ne[0]=251,t.push(Ne.slice(0,9)))}}fn.encodedSize=function(e,r){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){Rc(n);let i=Xi(Ne,1);if(n===i||Number.isNaN(n))return 3;if(Oc(n),i=Zi(Ne,1),n===i)return 5}return 9};var zc=new ArrayBuffer(9),Se=new DataView(zc,1),Ne=new Uint8Array(zc,0);function Rc(t){if(t===1/0)Se.setUint16(0,31744,!1);else if(t===-1/0)Se.setUint16(0,64512,!1);else if(Number.isNaN(t))Se.setUint16(0,32256,!1);else{Se.setFloat32(0,t);let e=Se.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)Se.setUint16(0,31744,!1);else if(r===0)Se.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{let i=r-127;i<-24?Se.setUint16(0,0):i<-14?Se.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):Se.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function Xi(t,e){if(t.length-e<2)throw new Error(`${N} not enough data for float16`);let r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,i=r&1023,o;return n===0?o=i*2**-24:n!==31?o=(i+1024)*2**(n-25):o=i===0?1/0:NaN,r&32768?-o:o}function Oc(t){Se.setFloat32(0,t,!1)}function Zi(t,e){if(t.length-e<4)throw new Error(`${N} not enough data for float32`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function W1(t){Se.setFloat64(0,t,!1)}function Mc(t,e){if(t.length-e<8)throw new Error(`${N} not enough data for float64`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}fn.compareTokens=Ee.compareTokens;function z(t,e,r){throw new Error(`${N} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function ln(t){return()=>{throw new Error(`${N} ${t}`)}}var E=[];for(let t=0;t<=23;t++)E[t]=z;E[24]=Qa;E[25]=Ka;E[26]=Xa;E[27]=Za;E[28]=z;E[29]=z;E[30]=z;E[31]=z;for(let t=32;t<=55;t++)E[t]=z;E[56]=Ja;E[57]=ec;E[58]=tc;E[59]=nc;E[60]=z;E[61]=z;E[62]=z;E[63]=z;for(let t=64;t<=87;t++)E[t]=ic;E[88]=oc;E[89]=sc;E[90]=ac;E[91]=cc;E[92]=z;E[93]=z;E[94]=z;E[95]=ln("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)E[t]=uc;E[120]=fc;E[121]=lc;E[122]=hc;E[123]=dc;E[124]=z;E[125]=z;E[126]=z;E[127]=ln("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)E[t]=mc;E[152]=yc;E[153]=gc;E[154]=wc;E[155]=bc;E[156]=z;E[157]=z;E[158]=z;E[159]=xc;for(let t=160;t<=183;t++)E[t]=_c;E[184]=Ac;E[185]=vc;E[186]=Ec;E[187]=Sc;E[188]=z;E[189]=z;E[190]=z;E[191]=Bc;for(let t=192;t<=215;t++)E[t]=kc;E[216]=Ic;E[217]=Tc;E[218]=Cc;E[219]=Nc;E[220]=z;E[221]=z;E[222]=z;E[223]=z;for(let t=224;t<=243;t++)E[t]=ln("simple values are not supported");E[244]=z;E[245]=z;E[246]=z;E[247]=Dc;E[248]=ln("simple values are not supported");E[249]=Lc;E[250]=Pc;E[251]=Uc;E[252]=z;E[253]=z;E[254]=z;E[255]=Fc;var De=[];for(let t=0;t<24;t++)De[t]=new S(g.uint,t,1);for(let t=-1;t>=-24;t--)De[31-t]=new S(g.negint,t,1);De[64]=new S(g.bytes,new Uint8Array(0),1);De[96]=new S(g.string,"",1);De[128]=new S(g.array,0,1);De[160]=new S(g.map,0,1);De[244]=new S(g.false,!1,1);De[245]=new S(g.true,!0,1);De[246]=new S(g.null,null,1);function Y1(){let t=[];return t[g.uint.major]=Ee,t[g.negint.major]=on,t[g.bytes.major]=Rt,t[g.string.major]=pc,t[g.array.major]=an,t[g.map.major]=cn,t[g.tag.major]=un,t[g.float.major]=fn,t}var hy=Y1(),dy=new nn,hn=class t{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${Yi} object contains circular references`);return new t(r,e)}},rt={null:new S(g.null,null),undefined:new S(g.undefined,void 0),true:new S(g.true,!0),false:new S(g.false,!1),emptyArray:new S(g.array,0),emptyMap:new S(g.map,0)},nt={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new S(g.float,t):t>=0?new S(g.uint,t):new S(g.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new S(g.uint,t):new S(g.negint,t)},Uint8Array(t,e,r,n){return new S(g.bytes,t)},string(t,e,r,n){return new S(g.string,t)},boolean(t,e,r,n){return t?rt.true:rt.false},null(t,e,r,n){return rt.null},undefined(t,e,r,n){return rt.undefined},ArrayBuffer(t,e,r,n){return new S(g.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new S(g.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[rt.emptyArray,new S(g.break)]:rt.emptyArray;n=hn.createCheck(n,t);let i=[],o=0;for(let s of t)i[o++]=Ji(s,r,n);return r.addBreakTokens?[new S(g.array,t.length),i,new S(g.break)]:[new S(g.array,t.length),i]},Object(t,e,r,n){let i=e!=="Object",o=i?t.keys():Object.keys(t),s=i?t.size:o.length;if(!s)return r.addBreakTokens===!0?[rt.emptyMap,new S(g.break)]:rt.emptyMap;n=hn.createCheck(n,t);let c=[],a=0;for(let l of o)c[a++]=[Ji(l,r,n),Ji(i?t.get(l):t[l],r,n)];return Q1(c,r),r.addBreakTokens?[new S(g.map,s),c,new S(g.break)]:[new S(g.map,s),c]}};nt.Map=nt.Object;nt.Buffer=nt.Uint8Array;for(let t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))nt[`${t}Array`]=nt.DataView;function Ji(t,e={},r){let n=Oa(t),i=e&&e.typeEncoders&&e.typeEncoders[n]||nt[n];if(typeof i=="function"){let s=i(t,n,e,r);if(s!=null)return s}let o=nt[n];if(!o)throw new Error(`${Yi} unsupported type: ${n}`);return o(t,n,e,r)}function Q1(t,e){e.mapSorter&&t.sort(e.mapSorter)}var K1={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},eo=class{constructor(e,r={}){this._pos=0,this.data=e,this.options=r}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){let e=this.data[this._pos],r=De[e];if(r===void 0){let n=E[e];if(!n)throw new Error(`${N} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let i=e&31;r=n(this.data,this._pos,i,this.options)}return this._pos+=r.encodedLength,r}},Er=Symbol.for("DONE"),dn=Symbol.for("BREAK");function X1(t,e,r){let n=[];for(let i=0;i<t.value;i++){let o=Sr(e,r);if(o===dn){if(t.value===1/0)break;throw new Error(`${N} got unexpected break to lengthed array`)}if(o===Er)throw new Error(`${N} found array but not enough entries (got ${i}, expected ${t.value})`);n[i]=o}return n}function Z1(t,e,r){let n=r.useMaps===!0,i=n?void 0:{},o=n?new Map:void 0;for(let s=0;s<t.value;s++){let c=Sr(e,r);if(c===dn){if(t.value===1/0)break;throw new Error(`${N} got unexpected break to lengthed map`)}if(c===Er)throw new Error(`${N} found map but not enough entries (got ${s} [no key], expected ${t.value})`);if(n!==!0&&typeof c!="string")throw new Error(`${N} non-string keys not supported (got ${typeof c})`);if(r.rejectDuplicateMapKeys===!0&&(n&&o.has(c)||!n&&c in i))throw new Error(`${N} found repeat map key "${c}"`);let a=Sr(e,r);if(a===Er)throw new Error(`${N} found map but not enough entries (got ${s} [no value], expected ${t.value})`);n?o.set(c,a):i[c]=a}return n?o:i}function Sr(t,e){if(t.done())return Er;let r=t.next();if(r.type===g.break)return dn;if(r.type.terminal)return r.value;if(r.type===g.array)return X1(r,t,e);if(r.type===g.map)return Z1(r,t,e);if(r.type===g.tag){if(e.tags&&typeof e.tags[r.value]=="function"){let n=Sr(t,e);return e.tags[r.value](n)}throw new Error(`${N} tag not supported (${r.value})`)}throw new Error("unsupported")}function Vc(t,e){if(!(t instanceof Uint8Array))throw new Error(`${N} data to decode must be a Uint8Array`);e=Object.assign({},K1,e);let r=e.tokenizer||new eo(t,e),n=Sr(r,e);if(n===Er)throw new Error(`${N} did not find any content to decode`);if(n===dn)throw new Error(`${N} got unexpected break`);return[n,t.subarray(r.pos())]}function to(t,e){let[r,n]=Vc(t,e);if(n.length>0)throw new Error(`${N} too many terminals, data makes no sense`);return r}var th=42;function rh(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return L.decode(t.subarray(1))}var Hc={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Hc.tags[th]=rh;var $c=113;var jc=t=>to(t,Hc);var Au=R(ne(),1);var Wc=R(ne(),1);var nh=async(t,e,r,n,i,o,s,c)=>{let a=await s.get(t,c),l=jc(a),u=l,h=r;for(;n.length>0;){let p=n[0];if(p in u){n.shift(),h=`${h}/${p}`;let f=L.asCID(u[p]);if(f!=null)return{entry:{type:"object",name:e,path:r,cid:t,node:a,depth:o,size:BigInt(a.length),content:async function*(){yield l}},next:{cid:f,name:p,path:h,toResolve:n}};u=u[p]}else throw(0,Wc.default)(new Error(`No property named ${p} found in cbor node ${t}`),"ERR_NO_PROP")}return{entry:{type:"object",name:e,path:r,cid:t,node:a,depth:o,size:BigInt(a.length),content:async function*(){yield l}}}},qc=nh;var Yc=R(ne(),1);function ih(t,e,r,n){let i=BigInt(t.length),o=BigInt(e+i);return r>=o||n<e?new Uint8Array(0):(n>=e&&n<o&&(t=t.subarray(0,Number(n-e))),r>=e&&r<o&&(t=t.subarray(Number(r-e))),t)}var xt=ih;var Br=R(ne(),1),oh=(t,e=0,r=t)=>{let n=BigInt(t),i=BigInt(e??0),o=BigInt(r);if(o!==n&&(o=i+o),o>n&&(o=n),i<0n)throw(0,Br.default)(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(i>n)throw(0,Br.default)(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(o<0n)throw(0,Br.default)(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(o>n)throw(0,Br.default)(new Error("Length must be less than the file size"),"ERR_INVALID_PARAMS");return{start:i,end:o}},Vt=oh;var sh=t=>{async function*e(r={}){let{start:n,end:i}=Vt(t.length,r.offset,r.length),o=xt(t,0n,n,i);r.onProgress?.(new j("unixfs:exporter:progress:identity",{bytesRead:BigInt(o.byteLength),totalBytes:i-n,fileSize:BigInt(t.byteLength)})),yield o}return e},ah=async(t,e,r,n,i,o,s,c)=>{if(n.length>0)throw(0,Yc.default)(new Error(`No link named ${r} found in raw node ${t}`),"ERR_NOT_FOUND");let a=Hr(t.multihash.bytes);return{entry:{type:"identity",name:e,path:r,cid:t,content:sh(a.digest),depth:o,size:BigInt(a.digest.length),node:a.digest}}},Qc=ah;var Kc=R(ne(),1);var ch=t=>{async function*e(r={}){let{start:n,end:i}=Vt(t.length,r.offset,r.length),o=xt(t,0n,n,i);r.onProgress?.(new j("unixfs:exporter:progress:raw",{bytesRead:BigInt(o.byteLength),totalBytes:i-n,fileSize:BigInt(t.byteLength)})),yield o}return e},uh=async(t,e,r,n,i,o,s,c)=>{if(n.length>0)throw(0,Kc.default)(new Error(`No link named ${r} found in raw node ${t}`),"ERR_NOT_FOUND");let a=await s.get(t,c);return{entry:{type:"raw",name:e,path:r,cid:t,content:ch(a),depth:o,size:BigInt(a.length),node:a}}},Xc=uh;var Pr=R(ne(),1);var kr=R(ne(),1);var fh=async function(t){return(await wt.encode(t)).slice(0,8).reverse()},lh=async(t,e,r)=>{let n=(e.tableSize()-1).toString(16).length;await Promise.all(t.map(async i=>{if(i.Name==null)throw new Error("Unexpected Link without a Name");if(i.Name.length===n){let o=parseInt(i.Name,16);e._putObjectAt(o,new le({hash:r._options.hash,bits:r._options.bits},e,o));return}await r.put(i.Name.substring(2),!0)}))},Zc=(t,e)=>t.toString(16).toUpperCase().padStart(e,"0").substring(0,e),hh=t=>{let e=t.bucket,r=[];for(;e._parent!=null;)r.push(e),e=e._parent;return r.push(e),r.reverse()},Jc=async(t,e,r,n,i)=>{if(n==null){if(t.Data==null)throw(0,kr.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let h;try{h=C.unmarshal(t.Data)}catch(f){throw(0,kr.default)(f,"ERR_NOT_UNIXFS")}if(h.type!=="hamt-sharded-directory")throw(0,kr.default)(new Error("not a HAMT"),"ERR_NOT_UNIXFS");if(h.fanout==null)throw(0,kr.default)(new Error("missing fanout"),"ERR_NOT_UNIXFS");let p=Pt({hashFn:fh,bits:Math.log2(Number(h.fanout))});n={rootBucket:p,hamtDepth:1,lastBucket:p}}let o=(n.lastBucket.tableSize()-1).toString(16).length;await lh(t.Links,n.lastBucket,n.rootBucket);let s=await n.rootBucket._findNewBucketAndPos(e),c=Zc(s.pos,o),a=hh(s);a.length>n.hamtDepth&&(n.lastBucket=a[n.hamtDepth],c=Zc(n.lastBucket._posAtParent,o));let l=t.Links.find(h=>{if(h.Name==null)return!1;let p=h.Name.substring(0,o),f=h.Name.substring(o);return!(p!==c||f!==""&&f!==e)});if(l==null)return;if(l.Name!=null&&l.Name.substring(o)===e)return l.Hash;n.hamtDepth++;let u=await r.get(l.Hash,i);return t=G(u),Jc(t,e,r,n,i)},eu=Jc;function dh(t){let[e,r]=t[Symbol.asyncIterator]!=null?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>e.next(),push:i=>{n.push(i)},next:()=>n.length>0?{done:!1,value:n.shift()}:e.next(),[r](){return this}}}var pn=dh;function ph(t){return t[Symbol.asyncIterator]!=null}function mh(t,e){if(ph(t))return async function*(){for await(let c of t)await e(c)&&(yield c)}();let r=pn(t),{value:n,done:i}=r.next();if(i===!0)return function*(){}();let o=e(n);if(typeof o.then=="function")return async function*(){await o&&(yield n);for await(let c of r)await e(c)&&(yield c)}();let s=e;return function*(){o===!0&&(yield n);for(let c of r)s(c)&&(yield c)}()}var tu=mh;function yh(t){return t[Symbol.asyncIterator]!=null}function gh(t,e){if(yh(t))return async function*(){for await(let c of t)yield e(c)}();let r=pn(t),{value:n,done:i}=r.next();if(i===!0)return function*(){}();let o=e(n);if(typeof o.then=="function")return async function*(){yield await o;for await(let c of r)yield e(c)}();let s=e;return function*(){yield o;for(let c of r)yield s(c)}()}var Ht=gh;function We(){let t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}var mn=globalThis.CustomEvent??Event;async function*_t(t,e={}){let r=e.concurrency??1/0;r<1&&(r=1/0);let n=e.ordered==null?!1:e.ordered,i=new EventTarget,o=[],s=We(),c=We(),a=!1,l,u=!1;i.addEventListener("task-complete",()=>{c.resolve()}),Promise.resolve().then(async()=>{try{for await(let d of t){if(o.length===r&&(s=We(),await s.promise),u)break;let m={done:!1};o.push(m),d().then(_=>{m.done=!0,m.ok=!0,m.value=_,i.dispatchEvent(new mn("task-complete"))},_=>{m.done=!0,m.err=_,i.dispatchEvent(new mn("task-complete"))})}a=!0,i.dispatchEvent(new mn("task-complete"))}catch(d){l=d,i.dispatchEvent(new mn("task-complete"))}});function h(){return n?o[0]?.done:!!o.find(d=>d.done)}function*p(){for(;o.length>0&&o[0].done;){let d=o[0];if(o.shift(),d.ok)yield d.value;else throw u=!0,s.resolve(),d.err;s.resolve()}}function*f(){for(;h();)for(let d=0;d<o.length;d++)if(o[d].done){let m=o[d];if(o.splice(d,1),d--,m.ok)yield m.value;else throw u=!0,s.resolve(),m.err;s.resolve()}}for(;;){if(h()||(c=We(),await c.promise),l!=null)throw l;if(n?yield*p():yield*f(),a&&o.length===0)break}}var yn=class{buffer;mask;top;btm;next;constructor(e){if(!(e>0)||e-1&e)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},$t=class{size;hwm;head;tail;constructor(e={}){this.hwm=e.splitLimit??16,this.head=new yn(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let r=this.head;this.head=r.next=new yn(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let r=this.tail.next;this.tail.next=null,this.tail=r,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};var ro=class extends Error{type;code;constructor(e,r){super(e??"The operation was aborted"),this.type="aborted",this.code=r??"ABORT_ERR"}};function jt(t={}){return wh(r=>{let n=r.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},t)}function wh(t,e){e=e??{};let r=e.onEnd,n=new $t,i,o,s,c=We(),a=async()=>{try{return n.isEmpty()?s?{done:!0}:await new Promise((_,y)=>{o=w=>{o=null,n.push(w);try{_(t(n))}catch(x){y(x)}return i}}):t(n)}finally{n.isEmpty()&&queueMicrotask(()=>{c.resolve(),c=We()})}},l=_=>o!=null?o(_):(n.push(_),i),u=_=>(n=new $t,o!=null?o({error:_}):(n.push({error:_}),i)),h=_=>{if(s)return i;if(e?.objectMode!==!0&&_?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return l({done:!1,value:_})},p=_=>s?i:(s=!0,_!=null?u(_):l({done:!0})),f=()=>(n=new $t,p(),{done:!0}),d=_=>(p(_),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:a,return:f,throw:d,push:h,end:p,get readableLength(){return n.size},onEmpty:async _=>{let y=_?.signal;if(y?.throwIfAborted(),n.isEmpty())return;let w,x;y!=null&&(w=new Promise((A,T)=>{x=()=>{T(new ro)},y.addEventListener("abort",x)}));try{await Promise.race([c.promise,w])}finally{x!=null&&y!=null&&y?.removeEventListener("abort",x)}}},r==null)return i;let m=i;return i={[Symbol.asyncIterator](){return this},next(){return m.next()},throw(_){return m.throw(_),r!=null&&(r(_),r=void 0),{done:!0}},return(){return m.return(),r!=null&&(r(),r=void 0),{done:!0}},push:h,end(_){return m.end(_),r!=null&&(r(_),r=void 0),i},get readableLength(){return m.readableLength}},i}function bh(t){return t[Symbol.asyncIterator]!=null}function xh(...t){let e=[];for(let r of t)bh(r)||e.push(r);return e.length===t.length?function*(){for(let r of e)yield*r}():async function*(){let r=jt({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(t.map(async n=>{for await(let i of n)r.push(i)})),r.end()}catch(n){r.end(n)}}),yield*r}()}var ru=xh;function Oe(t,...e){if(t==null)throw new Error("Empty pipeline");if(no(t)){let n=t;t=()=>n.source}else if(iu(t)||nu(t)){let n=t;t=()=>n}let r=[t,...e];if(r.length>1&&no(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let n=1;n<r.length-1;n++)no(r[n])&&(r[n]=Ah(r[n]));return _h(...r)}var _h=(...t)=>{let e;for(;t.length>0;)e=t.shift()(e);return e},nu=t=>t?.[Symbol.asyncIterator]!=null,iu=t=>t?.[Symbol.iterator]!=null,no=t=>t==null?!1:t.sink!=null&&t.source!=null,Ah=t=>e=>{let r=t.sink(e);if(r?.then!=null){let n=jt({objectMode:!0});r.then(()=>{n.end()},s=>{n.end(s)});let i,o=t.source;if(nu(o))i=async function*(){yield*o,n.end()};else if(iu(o))i=function*(){yield*o,n.end()};else throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");return ru(n,i())}return t.source};var vh=(t,e,r,n,i,o,s)=>{async function*c(a={}){let l=a.offset??0,u=a.length??e.Links.length,h=e.Links.slice(l,u);a.onProgress?.(new j("unixfs:exporter:walk:directory",{cid:t})),yield*Oe(h,p=>Ht(p,f=>async()=>{let d=f.Name??"",m=`${n}/${d}`;return(await i(f.Hash,d,m,[],o+1,s,a)).entry}),p=>_t(p,{ordered:!0}),p=>tu(p,f=>f!=null))}return c},ou=vh;var vt=R(ne(),1);var oo=R(au(),1);var Tr=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},so=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},cu=t=>globalThis.DOMException===void 0?new so(t):new DOMException(t),uu=t=>{let e=t.reason===void 0?cu("This operation was aborted."):t.reason;return e instanceof Error?e:cu(e)};function ao(t,e,r,n){let i,o=new Promise((s,c)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){s(t);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){let{signal:a}=n;a.aborted&&c(uu(a)),a.addEventListener("abort",()=>{c(uu(a))})}i=n.customTimers.setTimeout.call(void 0,()=>{if(typeof r=="function"){try{s(r())}catch(u){c(u)}return}let a=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,l=r instanceof Error?r:new Tr(a);typeof t.cancel=="function"&&t.cancel(),c(l)},e),(async()=>{try{s(await t)}catch(a){c(a)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()});return o.clear=()=>{clearTimeout(i),i=void 0},o}function co(t,e,r){let n=0,i=t.length;for(;i>0;){let o=Math.trunc(i/2),s=n+o;r(t[s],e)<=0?(n=++s,i-=o+1):i=o}return n}var At=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},qe,uo=class{constructor(){qe.set(this,[])}enqueue(e,r){r={priority:0,...r};let n={priority:r.priority,run:e};if(this.size&&At(this,qe,"f")[this.size-1].priority>=r.priority){At(this,qe,"f").push(n);return}let i=co(At(this,qe,"f"),n,(o,s)=>s.priority-o.priority);At(this,qe,"f").splice(i,0,n)}dequeue(){let e=At(this,qe,"f").shift();return e?.run}filter(e){return At(this,qe,"f").filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return At(this,qe,"f").length}};qe=new WeakMap;var fu=uo;var V=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},k=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},q,Nr,Dr,ot,vn,Fr,wn,Fe,Cr,ye,bn,ge,Lr,it,xn,lu,hu,mu,du,pu,_n,fo,lo,En,yu,An,Sn=class extends Error{},ho=class extends oo.default{constructor(e){var r,n,i,o;if(super(),q.add(this),Nr.set(this,void 0),Dr.set(this,void 0),ot.set(this,0),vn.set(this,void 0),Fr.set(this,void 0),wn.set(this,0),Fe.set(this,void 0),Cr.set(this,void 0),ye.set(this,void 0),bn.set(this,void 0),ge.set(this,0),Lr.set(this,void 0),it.set(this,void 0),xn.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:fu,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(o=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""}\` (${typeof e.interval})`);V(this,Nr,e.carryoverConcurrencyCount,"f"),V(this,Dr,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),V(this,vn,e.intervalCap,"f"),V(this,Fr,e.interval,"f"),V(this,ye,new e.queueClass,"f"),V(this,bn,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,V(this,xn,e.throwOnTimeout===!0,"f"),V(this,it,e.autoStart===!1,"f")}get concurrency(){return k(this,Lr,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);V(this,Lr,e,"f"),k(this,q,"m",En).call(this)}async add(e,r={}){return r={timeout:this.timeout,throwOnTimeout:k(this,xn,"f"),...r},new Promise((n,i)=>{k(this,ye,"f").enqueue(async()=>{var o,s,c;V(this,ge,(s=k(this,ge,"f"),s++,s),"f"),V(this,ot,(c=k(this,ot,"f"),c++,c),"f");try{if(!((o=r.signal)===null||o===void 0)&&o.aborted)throw new Sn("The task was aborted.");let a=e({signal:r.signal});r.timeout&&(a=ao(Promise.resolve(a),r.timeout)),r.signal&&(a=Promise.race([a,k(this,q,"m",yu).call(this,r.signal)]));let l=await a;n(l),this.emit("completed",l)}catch(a){if(a instanceof Tr&&!r.throwOnTimeout){n();return}i(a),this.emit("error",a)}finally{k(this,q,"m",mu).call(this)}},r),this.emit("add"),k(this,q,"m",_n).call(this)})}async addAll(e,r){return Promise.all(e.map(async n=>this.add(n,r)))}start(){return k(this,it,"f")?(V(this,it,!1,"f"),k(this,q,"m",En).call(this),this):this}pause(){V(this,it,!0,"f")}clear(){V(this,ye,new(k(this,bn,"f")),"f")}async onEmpty(){k(this,ye,"f").size!==0&&await k(this,q,"m",An).call(this,"empty")}async onSizeLessThan(e){k(this,ye,"f").size<e||await k(this,q,"m",An).call(this,"next",()=>k(this,ye,"f").size<e)}async onIdle(){k(this,ge,"f")===0&&k(this,ye,"f").size===0||await k(this,q,"m",An).call(this,"idle")}get size(){return k(this,ye,"f").size}sizeBy(e){return k(this,ye,"f").filter(e).length}get pending(){return k(this,ge,"f")}get isPaused(){return k(this,it,"f")}};Nr=new WeakMap,Dr=new WeakMap,ot=new WeakMap,vn=new WeakMap,Fr=new WeakMap,wn=new WeakMap,Fe=new WeakMap,Cr=new WeakMap,ye=new WeakMap,bn=new WeakMap,ge=new WeakMap,Lr=new WeakMap,it=new WeakMap,xn=new WeakMap,q=new WeakSet,lu=function(){return k(this,Dr,"f")||k(this,ot,"f")<k(this,vn,"f")},hu=function(){return k(this,ge,"f")<k(this,Lr,"f")},mu=function(){var e;V(this,ge,(e=k(this,ge,"f"),e--,e),"f"),k(this,q,"m",_n).call(this),this.emit("next")},du=function(){k(this,q,"m",lo).call(this),k(this,q,"m",fo).call(this),V(this,Cr,void 0,"f")},pu=function(){let e=Date.now();if(k(this,Fe,"f")===void 0){let r=k(this,wn,"f")-e;if(r<0)V(this,ot,k(this,Nr,"f")?k(this,ge,"f"):0,"f");else return k(this,Cr,"f")===void 0&&V(this,Cr,setTimeout(()=>{k(this,q,"m",du).call(this)},r),"f"),!0}return!1},_n=function(){if(k(this,ye,"f").size===0)return k(this,Fe,"f")&&clearInterval(k(this,Fe,"f")),V(this,Fe,void 0,"f"),this.emit("empty"),k(this,ge,"f")===0&&this.emit("idle"),!1;if(!k(this,it,"f")){let e=!k(this,q,"a",pu);if(k(this,q,"a",lu)&&k(this,q,"a",hu)){let r=k(this,ye,"f").dequeue();return r?(this.emit("active"),r(),e&&k(this,q,"m",fo).call(this),!0):!1}}return!1},fo=function(){k(this,Dr,"f")||k(this,Fe,"f")!==void 0||(V(this,Fe,setInterval(()=>{k(this,q,"m",lo).call(this)},k(this,Fr,"f")),"f"),V(this,wn,Date.now()+k(this,Fr,"f"),"f"))},lo=function(){k(this,ot,"f")===0&&k(this,ge,"f")===0&&k(this,Fe,"f")&&(clearInterval(k(this,Fe,"f")),V(this,Fe,void 0,"f")),V(this,ot,k(this,Nr,"f")?k(this,ge,"f"):0,"f"),k(this,q,"m",En).call(this)},En=function(){for(;k(this,q,"m",_n).call(this););},yu=async function(e){return new Promise((r,n)=>{e.addEventListener("abort",()=>{n(new Sn("The task was aborted."))},{once:!0})})},An=async function(e,r){return new Promise(n=>{let i=()=>{r&&!r()||(this.off(e,i),n())};this.on(e,i)})};var gu=ho;async function wu(t,e,r,n,i,o,s){if(e instanceof Uint8Array){let l=xt(e,n,i,o);r.push(l);return}if(e.Data==null)throw(0,vt.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let c;try{c=C.unmarshal(e.Data)}catch(l){throw(0,vt.default)(l,"ERR_NOT_UNIXFS")}if(c.data!=null){let l=c.data,u=xt(l,n,i,o);r.push(u),n+=BigInt(u.byteLength)}let a=[];if(e.Links.length!==c.blockSizes.length)throw(0,vt.default)(new Error("Inconsistent block sizes and dag links"),"ERR_NOT_UNIXFS");for(let l=0;l<e.Links.length;l++){let u=e.Links[l],h=n,p=h+c.blockSizes[l];if((i>=h&&i<p||o>=h&&o<=p||i<h&&o>p)&&a.push({link:u,blockStart:n}),n=p,n>o)break}await Oe(a,l=>Ht(l,u=>async()=>{let h=await t.get(u.link.Hash,s);return{...u,block:h}}),l=>_t(l,{ordered:!0}),async l=>{for await(let{link:u,block:h,blockStart:p}of l){let f;switch(u.Hash.code){case J:f=G(h);break;case ue:f=h;break;default:r.end((0,vt.default)(new Error(`Unsupported codec: ${u.Hash.code}`),"ERR_NOT_UNIXFS"));return}let d=new gu({concurrency:1});d.on("error",m=>{r.end(m)}),d.add(async()=>{s.onProgress?.(new j("unixfs:exporter:walk:file",{cid:u.Hash})),await wu(t,f,r,p,i,o,s)}),await d.onIdle()}}),n>=o&&r.end()}var Bh=(t,e,r,n,i,o,s)=>{async function*c(a={}){let l=r.fileSize();if(l===void 0)throw new Error("File was a directory");let{start:u,end:h}=Vt(l,a.offset,a.length);if(h===0n)return;let p=0n,f=h-u,d=jt();a.onProgress?.(new j("unixfs:exporter:walk:file",{cid:t})),wu(s,e,d,0n,u,h,a).catch(m=>{d.end(m)});for await(let m of d)if(m!=null){if(p+=BigInt(m.byteLength),p>f)throw d.end(),(0,vt.default)(new Error("Read too many bytes - the file size reported by the UnixFS data in the root node may be incorrect"),"ERR_OVER_READ");p===f&&d.end(),a.onProgress?.(new j("unixfs:exporter:progress:unixfs:file",{bytesRead:p,totalBytes:f,fileSize:l})),yield m}if(p<f)throw(0,vt.default)(new Error("Traversed entire DAG but did not read enough bytes"),"ERR_UNDER_READ")}return c},po=Bh;var Bn=R(ne(),1);var kh=(t,e,r,n,i,o,s)=>{function c(a={}){return a.onProgress?.(new j("unixfs:exporter:walk:hamt-sharded-directory",{cid:t})),bu(e,n,i,o,s,a)}return c};async function*bu(t,e,r,n,i,o){let s=t.Links;if(t.Data==null)throw(0,Bn.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let c;try{c=C.unmarshal(t.Data)}catch(u){throw(0,Bn.default)(u,"ERR_NOT_UNIXFS")}if(c.fanout==null)throw(0,Bn.default)(new Error("missing fanout"),"ERR_NOT_UNIXFS");let a=(c.fanout-1n).toString(16).length,l=Oe(s,u=>Ht(u,h=>async()=>{let p=h.Name!=null?h.Name.substring(a):null;if(p!=null&&p!==""){let f=await r(h.Hash,p,`${e}/${p}`,[],n+1,i,o);return{entries:f.entry==null?[]:[f.entry]}}else{let f=await i.get(h.Hash,o);return t=G(f),o.onProgress?.(new j("unixfs:exporter:walk:hamt-sharded-directory",{cid:h.Hash})),{entries:bu(t,e,r,n,i,o)}}}),u=>_t(u,{ordered:!0}));for await(let{entries:u}of l)yield*u}var xu=kh;var Ih=(t,e)=>t.Links.find(n=>n.Name===e)?.Hash,Th={raw:po,file:po,directory:ou,"hamt-sharded-directory":xu,metadata:(t,e,r,n,i,o,s)=>()=>[],symlink:(t,e,r,n,i,o,s)=>()=>[]},Ch=async(t,e,r,n,i,o,s,c)=>{let a=await s.get(t,c),l=G(a),u,h;if(e==null&&(e=t.toString()),l.Data==null)throw(0,Pr.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{u=C.unmarshal(l.Data)}catch(f){throw(0,Pr.default)(f,"ERR_NOT_UNIXFS")}if(r==null&&(r=e),n.length>0){let f;if(u?.type==="hamt-sharded-directory"?f=await eu(l,n[0],s):f=Ih(l,n[0]),f==null)throw(0,Pr.default)(new Error("file does not exist"),"ERR_NOT_FOUND");let d=n.shift(),m=`${r}/${d}`;h={cid:f,toResolve:n,name:d??"",path:m}}let p=Th[u.type](t,l,u,r,i,o,s);if(p==null)throw(0,Pr.default)(new Error("could not find content exporter"),"ERR_NOT_FOUND");return u.isDirectory()?{entry:{type:"directory",name:e,path:r,cid:t,content:p,unixfs:u,depth:o,node:l,size:u.fileSize()},next:h}:{entry:{type:"file",name:e,path:r,cid:t,content:p,unixfs:u,depth:o,node:l,size:u.fileSize()},next:h}},_u=Ch;var Nh={[J]:_u,[ue]:Xc,[$c]:qc,[Ui.code]:Qc},vu=async(t,e,r,n,i,o,s)=>{let c=Nh[t.code];if(c==null)throw(0,Au.default)(new Error(`No resolver for code ${t.code}`),"ERR_NO_RESOLVER");return c(t,e,r,n,vu,i,o,s)},Eu=vu;var Dh=(t="")=>(t.trim().match(/([^\\^/]|\\\/)+/g)??[]).filter(Boolean),Fh=t=>{if(t instanceof Uint8Array)return{cid:L.decode(t),toResolve:[]};let e=L.asCID(t);if(e!=null)return{cid:e,toResolve:[]};if(typeof t=="string"){t.indexOf("/ipfs/")===0&&(t=t.substring(6));let r=Dh(t);return{cid:L.parse(r[0]),toResolve:r.slice(1)}}throw(0,kn.default)(new Error(`Unknown path type ${t}`),"ERR_BAD_PATH")};async function*Lh(t,e,r={}){let{cid:n,toResolve:i}=Fh(t),o=n.toString(),s=o,c=i.length;for(;;){let a=await Eu(n,o,s,i,c,e,r);if(a.entry==null&&a.next==null)throw(0,kn.default)(new Error(`Could not resolve ${t}`),"ERR_NOT_FOUND");if(a.entry!=null&&(yield a.entry),a.next==null)return;i=a.next.toResolve,n=a.next.cid,o=a.next.name,s=a.next.path}}async function te(t,e,r={}){let n=await tt(Lh(t,e,r));if(n==null)throw(0,kn.default)(new Error(`Could not resolve ${t}`),"ERR_NOT_FOUND");return n}async function*In(t,e,r={}){let n=await te(t,e,r);if(n==null)return;if(yield n,n.type==="directory")for await(let o of i(n,r))yield o;async function*i(o,s){for await(let c of o.content(s))yield c,!(c instanceof Uint8Array)&&c.type==="directory"&&(yield*i(c,s))}}var Fu=R(Du(),1),oe=Fu.default;var Le=class extends Error{name;code;constructor(e,r,n){super(e),this.name=r,this.code=n}},Me=class extends Le{constructor(e="not a Unixfs node"){super(e,"NotUnixFSError","ERR_NOT_UNIXFS")}},ce=class extends Le{constructor(e="invalid PBNode"){super(e,"InvalidPBNodeError","ERR_INVALID_PBNODE")}},Ve=class extends Le{constructor(e="unknown error"){super(e,"InvalidPBNodeError","ERR_UNKNOWN_ERROR")}},Ur=class extends Le{constructor(e="path already exists"){super(e,"AlreadyExistsError","ERR_ALREADY_EXISTS")}},Nn=class extends Le{constructor(e="path does not exist"){super(e,"DoesNotExistError","ERR_DOES_NOT_EXIST")}},qt=class extends Le{constructor(e="no content"){super(e,"NoContentError","ERR_NO_CONTENT")}},Dn=class extends Le{constructor(e="not a file"){super(e,"NotAFileError","ERR_NOT_A_FILE")}},st=class extends Le{constructor(e="not a directory"){super(e,"NotADirectoryError","ERR_NOT_A_DIRECTORY")}},se=class extends Le{constructor(e="invalid parameters"){super(e,"InvalidParametersError","ERR_INVALID_PARAMETERS")}};var be=R(Ru(),1);be.default.formatters.b=t=>t==null?"undefined":Ae.baseEncode(t);be.default.formatters.t=t=>t==null?"undefined":Ke.baseEncode(t);be.default.formatters.m=t=>t==null?"undefined":Di.baseEncode(t);be.default.formatters.p=t=>t==null?"undefined":t.toString();be.default.formatters.c=t=>t==null?"undefined":t.toString();be.default.formatters.k=t=>t==null?"undefined":t.toString();be.default.formatters.a=t=>t==null?"undefined":t.toString();function Zh(t){let e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=t,e.destroy=()=>!0,e.extend=()=>e,e}function Y(t){let e=Zh(`${t}:trace`);return be.default.enabled(`${t}:trace`)&&be.default.names.map(r=>r.toString()).find(r=>r.includes(":trace"))!=null&&(e=(0,be.default)(`${t}:trace`)),Object.assign((0,be.default)(t),{error:(0,be.default)(`${t}:error`),trace:e})}var bo=R(Zr(),1);function Un(t){function e(r){return r instanceof Pn?r:new Pn(r,t)}return e}var Pn=class{_value;_hashFn;_depth;_availableBits;_currentBufferIndex;_buffers;constructor(e,r){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=r,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let r=e;for(;this._availableBits<r;)await this._produceMoreBits();let n=0;for(;r>0;){let i=this._buffers[this._currentBufferIndex],o=Math.min(i.availableBits(),r),s=i.take(o);n=(n<<o)+s,r-=o,this._availableBits-=o,i.availableBits()===0&&this._currentBufferIndex++}return n}untake(e){let r=e;for(;r>0;){let n=this._buffers[this._currentBufferIndex],i=Math.min(n.totalBits()-n.availableBits(),r);n.untake(i),r-=i,this._availableBits+=i,this._currentBufferIndex>0&&n.totalBits()===n.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;let e=this._depth>0?ft([this._value,Uint8Array.from([this._depth])]):this._value,r=await this._hashFn(e),n=new yo(r);this._buffers.push(n),this._availableBits+=n.availableBits()}},Jh=[255,254,252,248,240,224,192,128],ed=[1,3,7,15,31,63,127,255],yo=class{_value;_currentBytePos;_currentBitPos;constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let r=e,n=0;for(;r>0&&this._haveBits();){let i=this._value[this._currentBytePos],o=this._currentBitPos+1,s=Math.min(o,r),c=td(i,o-s,s);n=(n<<s)+c,r-=s,this._currentBitPos-=s,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function td(t,e,r){let n=rd(e,r);return(t&n)>>>e}function rd(t,e){return Jh[t]&ed[Math.min(e+t-1,7)]}var zr=BigInt(wt.code),St=8;async function Xt(t){return(await wt.encode(t)).subarray(0,8).reverse()}var Vu=R(Zr(),1);var Pe=async(t,e,r)=>{r.codec==null&&(r.codec=Q);let n=await fe.digest(t),i=L.create(r.cidVersion,r.codec.code,n);return await e.put(i,t,{...r,signal:r.signal}),i};var go=class{options;root;dir;path;dirty;flat;parent;parentKey;unixfs;mode;mtime;cid;size;nodeSize;constructor(e,r){this.options=r??{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime}},zn=class extends go{_bucket;constructor(e,r){super(e,r),this._bucket=Pt({hashFn:Xt,bits:8})}async put(e,r){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,await this._bucket.put(e,r)}async get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(let{key:e,value:r}of this._bucket.eachLeafSeries())yield{key:e,child:r}}estimateNodeSize(){return this.nodeSize!==void 0?this.nodeSize:(this.nodeSize=Mu(this._bucket,this,this.options),this.nodeSize)}async*flush(e){for await(let r of Ou(this._bucket,e,this,this.options))yield{...r,path:this.path}}};async function*Ou(t,e,r,n){let i=t._children,o=[],s=0n;for(let f=0;f<i.length;f++){let d=i.get(f);if(d==null)continue;let m=f.toString(16).toUpperCase().padStart(2,"0");if(d instanceof le){let _;for await(let y of Ou(d,e,null,n))_=y;if(_==null)throw new Error("Could not flush sharded directory, no subshard found");o.push({Name:m,Tsize:Number(_.size),Hash:_.cid}),s+=_.size}else if(nd(d.value)){let _=d.value,y;for await(let x of _.flush(e))y=x,yield y;if(y==null)throw new Error("Did not flush dir");let w=m+d.key;o.push({Name:w,Tsize:Number(y.size),Hash:y.cid}),s+=y.size}else{let _=d.value;if(_.cid==null)continue;let y=m+d.key,w=_.size;o.push({Name:y,Tsize:Number(w),Hash:_.cid}),s+=BigInt(w??0)}}let c=Uint8Array.from(i.bitField().reverse()),a=new C({type:"hamt-sharded-directory",data:c,fanout:BigInt(t.tableSize()),hashType:zr,mtime:r?.mtime,mode:r?.mode}),l={Data:a.marshal(),Links:o},u=P($(l)),h=await Pe(u,e,n),p=BigInt(u.byteLength)+s;yield{cid:h,unixfs:a,size:p}}function nd(t){return typeof t.flush=="function"}function Mu(t,e,r){let n=t._children,i=[];for(let a=0;a<n.length;a++){let l=n.get(a);if(l==null)continue;let u=a.toString(16).toUpperCase().padStart(2,"0");if(l instanceof le){let h=Mu(l,null,r);i.push({Name:u,Tsize:Number(h),Hash:r.cidVersion===0?Rn:On})}else if(typeof l.value.flush=="function"){let p=l.value.nodeSize();i.push({Name:u+l.key,Tsize:Number(p),Hash:r.cidVersion===0?Rn:On})}else{let h=l.value;if(h.cid==null)continue;let p=u+l.key,f=h.size;i.push({Name:p,Tsize:Number(f),Hash:h.cid})}}let o=Uint8Array.from(n.bitField().reverse()),s=new C({type:"hamt-sharded-directory",data:o,fanout:BigInt(t.tableSize()),hashType:zr,mtime:e?.mtime,mode:e?.mode});return P($({Data:s.marshal(),Links:i})).length}var Rn=L.parse("QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn"),On=L.parse("zdj7WbTaiJT1fgatdet9Ei9iDB5hdCxkbVyhyh8YTUnXMiwYi");var wo=Y("helia:unixfs:commands:utils:hamt-utils"),Mn=t=>t.toString(16).toUpperCase().padStart(2,"0").substring(0,2),Hu=async(t,e,r)=>{let n=new zn({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mtime:r.mtime,mode:r.mode},r);for(let o=0;o<e.length;o++)await n._bucket.put(e[o].name,{size:e[o].size,cid:e[o].cid});let i=await tt(n.flush(t));if(i==null)throw new Error("Flushing shard yielded no result");return i},Vn=async(t,e,r)=>{let n=C.unmarshal(t[0].node.Data??new Uint8Array(0)),i=BigInt(Math.pow(2,St));t.reverse();let o,s;for(let c=0;c<t.length;c++){let a=c===t.length-1,l=t[c],u=Uint8Array.from(l.children.bitField().reverse()),h=new C({type:"hamt-sharded-directory",data:u,fanout:i,hashType:zr});a&&(h.mtime=n.mtime,h.mode=n.mode),s={Data:h.marshal(),Links:l.node.Links};let p=P($(s));if(o=await Pe(p,e,r),!a){let f=t[c+1];if(f==null)throw new Error("Was not operating on shard root but also had no parent?");wo("updating link in parent sub-shard with prefix %s",f.prefix),f.node.Links=f.node.Links.filter(d=>d.Name!==f.prefix),f.node.Links.push({Name:f.prefix,Hash:o,Tsize:l.node.Links.reduce((d,m)=>d+(m.Tsize??0),p.byteLength)})}}if(o==null||s==null)throw new Error("Noting persisted");return{cid:o,node:s}},Hn=async(t,e,r,n)=>{let o=Un(Xt)(Je(e)),s=[];for(;;){let c=await r.get(t,n),a=G(c),l=new Vu.default,u=await o.take(St),h=Mn(u);s.push({prefix:h,children:l,node:a});let p;for(let d of a.Links){let m=d.Name??"";if(m.length<2)throw new Error("Invalid HAMT - link name was too short");let _=parseInt(m.substring(0,2),16);l.set(_,!0),m.startsWith(h)&&(p=d)}if(p==null){wo("no link found with prefix %s for %s",h,e);break}let f=p.Name??"";if(f.length<2)throw new Error("Invalid HAMT - link name was too short");if(f.length===2){t=p.Hash,wo("descend into sub-shard with prefix %s",f);continue}break}return{path:s,hash:o}};async function $n(t,e,r,n){if(t.Data==null)throw new Error("DagPB node had no data");let i=C.unmarshal(t.Data),o;if(i.type==="directory")o=id(t);else if(i.type==="hamt-sharded-directory")o=await $u(t,0,r,e,n);else throw new Error("Can only estimate the size of directories or shards");return o>r}function id(t){let e=0;for(let r of t.Links)e+=(r.Name??"").length,e+=r.Hash.version===1?On.bytes.byteLength:Rn.bytes.byteLength;return e}async function $u(t,e,r,n,i){if(e>r)return r;if(t.Data==null||!C.unmarshal(t.Data).isDirectory())return e;for(let s of t.Links){let c=s.Name??"";if(c=c.substring(2),e+=c.length,e+=s.Hash.bytes.byteLength,s.Hash.code===J){let a=await n.get(s.Hash,i),l=G(a);e+=await $u(l,e,r,n,i)}}return e}var He=Y("helia:unixfs:components:utils:add-link");async function Zt(t,e,r,n){if(t.node.Data==null)throw new se("Invalid parent passed to addLink");if(C.unmarshal(t.node.Data).type==="hamt-sharded-directory")return He("adding link to sharded directory"),ad(t,e,r,n);He(`adding ${e.Name} (${e.Hash}) to regular directory`);let o=await sd(t,e,r,n);if(await $n(o.node,r,n.shardSplitThresholdBytes,n)){He("converting directory to sharded directory");let s=await od(o,r);o.cid=s.cid,o.node=G(await r.get(s.cid,n))}return o}var od=async(t,e)=>{if(t.node.Data==null)throw new se("Invalid parent passed to convertToShardedDirectory");let r=C.unmarshal(t.node.Data),n=await Hu(e,t.node.Links.map(i=>({name:i.Name??"",size:BigInt(i.Tsize??0),cid:i.Hash})),{mode:r.mode,mtime:r.mtime,cidVersion:t.cid.version});return He(`converted directory to sharded directory ${n.cid}`),n},sd=async(t,e,r,n)=>{let i=t.node.Links.filter(u=>{let h=u.Name===e.Name;if(h&&!n.allowOverwriting)throw new Ur;return!h});if(i.push(e),t.node.Data==null)throw new ce("Parent node with no data passed to addToDirectory");let o=C.unmarshal(t.node.Data),s;if(o.mtime!=null){let u=Date.now(),h=Math.floor(u/1e3);o.mtime={secs:BigInt(h),nsecs:(u-h*1e3)*1e3},s=o.marshal()}else s=t.node.Data;t.node=$({Data:s,Links:i});let c=P(t.node),a=await fe.digest(c),l=L.create(t.cid.version,J,a);return await r.put(l,c),{node:t.node,cid:l}},ad=async(t,e,r,n)=>{let{path:i,hash:o}=await Hn(t.cid,e.Name,r,n),s=i[i.length-1];if(s==null)throw new Error("Invalid HAMT, could not generate path");let c=s.prefix,a=parseInt(c,16);He("next prefix for %s is %s",e.Name,c);let l=`${c}${e.Name}`,u=s.node.Links.find(h=>(h.Name??"").startsWith(c));if(u!=null)if(He("link %s was present in shard",l),u.Name===l){if(!n.allowOverwriting)throw new Ur;He("overwriting %s in subshard",e.Name),s.node.Links=s.node.Links.filter(h=>h.Name!==l),s.node.Links.push({Name:l,Hash:e.Hash,Tsize:e.Tsize})}else{if(u.Name?.length===2)throw new Error("Existing link was subshard?!");{He("prefix %s already exists, creating new subshard",c);let h=s.node.Links.findIndex(_=>_.Name?.startsWith(c)),p=s.node.Links.splice(h,1)[0],f=(p.Name??"").substring(2),m=Un(Xt)(Je(f));for(let _=0;_<i.length;_++)await m.take(St);for(;;){let _=await m.take(St),y=Mn(_);p.Name=`${y}${f}`;let w=await o.take(St),x=Mn(w);if(y===x){let T=new bo.default;T.set(w,!0),i.push({prefix:x,children:T,node:{Links:[]}});continue}let A=new bo.default;A.set(w,!0),A.set(_,!0),i.push({prefix:c,children:A,node:{Links:[p,{Name:`${x}${e.Name}`,Hash:e.Hash,Tsize:e.Tsize}]}});break}}}else He("link %s was not present in sub-shard",l),e.Name=l,s.node.Links.push(e),s.children.set(a,!0),He("adding %s to existing sub-shard",l);return Vn(i,r,n)};async function at(t,e,r={}){let n=await te(t,e,r);if(n.type!=="directory")throw new st(`${t.toString()} was not a UnixFS directory`);return{cid:t,node:n.node}}async function Jt(t,e,r,n){let i=await te(t,r,n);if(i.type!=="directory"&&i.type!=="file"&&i.type!=="raw")throw new Me(`${t.toString()} was not a UnixFS node`);return{Name:e,Tsize:i.node instanceof Uint8Array?i.node.byteLength:cd(i.node),Hash:t}}function cd(t){let e=t.Links.reduce((r,n)=>r+(n.Tsize??0),0);return P(t).byteLength+e}var xo=Y("helia:unixfs:components:utils:resolve");async function $e(t,e,r,n){if(e==null||e==="")return{cid:t};xo('resolve "%s" under %c',e,t);let i=e.split("/").filter(Boolean),o=[{name:"",cid:t,size:0n}];for(let s=0;s<i.length;s++){let c=i[s],a=await te(t,r,n);if(xo('resolving "%s"',c,a),a.type==="file"){if(s<i.length-1)throw new se("Path was invalid");t=a.cid}else if(a.type==="directory"){let l;for await(let u of a.content())if(u.name===c){l=u.cid;break}if(l==null)throw new Nn("Could not find path in directory");t=l,o.push({name:c,cid:t,size:a.size})}else throw new se("Could not resolve path")}return xo("resolved %s to %c",e,t),{cid:t,path:e,segments:o}}async function er(t,e,r,n){if(e.segments==null||e.segments.length===0)return t;let i=e.segments.pop();if(i==null)throw new Error("Insufficient segments");i.cid=t,e.segments.reverse();for(let o of e.segments){let[s,c]=await Promise.all([at(o.cid,r,n),Jt(i.cid,i.name,r,n)]);t=(await Zt(s,c,r,{...n,allowOverwriting:!0,cidVersion:t.version})).cid,o.cid=t,i=o}return t}var ud=oe.bind({ignoreUndefined:!0}),fd={};async function*ju(t,e,r={}){let n=ud(fd,r),i=await $e(t,n.path,e,n),o=await te(i.cid,e,n);if(o.type!=="file"&&o.type!=="raw")throw new Dn;if(o.content==null)throw new qt;yield*o.content(n)}var ld=oe.bind({ignoreUndefined:!0}),hd=Y("helia:unixfs:chmod"),dd={recursive:!1,shardSplitThresholdBytes:262144};async function Gu(t,e,r,n={}){let i=ld(dd,n),o=await $e(t,i.path,r,n);if(hd("chmod %c %d",o.cid,e),i.recursive){let p=await Oe(async function*(){for await(let f of In(o.cid,r,n)){let d,m=[];if(f.type==="raw")d=new C({type:"file",data:f.node});else if(f.type==="file"||f.type==="directory")d=f.unixfs,m=f.node.Links;else throw new Me;d.mode=e;let _={Data:d.marshal(),Links:m};yield{path:f.path,content:_}}},f=>et(f,r,{...i,dagBuilder:async function*(d,m){for await(let _ of d)yield async function(){let y=_.content,w=P(y),x=await Pe(w,m,{...i,cidVersion:t.version});if(y.Data==null)throw new ce(`${x} had no data`);let A=C.unmarshal(y.Data);return{cid:x,size:BigInt(w.length),path:_.path,unixfs:A}}}}),async f=>tt(f));if(p==null)throw new Ve(`Could not chmod ${o.cid.toString()}`);return er(p.cid,o,r,i)}let s=await r.get(o.cid,n),c,a=[];if(o.cid.code===ue)c=new C({type:"file",data:s});else{let p=G(s);if(p.Data==null)throw new ce(`${o.cid.toString()} had no data`);a=p.Links,c=C.unmarshal(p.Data)}c.mode=e;let l=P({Data:c.marshal(),Links:a}),u=await fe.digest(l),h=L.create(o.cid.version,J,u);return await r.put(h,l),er(h,o,r,i)}var pd=oe.bind({ignoreUndefined:!0}),md=Y("helia:unixfs:cp"),yd={force:!1,shardSplitThresholdBytes:262144};async function Wu(t,e,r,n,i={}){let o=pd(yd,i);if(r.includes("/"))throw new se("Name must not have slashes");let[s,c]=await Promise.all([at(e,n,o),Jt(t,r,n,o)]);return md('Adding %c as "%s" to %c',t,r,e),(await Zt(s,c,n,{allowOverwriting:o.force,cidVersion:e.version,...o})).cid}var gd=oe.bind({ignoreUndefined:!0}),wd={};async function*qu(t,e,r={}){let n=gd(wd,r),i=await $e(t,n.path,e,n),o=await te(i.cid,e);if(o.type==="file"||o.type==="raw"){yield o;return}if(o.content==null)throw new qt;if(o.type!=="directory")throw new st;yield*o.content({offset:r.offset,length:r.length})}var bd=oe.bind({ignoreUndefined:!0}),Yu=Y("helia:unixfs:mkdir"),xd={cidVersion:1,force:!1,shardSplitThresholdBytes:262144};async function Qu(t,e,r,n={}){let i=bd(xd,n);if(e.includes("/"))throw new se("Path must not have slashes");if((await te(t,r,n)).type!=="directory")throw new st(`${t.toString()} was not a UnixFS directory`);Yu("creating %s",e);let c={Data:new C({type:"directory",mode:i.mode,mtime:i.mtime}).marshal(),Links:[]},a=P(c),l=await fe.digest(a),u=L.create(i.cidVersion,J,l);await r.put(u,a);let[h,p]=await Promise.all([at(t,r,i),Jt(u,e,r,i)]);return Yu("adding empty dir called %s to %c",e,t),(await Zt(h,p,r,{...i,allowOverwriting:i.force})).cid}var jn=Y("helia:unixfs:utils:remove-link");async function Ku(t,e,r,n){if(t.node.Data==null)throw new ce("Parent node had no data");if(C.unmarshal(t.node.Data).type==="hamt-sharded-directory"){jn(`removing ${e} from sharded directory`);let o=await Ad(t,e,r,n);return await $n(o.node,r,n.shardSplitThresholdBytes,n)?o:(jn("converting shard to flat directory %c",t.cid),vd(o,r,n))}return jn(`removing link ${e} regular directory`),_d(t,e,r,n)}var _d=async(t,e,r,n)=>{t.node.Links=t.node.Links.filter(s=>s.Name!==e);let i=P(t.node),o=await Pe(i,r,{...n,cidVersion:t.cid.version});return jn(`Updated regular directory ${o}`),{node:t.node,cid:o}},Ad=async(t,e,r,n)=>{let{path:i}=await Hn(t.cid,e,r,n),o=i[i.length-1];if(o==null)throw new Error("Invalid HAMT, could not generate path");let s=o.node.Links.filter(l=>(l.Name??"").substring(2)===e).map(l=>l.Name).pop();if(s==null)throw new Error("File not found");let c=s.substring(0,2),a=parseInt(c,16);if(o.node.Links=o.node.Links.filter(l=>l.Name!==s),o.children.unset(a),o.node.Links.length===1)for(;i.length!==1;){let l=i[i.length-1];if(l==null||l.node.Links.length>1)break;i.pop();let u=i[i.length-1];if(u==null)break;let h=l.node.Links[0];u.node.Links=u.node.Links.filter(p=>!(p.Name??"").startsWith(u.prefix)),u.node.Links.push({Hash:h.Hash,Name:`${u.prefix}${(h.Name??"").substring(2)}`,Tsize:h.Tsize})}return Vn(i,r,n)},vd=async(t,e,r)=>{if(t.node.Data==null)throw new se("Invalid parent passed to convertToFlatDirectory");let n={Links:[]},i=await te(t.cid,e);if(i.type!=="directory")throw new Error("Unexpected node type");for await(let a of i.content()){let l=0;a.node instanceof Uint8Array?l=a.node.byteLength:l=P(a.node).length,n.Links.push({Hash:a.cid,Name:a.name,Tsize:l})}let o=C.unmarshal(t.node.Data);n.Data=new C({type:"directory",mode:o.mode,mtime:o.mtime}).marshal();let s=P($(n));return{cid:await Pe(s,e,{codec:Q,cidVersion:t.cid.version,signal:r.signal}),node:n}};var Ed=oe.bind({ignoreUndefined:!0}),Sd=Y("helia:unixfs:rm"),Bd={shardSplitThresholdBytes:262144};async function Xu(t,e,r,n={}){let i=Ed(Bd,n);if(e.includes("/"))throw new se("Name must not have slashes");let o=await at(t,r,i);return Sd("Removing %s from %c",e,t),(await Ku(o,e,r,{...i,cidVersion:t.version})).cid}var kd=oe.bind({ignoreUndefined:!0}),Id=Y("helia:unixfs:stat"),Td={};async function Zu(t,e,r={}){let n=kd(Td,r),i=await $e(t,r.path,e,n);Id("stat %c",i.cid);let o=await te(i.cid,e,n);if(o.type!=="file"&&o.type!=="directory"&&o.type!=="raw")throw new Me;let s=0n,c=0n,a=0n,l=0n,u=0,h,p,f=o.type,d;if(o.type==="raw"&&(s=BigInt(o.node.byteLength),c=BigInt(o.node.byteLength),a=BigInt(o.node.byteLength),l=BigInt(o.node.byteLength),u=1),o.type==="directory"&&(s=0n,c=BigInt(o.unixfs.marshal().byteLength),a=0n,l=c,u=1,h=o.unixfs.mode,p=o.unixfs.mtime,d=o.unixfs),o.type==="file"){let m=await Ju(i.cid,e,n);s=o.unixfs.fileSize(),c=BigInt((o.node.Data?.byteLength??0)+o.node.Links.reduce((_,y)=>_+(y.Tsize??0),0)),a=BigInt(m.localFileSize),l=BigInt(m.localDagSize),u=m.blocks,h=o.unixfs.mode,p=o.unixfs.mtime,d=o.unixfs}return{cid:i.cid,mode:h,mtime:p,fileSize:s,dagSize:c,localFileSize:a,localDagSize:l,blocks:u,type:f,unixfs:d}}async function Ju(t,e,r){let n={localFileSize:0,localDagSize:0,blocks:0};if(await e.has(t,r)){let i=await e.get(t,r);if(n.blocks++,n.localDagSize+=i.byteLength,t.code===ue)n.localFileSize+=i.byteLength;else if(t.code===J){let o=G(i);if(o.Links.length>0)for(let s of o.Links){let c=await Ju(s.Hash,e,r);n.localFileSize+=c.localFileSize,n.localDagSize+=c.localDagSize,n.blocks+=c.blocks}else{if(o.Data==null)throw new ce(`PBNode ${t.toString()} had no data`);let s=C.unmarshal(o.Data);if(s.data==null)throw new ce(`UnixFS node ${t.toString()} had no data`);n.localFileSize+=s.data.byteLength??0}}else throw new Ve(`${t.toString()} was neither DAG_PB nor RAW`)}return n}var Cd=oe.bind({ignoreUndefined:!0}),Nd=Y("helia:unixfs:touch"),Dd={recursive:!1,shardSplitThresholdBytes:262144};async function ef(t,e,r={}){let n=Cd(Dd,r),i=await $e(t,n.path,e,n),o=n.mtime??{secs:BigInt(Math.round(Date.now()/1e3)),nsecs:0};if(Nd("touch %c %o",i.cid,o),n.recursive){let p=await Oe(async function*(){for await(let f of In(i.cid,e)){let d,m;if(f.type==="raw")d=new C({data:f.node}),m=[];else if(f.type==="file"||f.type==="directory")d=f.unixfs,m=f.node.Links;else throw new Me;d.mtime=o;let _={Data:d.marshal(),Links:m};yield{path:f.path,content:_}}},f=>et(f,e,{...n,dagBuilder:async function*(d,m){for await(let _ of d)yield async function(){let y=_.content,w=P(y),x=await Pe(w,m,{...n,cidVersion:t.version});if(y.Data==null)throw new ce(`${x} had no data`);let A=C.unmarshal(y.Data);return{cid:x,size:BigInt(w.length),path:_.path,unixfs:A}}}}),async f=>tt(f));if(p==null)throw new Ve(`Could not chmod ${i.cid.toString()}`);return er(p.cid,i,e,n)}let s=await e.get(i.cid,r),c,a=[];if(i.cid.code===ue)c=new C({data:s});else{let p=G(s);if(a=p.Links,p.Data==null)throw new ce(`${i.cid.toString()} had no data`);c=C.unmarshal(p.Data)}c.mtime=o;let l=P({Data:c.marshal(),Links:a}),u=await fe.digest(l),h=L.create(i.cid.version,J,u);return await e.put(h,l),er(h,i,e,n)}function tf(t,e){return{path:decodeURIComponent(new URL(t).pathname.split("/").pop()??""),content:Fd(t,e)}}async function*Fd(t,e){let r=await globalThis.fetch(t,e);if(r.body==null)throw new Ve("HTTP response did not have a body");let n=r.body.getReader();try{for(;;){let{done:i,value:o}=await n.read();if(i)return;o!=null&&(yield o)}}finally{n.releaseLock()}}var _o=class{components;constructor(e){this.components=e}async*addAll(e,r={}){yield*La(e,this.components.blockstore,r)}async addBytes(e,r={}){return Pa(e,this.components.blockstore,r)}async addByteStream(e,r={}){return Ua(e,this.components.blockstore,r)}async addFile(e,r={}){return za(e,this.components.blockstore,r)}async addDirectory(e={},r={}){return Ra(e,this.components.blockstore,r)}async*cat(e,r={}){yield*ju(e,this.components.blockstore,r)}async chmod(e,r,n={}){return Gu(e,r,this.components.blockstore,n)}async cp(e,r,n,i={}){return Wu(e,r,n,this.components.blockstore,i)}async*ls(e,r={}){yield*qu(e,this.components.blockstore,r)}async mkdir(e,r,n={}){return Qu(e,r,this.components.blockstore,n)}async rm(e,r,n={}){return Xu(e,r,this.components.blockstore,n)}async stat(e,r={}){return Zu(e,this.components.blockstore,r)}async touch(e,r={}){return ef(e,this.components.blockstore,r)}};function Ld(t){return new _o(t)}return uf(Pd);})();
return HeliaUnixfs}));
