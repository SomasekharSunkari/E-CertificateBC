(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Libp2PPubsub = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var Libp2PPubsub=(()=>{var yl=Object.create;var ni=Object.defineProperty;var gl=Object.getOwnPropertyDescriptor;var ml=Object.getOwnPropertyNames;var xl=Object.getPrototypeOf,bl=Object.prototype.hasOwnProperty;var Y=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Lt=(t,e)=>{for(var r in e)ni(t,r,{get:e[r],enumerable:!0})},ka=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ml(e))!bl.call(t,i)&&i!==r&&ni(t,i,{get:()=>e[i],enumerable:!(n=gl(e,i))||n.enumerable});return t};var dt=(t,e,r)=>(r=t!=null?yl(xl(t)):{},ka(e||!t||!t.__esModule?ni(r,"default",{value:t,enumerable:!0}):r,t)),vl=t=>ka(ni({},"__esModule",{value:!0}),t);var Oa=Y((zg,Ua)=>{var Mr=1e3,Fr=Mr*60,qr=Fr*60,yr=qr*24,wl=yr*7,El=yr*365.25;Ua.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Sl(t);if(r==="number"&&isFinite(t))return e.long?Cl(t):Bl(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Sl(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*El;case"weeks":case"week":case"w":return r*wl;case"days":case"day":case"d":return r*yr;case"hours":case"hour":case"hrs":case"hr":case"h":return r*qr;case"minutes":case"minute":case"mins":case"min":case"m":return r*Fr;case"seconds":case"second":case"secs":case"sec":case"s":return r*Mr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Bl(t){var e=Math.abs(t);return e>=yr?Math.round(t/yr)+"d":e>=qr?Math.round(t/qr)+"h":e>=Fr?Math.round(t/Fr)+"m":e>=Mr?Math.round(t/Mr)+"s":t+"ms"}function Cl(t){var e=Math.abs(t);return e>=yr?ii(t,e,yr,"day"):e>=qr?ii(t,e,qr,"hour"):e>=Fr?ii(t,e,Fr,"minute"):e>=Mr?ii(t,e,Mr,"second"):t+" ms"}function ii(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var Ma=Y((Gg,Ka)=>{function Al(t){r.debug=r,r.default=r,r.coerce=u,r.disable=s,r.enable=i,r.enabled=o,r.humanize=Oa(),r.destroy=c,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let l=0;for(let h=0;h<f.length;h++)l=(l<<5)-l+f.charCodeAt(h),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=e;function r(f){let l,h=null,g,d;function p(...y){if(!p.enabled)return;let m=p,w=Number(new Date),b=w-(l||w);m.diff=b,m.prev=l,m.curr=w,l=w,y[0]=r.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let T=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(S,L)=>{if(S==="%%")return"%";T++;let N=r.formatters[L];if(typeof N=="function"){let G=y[T];S=N.call(m,G),y.splice(T,1),T--}return S}),r.formatArgs.call(m,y),(m.log||r.log).apply(m,y)}return p.namespace=f,p.useColors=r.useColors(),p.color=r.selectColor(f),p.extend=n,p.destroy=r.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(g!==r.namespaces&&(g=r.namespaces,d=r.enabled(f)),d),set:y=>{h=y}}),typeof r.init=="function"&&r.init(p),p}function n(f,l){let h=r(this.namespace+(typeof l>"u"?":":l)+f);return h.log=this.log,h}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let l,h=(typeof f=="string"?f:"").split(/[\s,]+/),g=h.length;for(l=0;l<g;l++)h[l]&&(f=h[l].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function s(){let f=[...r.names.map(a),...r.skips.map(a).map(l=>"-"+l)].join(",");return r.enable(""),f}function o(f){if(f[f.length-1]==="*")return!0;let l,h;for(l=0,h=r.skips.length;l<h;l++)if(r.skips[l].test(f))return!1;for(l=0,h=r.names.length;l<h;l++)if(r.names[l].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function u(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Ka.exports=Al});var Fa=Y((ee,si)=>{ee.formatArgs=Il;ee.save=Tl;ee.load=Rl;ee.useColors=_l;ee.storage=Ll();ee.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ee.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function _l(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Il(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+si.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}ee.log=console.debug||console.log||(()=>{});function Tl(t){try{t?ee.storage.setItem("debug",t):ee.storage.removeItem("debug")}catch{}}function Rl(){let t;try{t=ee.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function Ll(){try{return localStorage}catch{}}si.exports=Ma()(ee);var{formatters:Nl}=si.exports;Nl.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var h0=Y((hm,Gs)=>{"use strict";var Gh=Object.prototype.hasOwnProperty,Xt="~";function In(){}Object.create&&(In.prototype=Object.create(null),new In().__proto__||(Xt=!1));function Wh(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function l0(t,e,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new Wh(r,n||t,i),o=Xt?Xt+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],s]:t._events[o].push(s):(t._events[o]=s,t._eventsCount++),t}function li(t,e){--t._eventsCount===0?t._events=new In:delete t._events[e]}function Qt(){this._events=new In,this._eventsCount=0}Qt.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)Gh.call(r,n)&&e.push(Xt?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};Qt.prototype.listeners=function(e){var r=Xt?Xt+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o};Qt.prototype.listenerCount=function(e){var r=Xt?Xt+e:e,n=this._events[r];return n?n.fn?1:n.length:0};Qt.prototype.emit=function(e,r,n,i,s,o){var a=Xt?Xt+e:e;if(!this._events[a])return!1;var u=this._events[a],c=arguments.length,f,l;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,r),!0;case 3:return u.fn.call(u.context,r,n),!0;case 4:return u.fn.call(u.context,r,n,i),!0;case 5:return u.fn.call(u.context,r,n,i,s),!0;case 6:return u.fn.call(u.context,r,n,i,s,o),!0}for(l=1,f=new Array(c-1);l<c;l++)f[l-1]=arguments[l];u.fn.apply(u.context,f)}else{var h=u.length,g;for(l=0;l<h;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,r);break;case 3:u[l].fn.call(u[l].context,r,n);break;case 4:u[l].fn.call(u[l].context,r,n,i);break;default:if(!f)for(g=1,f=new Array(c-1);g<c;g++)f[g-1]=arguments[g];u[l].fn.apply(u[l].context,f)}}return!0};Qt.prototype.on=function(e,r,n){return l0(this,e,r,n,!1)};Qt.prototype.once=function(e,r,n){return l0(this,e,r,n,!0)};Qt.prototype.removeListener=function(e,r,n,i){var s=Xt?Xt+e:e;if(!this._events[s])return this;if(!r)return li(this,s),this;var o=this._events[s];if(o.fn)o.fn===r&&(!i||o.once)&&(!n||o.context===n)&&li(this,s);else{for(var a=0,u=[],c=o.length;a<c;a++)(o[a].fn!==r||i&&!o[a].once||n&&o[a].context!==n)&&u.push(o[a]);u.length?this._events[s]=u.length===1?u[0]:u:li(this,s)}return this};Qt.prototype.removeAllListeners=function(e){var r;return e?(r=Xt?Xt+e:e,this._events[r]&&li(this,r)):(this._events=new In,this._eventsCount=0),this};Qt.prototype.off=Qt.prototype.removeListener;Qt.prototype.addListener=Qt.prototype.on;Qt.prefixed=Xt;Qt.EventEmitter=Qt;typeof Gs<"u"&&(Gs.exports=Qt)});var N0=Y((zm,L0)=>{"use strict";function R0(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function td(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return R0(t,r)}catch{r.message=t.message,r.stack=t.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),R0(new i,r)}}L0.exports=td});var ct=Y((sx,P0)=>{P0.exports={options:{usePureJavaScript:!1}}});var O0=Y((ox,U0)=>{var so={};U0.exports=so;var k0={};so.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=id(t,e);else{var i=0,s=e.length,o=e.charAt(0),a=[0];for(i=0;i<t.length;++i){for(var u=0,c=t[i];u<a.length;++u)c+=a[u]<<8,a[u]=c%s,c=c/s|0;for(;c>0;)a.push(c%s),c=c/s|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=o;for(i=a.length-1;i>=0;--i)n+=e[a[i]]}if(r){var f=new RegExp(".{1,"+r+"}","g");n=n.match(f).join(`\r
`)}return n};so.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=k0[e];if(!r){r=k0[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,s=e.charAt(0),o=[0],n=0;n<t.length;n++){var a=r[t.charCodeAt(n)];if(a===void 0)return;for(var u=0,c=a;u<o.length;++u)c+=o[u]*i,o[u]=c&255,c>>=8;for(;c>0;)o.push(c&255),c>>=8}for(var f=0;t[f]===s&&f<t.length-1;++f)o.push(0);return typeof Buffer<"u"?Buffer.from(o.reverse()):new Uint8Array(o.reverse())};function id(t,e){var r=0,n=e.length,i=e.charAt(0),s=[0];for(r=0;r<t.length();++r){for(var o=0,a=t.at(r);o<s.length;++o)a+=s[o]<<8,s[o]=a%n,a=a/n|0;for(;a>0;)s.push(a%n),a=a/n|0}var u="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)u+=i;for(r=s.length-1;r>=0;--r)u+=e[s[r]];return u}});var At=Y((ax,q0)=>{var K0=ct(),M0=O0(),x=q0.exports=K0.util=K0.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){x.nextTick=process.nextTick,typeof setImmediate=="function"?x.setImmediate=setImmediate:x.setImmediate=x.nextTick;return}if(typeof setImmediate=="function"){x.setImmediate=function(){return setImmediate.apply(void 0,arguments)},x.nextTick=function(a){return setImmediate(a)};return}if(x.setImmediate=function(a){setTimeout(a,0)},typeof window<"u"&&typeof window.postMessage=="function"){let a=function(u){if(u.source===window&&u.data===t){u.stopPropagation();var c=e.slice();e.length=0,c.forEach(function(f){f()})}};var o=a,t="forge.setImmediate",e=[];x.setImmediate=function(u){e.push(u),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var u=e.slice();e.length=0,u.forEach(function(c){c()})}).observe(i,{attributes:!0});var s=x.setImmediate;x.setImmediate=function(u){Date.now()-r>15?(r=Date.now(),s(u)):(e.push(u),e.length===1&&i.setAttribute("a",n=!n))}}x.nextTick=x.setImmediate})();x.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;x.globalScope=function(){return x.isNodejs?globalThis:typeof self>"u"?window:self}();x.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};x.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};x.isArrayBufferView=function(t){return t&&x.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function On(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}x.ByteBuffer=oo;function oo(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(x.isArrayBuffer(t)||x.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof oo||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}x.ByteStringBuffer=oo;var sd=4096;x.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>sd&&(this.data.substr(0,1),this._constructedStringLength=0)};x.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};x.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};x.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};x.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};x.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};x.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(x.encodeUtf8(t))};x.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};x.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};x.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};x.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};x.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};x.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};x.ByteStringBuffer.prototype.putInt=function(t,e){On(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};x.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};x.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};x.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};x.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};x.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};x.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};x.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};x.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};x.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};x.ByteStringBuffer.prototype.getInt=function(t){On(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};x.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};x.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};x.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};x.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};x.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};x.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};x.ByteStringBuffer.prototype.copy=function(){var t=x.createBuffer(this.data);return t.read=this.read,t};x.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};x.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};x.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};x.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};x.ByteStringBuffer.prototype.toString=function(){return x.decodeUtf8(this.bytes())};function od(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=x.isArrayBuffer(t),n=x.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}x.DataBuffer=od;x.DataBuffer.prototype.length=function(){return this.write-this.read};x.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};x.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};x.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};x.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};x.DataBuffer.prototype.putBytes=function(t,e){if(x.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(x.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof x.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&x.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof x.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var s;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=x.binary.hex.decode(t,s,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=x.binary.base64.decode(t,s,this.write),this;if(e==="utf8"&&(t=x.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=x.binary.raw.decode(s),this;if(e==="utf16")return this.accommodate(t.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=x.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};x.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};x.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};x.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};x.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};x.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};x.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};x.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};x.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};x.DataBuffer.prototype.putInt=function(t,e){On(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};x.DataBuffer.prototype.putSignedInt=function(t,e){return On(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};x.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};x.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};x.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};x.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};x.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};x.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};x.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};x.DataBuffer.prototype.getInt=function(t){On(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};x.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};x.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};x.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};x.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};x.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};x.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};x.DataBuffer.prototype.copy=function(){return new x.DataBuffer(this)};x.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};x.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};x.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};x.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};x.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return x.binary.raw.encode(e);if(t==="hex")return x.binary.hex.encode(e);if(t==="base64")return x.binary.base64.encode(e);if(t==="utf8")return x.text.utf8.decode(e);if(t==="utf16")return x.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};x.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=x.encodeUtf8(t)),new x.ByteBuffer(t)};x.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};x.xorBytes=function(t,e,r){for(var n="",i="",s="",o=0,a=0;r>0;--r,++o)i=t.charCodeAt(o)^e.charCodeAt(o),a>=10&&(n+=s,s="",a=0),s+=String.fromCharCode(i),++a;return n+=s,n};x.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};x.bytesToHex=function(t){return x.createBuffer(t).toHex()};x.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var rr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",nr=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],F0="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";x.encode64=function(t,e){for(var r="",n="",i,s,o,a=0;a<t.length;)i=t.charCodeAt(a++),s=t.charCodeAt(a++),o=t.charCodeAt(a++),r+=rr.charAt(i>>2),r+=rr.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=rr.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":rr.charAt(o&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};x.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,s,o=0;o<t.length;)r=nr[t.charCodeAt(o++)-43],n=nr[t.charCodeAt(o++)-43],i=nr[t.charCodeAt(o++)-43],s=nr[t.charCodeAt(o++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),s!==64&&(e+=String.fromCharCode((i&3)<<6|s)));return e};x.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};x.decodeUtf8=function(t){return decodeURIComponent(escape(t))};x.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:M0.encode,decode:M0.decode}};x.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};x.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,s=0;s<t.length;++s)n[i++]=t.charCodeAt(s);return e?i-r:n};x.binary.hex.encode=x.bytesToHex;x.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,s=r;for(t.length&1&&(i=1,n[s++]=parseInt(t[0],16));i<t.length;i+=2)n[s++]=parseInt(t.substr(i,2),16);return e?s-r:n};x.binary.base64.encode=function(t,e){for(var r="",n="",i,s,o,a=0;a<t.byteLength;)i=t[a++],s=t[a++],o=t[a++],r+=rr.charAt(i>>2),r+=rr.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=rr.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":rr.charAt(o&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};x.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,s,o,a,u=0,c=r;u<t.length;)i=nr[t.charCodeAt(u++)-43],s=nr[t.charCodeAt(u++)-43],o=nr[t.charCodeAt(u++)-43],a=nr[t.charCodeAt(u++)-43],n[c++]=i<<2|s>>4,o!==64&&(n[c++]=(s&15)<<4|o>>2,a!==64&&(n[c++]=(o&3)<<6|a));return e?c-r:n.subarray(0,c)};x.binary.base58.encode=function(t,e){return x.binary.baseN.encode(t,F0,e)};x.binary.base58.decode=function(t,e){return x.binary.baseN.decode(t,F0,e)};x.text={utf8:{},utf16:{}};x.text.utf8.encode=function(t,e,r){t=x.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,s=0;s<t.length;++s)n[i++]=t.charCodeAt(s);return e?i-r:n};x.text.utf8.decode=function(t){return x.decodeUtf8(String.fromCharCode.apply(null,t))};x.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var s=r,o=r,a=0;a<t.length;++a)i[o++]=t.charCodeAt(a),s+=2;return e?s-r:n};x.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};x.deflate=function(t,e,r){if(e=x.decode64(t.deflate(x.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};x.inflate=function(t,e,r){var n=t.inflate(x.encode64(e)).rval;return n===null?null:x.decode64(n)};var ao=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=x.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},uo=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(x.decode64(r))),r},ad=function(t,e,r,n){var i=uo(t,e);i===null&&(i={}),i[r]=n,ao(t,e,i)},ud=function(t,e,r){var n=uo(t,e);return n!==null&&(n=r in n?n[r]:null),n},cd=function(t,e,r){var n=uo(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),ao(t,e,n)}},fd=function(t,e){ao(t,e,null)},Ci=function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,s=!1,o=null;for(var a in r){i=r[a];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),s=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),s=!0)}catch(u){o=u}if(s)break}if(!s)throw o;return n};x.setItem=function(t,e,r,n,i){Ci(ad,arguments,i)};x.getItem=function(t,e,r,n){return Ci(ud,arguments,n)};x.removeItem=function(t,e,r,n){Ci(cd,arguments,n)};x.clearItems=function(t,e,r){Ci(fd,arguments,r)};x.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};x.format=function(t){for(var e=/%./g,r,n,i=0,s=[],o=0;r=e.exec(t);){n=t.substring(o,e.lastIndex-2),n.length>0&&s.push(n),o=e.lastIndex;var a=r[0][1];switch(a){case"s":case"o":i<arguments.length?s.push(arguments[i+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(t.substring(o)),s.join("")};x.formatNumber=function(t,e,r,n){var i=t,s=isNaN(e=Math.abs(e))?2:e,o=r===void 0?",":r,a=n===void 0?".":n,u=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",f=c.length>3?c.length%3:0;return u+(f?c.substr(0,f)+a:"")+c.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(i-c).toFixed(s).slice(2):"")};x.formatSize=function(t){return t>=1073741824?t=x.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=x.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=x.formatNumber(t/1024,0)+" KiB":t=x.formatNumber(t,0)+" bytes",t};x.bytesFromIP=function(t){return t.indexOf(".")!==-1?x.bytesFromIPv4(t):t.indexOf(":")!==-1?x.bytesFromIPv6(t):null};x.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=x.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};x.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(o){return o.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=x.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var s=x.hexToBytes(t[i]);s.length<2&&n.putByte(0),n.putBytes(s)}return n.getBytes()};x.bytesToIP=function(t){return t.length===4?x.bytesToIPv4(t):t.length===16?x.bytesToIPv6(t):null};x.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};x.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var s=x.bytesToHex(t[i]+t[i+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var o=r[r.length-1],a=e.length;!o||a!==o.end+1?r.push({start:a,end:a}):(o.end=a,o.end-o.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(s)}if(r.length>0){var u=r[n];u.end-u.start>0&&(e.splice(u.start,u.end-u.start+1,""),u.start===0&&e.unshift(""),u.end===7&&e.push(""))}return e.join(":")};x.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in x&&!t.update)return e(null,x.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return x.cores=navigator.hardwareConcurrency,e(null,x.cores);if(typeof Worker>"u")return x.cores=1,e(null,x.cores);if(typeof Blob>"u")return x.cores=2,e(null,x.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(o){for(var a=Date.now(),u=a+4;Date.now()<u;);self.postMessage({st:a,et:u})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(o,a,u){if(a===0){var c=Math.floor(o.reduce(function(f,l){return f+l},0)/o.length);return x.cores=Math.max(1,c),URL.revokeObjectURL(r),e(null,x.cores)}i(u,function(f,l){o.push(s(u,l)),n(o,a-1,u)})}function i(o,a){for(var u=[],c=[],f=0;f<o;++f){var l=new Worker(r);l.addEventListener("message",function(h){if(c.push(h.data),c.length===o){for(var g=0;g<o;++g)u[g].terminate();a(null,c)}}),u.push(l)}for(var f=0;f<o;++f)u[f].postMessage(f)}function s(o,a){for(var u=[],c=0;c<o;++c)for(var f=a[c],l=u[c]=[],h=0;h<o;++h)if(c!==h){var g=a[h];(f.st>g.st&&f.st<g.et||g.st>f.st&&g.st<f.et)&&l.push(h)}return u.reduce(function(d,p){return Math.max(d,p.length)},0)}}});var fo=Y((ux,V0)=>{var Kt=ct();At();V0.exports=Kt.cipher=Kt.cipher||{};Kt.cipher.algorithms=Kt.cipher.algorithms||{};Kt.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Kt.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Kt.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Kt.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Kt.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Kt.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Kt.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Kt.cipher.algorithms[t]=e};Kt.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Kt.cipher.algorithms?Kt.cipher.algorithms[t]:null};var co=Kt.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};co.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Kt.util.createBuffer(),this.output=t.output||Kt.util.createBuffer(),this.mode.start(e)};co.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};co.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var ho=Y((cx,H0)=>{var Mt=ct();At();Mt.cipher=Mt.cipher||{};var J=H0.exports=Mt.cipher.modes=Mt.cipher.modes||{};J.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};J.ecb.prototype.start=function(t){};J.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};J.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};J.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};J.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};J.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};J.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=Ai(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};J.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};J.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};J.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};J.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};J.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Mt.util.createBuffer(),this._partialBytes=0};J.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Ai(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};J.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};J.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};J.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Mt.util.createBuffer(),this._partialBytes=0};J.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Ai(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};J.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};J.ofb.prototype.decrypt=J.ofb.prototype.encrypt;J.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Mt.util.createBuffer(),this._partialBytes=0};J.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Ai(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};J.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}_i(this._inBlock)};J.ctr.prototype.decrypt=J.ctr.prototype.encrypt;J.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Mt.util.createBuffer(),this._partialBytes=0,this._R=3774873600};J.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Mt.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Mt.util.createBuffer(t.additionalData):r=Mt.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Mt.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(lo(n*8)))}this._inBlock=this._j0.slice(0),_i(this._inBlock),this._partialBytes=0,r=Mt.util.createBuffer(r),this._aDataLength=lo(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};J.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var o=n%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),_i(this._inBlock)};J.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),_i(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};J.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Mt.util.createBuffer();var n=this._aDataLength.concat(lo(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^i[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};J.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var s=t[i/32|0]&1<<31-i%32;s&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};J.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};J.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,s=this._m[r][i];e[0]^=s[0],e[1]^=s[1],e[2]^=s[2],e[3]^=s[3]}return e};J.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};J.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,s=new Array(i),o=0;o<i;++o){var a=[0,0,0,0],u=o/n|0,c=(n-1-o%n)*e;a[u]=1<<e-1<<c,s[o]=this.generateSubHashTable(this.multiply(a,t),e)}return s};J.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var o=1;o<s;++o){var a=i[s],u=i[o];i[s+o]=[a[0]^u[0],a[1]^u[1],a[2]^u[2],a[3]^u[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var c=i[s^n];i[s]=[t[0]^c[0],t[1]^c[1],t[2]^c[2],t[3]^c[3]]}return i};function Ai(t,e){if(typeof t=="string"&&(t=Mt.util.createBuffer(t)),Mt.util.isArray(t)&&t.length>4){var r=t;t=Mt.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Mt.util.isArray(t)){for(var i=[],s=e/4,n=0;n<s;++n)i.push(t.getInt32());t=i}return t}function _i(t){t[t.length-1]=t[t.length-1]+1&4294967295}function lo(t){return[t/4294967296|0,t&4294967295]}});var Ti=Y((fx,Y0)=>{var ht=ct();fo();ho();At();Y0.exports=ht.aes=ht.aes||{};ht.aes.startEncrypting=function(t,e,r,n){var i=Ii({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};ht.aes.createEncryptionCipher=function(t,e){return Ii({key:t,output:null,decrypt:!1,mode:e})};ht.aes.startDecrypting=function(t,e,r,n){var i=Ii({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};ht.aes.createDecryptionCipher=function(t,e){return Ii({key:t,output:null,decrypt:!0,mode:e})};ht.aes.Algorithm=function(t,e){go||G0();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(n,i){return yo(r._w,n,i,!1)},decrypt:function(n,i){return yo(r._w,n,i,!0)}}}),r._init=!1};ht.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=ht.util.createBuffer(e);else if(ht.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=ht.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!ht.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!ht.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,o=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=W0(e,t.decrypt&&!o),this._init=!0}};ht.aes._expandKey=function(t,e){return go||G0(),W0(t,e)};ht.aes._updateBlock=yo;en("AES-ECB",ht.cipher.modes.ecb);en("AES-CBC",ht.cipher.modes.cbc);en("AES-CFB",ht.cipher.modes.cfb);en("AES-OFB",ht.cipher.modes.ofb);en("AES-CTR",ht.cipher.modes.ctr);en("AES-GCM",ht.cipher.modes.gcm);function en(t,e){var r=function(){return new ht.aes.Algorithm(t,e)};ht.cipher.registerAlgorithm(t,r)}var go=!1,tn=4,Jt,po,z0,Er,de;function G0(){go=!0,z0=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;Jt=new Array(256),po=new Array(256),Er=new Array(4),de=new Array(4);for(var e=0;e<4;++e)Er[e]=new Array(256),de[e]=new Array(256);for(var r=0,n=0,i,s,o,a,u,c,f,e=0;e<256;++e){a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^a&255^99,Jt[r]=a,po[a]=r,u=t[a],i=t[r],s=t[i],o=t[s],c=u<<24^a<<16^a<<8^(a^u),f=(i^s^o)<<24^(r^o)<<16^(r^s^o)<<8^(r^i^o);for(var l=0;l<4;++l)Er[l][r]=c,de[l][a]=f,c=c<<24|c>>>8,f=f<<24|f>>>8;r===0?r=n=1:(r=i^t[t[t[i^o]]],n^=t[t[n]])}}function W0(t,e){for(var r=t.slice(0),n,i=1,s=r.length,o=s+6+1,a=tn*o,u=s;u<a;++u)n=r[u-1],u%s===0?(n=Jt[n>>>16&255]<<24^Jt[n>>>8&255]<<16^Jt[n&255]<<8^Jt[n>>>24]^z0[i]<<24,i++):s>6&&u%s===4&&(n=Jt[n>>>24]<<24^Jt[n>>>16&255]<<16^Jt[n>>>8&255]<<8^Jt[n&255]),r[u]=r[u-s]^n;if(e){var c,f=de[0],l=de[1],h=de[2],g=de[3],d=r.slice(0);a=r.length;for(var u=0,p=a-tn;u<a;u+=tn,p-=tn)if(u===0||u===a-tn)d[u]=r[p],d[u+1]=r[p+3],d[u+2]=r[p+2],d[u+3]=r[p+1];else for(var y=0;y<tn;++y)c=r[p+y],d[u+(3&-y)]=f[Jt[c>>>24]]^l[Jt[c>>>16&255]]^h[Jt[c>>>8&255]]^g[Jt[c&255]];r=d}return r}function yo(t,e,r,n){var i=t.length/4-1,s,o,a,u,c;n?(s=de[0],o=de[1],a=de[2],u=de[3],c=po):(s=Er[0],o=Er[1],a=Er[2],u=Er[3],c=Jt);var f,l,h,g,d,p,y;f=e[0]^t[0],l=e[n?3:1]^t[1],h=e[2]^t[2],g=e[n?1:3]^t[3];for(var m=3,w=1;w<i;++w)d=s[f>>>24]^o[l>>>16&255]^a[h>>>8&255]^u[g&255]^t[++m],p=s[l>>>24]^o[h>>>16&255]^a[g>>>8&255]^u[f&255]^t[++m],y=s[h>>>24]^o[g>>>16&255]^a[f>>>8&255]^u[l&255]^t[++m],g=s[g>>>24]^o[f>>>16&255]^a[l>>>8&255]^u[h&255]^t[++m],f=d,l=p,h=y;r[0]=c[f>>>24]<<24^c[l>>>16&255]<<16^c[h>>>8&255]<<8^c[g&255]^t[++m],r[n?3:1]=c[l>>>24]<<24^c[h>>>16&255]<<16^c[g>>>8&255]<<8^c[f&255]^t[++m],r[2]=c[h>>>24]<<24^c[g>>>16&255]<<16^c[f>>>8&255]<<8^c[l&255]^t[++m],r[n?1:3]=c[g>>>24]<<24^c[f>>>16&255]<<16^c[l>>>8&255]<<8^c[h&255]^t[++m]}function Ii(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=ht.cipher.createDecipher(r,t.key):n=ht.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(s,o){var a=null;o instanceof ht.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,i.call(n,o)},n}});var Li=Y((Rx,j0)=>{var Kn=ct();Kn.pki=Kn.pki||{};var xo=j0.exports=Kn.pki.oids=Kn.oids=Kn.oids||{};function I(t,e){xo[t]=e,xo[e]=t}function at(t,e){xo[t]=e}I("1.2.840.113549.1.1.1","rsaEncryption");I("1.2.840.113549.1.1.4","md5WithRSAEncryption");I("1.2.840.113549.1.1.5","sha1WithRSAEncryption");I("1.2.840.113549.1.1.7","RSAES-OAEP");I("1.2.840.113549.1.1.8","mgf1");I("1.2.840.113549.1.1.9","pSpecified");I("1.2.840.113549.1.1.10","RSASSA-PSS");I("1.2.840.113549.1.1.11","sha256WithRSAEncryption");I("1.2.840.113549.1.1.12","sha384WithRSAEncryption");I("1.2.840.113549.1.1.13","sha512WithRSAEncryption");I("1.3.101.112","EdDSA25519");I("1.2.840.10040.4.3","dsa-with-sha1");I("1.3.14.3.2.7","desCBC");I("1.3.14.3.2.26","sha1");I("1.3.14.3.2.29","sha1WithRSASignature");I("2.16.840.1.101.3.4.2.1","sha256");I("2.16.840.1.101.3.4.2.2","sha384");I("2.16.840.1.101.3.4.2.3","sha512");I("2.16.840.1.101.3.4.2.4","sha224");I("2.16.840.1.101.3.4.2.5","sha512-224");I("2.16.840.1.101.3.4.2.6","sha512-256");I("1.2.840.113549.2.2","md2");I("1.2.840.113549.2.5","md5");I("1.2.840.113549.1.7.1","data");I("1.2.840.113549.1.7.2","signedData");I("1.2.840.113549.1.7.3","envelopedData");I("1.2.840.113549.1.7.4","signedAndEnvelopedData");I("1.2.840.113549.1.7.5","digestedData");I("1.2.840.113549.1.7.6","encryptedData");I("1.2.840.113549.1.9.1","emailAddress");I("1.2.840.113549.1.9.2","unstructuredName");I("1.2.840.113549.1.9.3","contentType");I("1.2.840.113549.1.9.4","messageDigest");I("1.2.840.113549.1.9.5","signingTime");I("1.2.840.113549.1.9.6","counterSignature");I("1.2.840.113549.1.9.7","challengePassword");I("1.2.840.113549.1.9.8","unstructuredAddress");I("1.2.840.113549.1.9.14","extensionRequest");I("1.2.840.113549.1.9.20","friendlyName");I("1.2.840.113549.1.9.21","localKeyId");I("1.2.840.113549.1.9.22.1","x509Certificate");I("1.2.840.113549.1.12.10.1.1","keyBag");I("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");I("1.2.840.113549.1.12.10.1.3","certBag");I("1.2.840.113549.1.12.10.1.4","crlBag");I("1.2.840.113549.1.12.10.1.5","secretBag");I("1.2.840.113549.1.12.10.1.6","safeContentsBag");I("1.2.840.113549.1.5.13","pkcs5PBES2");I("1.2.840.113549.1.5.12","pkcs5PBKDF2");I("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");I("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");I("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");I("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");I("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");I("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");I("1.2.840.113549.2.7","hmacWithSHA1");I("1.2.840.113549.2.8","hmacWithSHA224");I("1.2.840.113549.2.9","hmacWithSHA256");I("1.2.840.113549.2.10","hmacWithSHA384");I("1.2.840.113549.2.11","hmacWithSHA512");I("1.2.840.113549.3.7","des-EDE3-CBC");I("2.16.840.1.101.3.4.1.2","aes128-CBC");I("2.16.840.1.101.3.4.1.22","aes192-CBC");I("2.16.840.1.101.3.4.1.42","aes256-CBC");I("2.5.4.3","commonName");I("2.5.4.4","surname");I("2.5.4.5","serialNumber");I("2.5.4.6","countryName");I("2.5.4.7","localityName");I("2.5.4.8","stateOrProvinceName");I("2.5.4.9","streetAddress");I("2.5.4.10","organizationName");I("2.5.4.11","organizationalUnitName");I("2.5.4.12","title");I("2.5.4.13","description");I("2.5.4.15","businessCategory");I("2.5.4.17","postalCode");I("2.5.4.42","givenName");I("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");I("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");I("2.16.840.1.113730.1.1","nsCertType");I("2.16.840.1.113730.1.13","nsComment");at("2.5.29.1","authorityKeyIdentifier");at("2.5.29.2","keyAttributes");at("2.5.29.3","certificatePolicies");at("2.5.29.4","keyUsageRestriction");at("2.5.29.5","policyMapping");at("2.5.29.6","subtreesConstraint");at("2.5.29.7","subjectAltName");at("2.5.29.8","issuerAltName");at("2.5.29.9","subjectDirectoryAttributes");at("2.5.29.10","basicConstraints");at("2.5.29.11","nameConstraints");at("2.5.29.12","policyConstraints");at("2.5.29.13","basicConstraints");I("2.5.29.14","subjectKeyIdentifier");I("2.5.29.15","keyUsage");at("2.5.29.16","privateKeyUsagePeriod");I("2.5.29.17","subjectAltName");I("2.5.29.18","issuerAltName");I("2.5.29.19","basicConstraints");at("2.5.29.20","cRLNumber");at("2.5.29.21","cRLReason");at("2.5.29.22","expirationDate");at("2.5.29.23","instructionCode");at("2.5.29.24","invalidityDate");at("2.5.29.25","cRLDistributionPoints");at("2.5.29.26","issuingDistributionPoint");at("2.5.29.27","deltaCRLIndicator");at("2.5.29.28","issuingDistributionPoint");at("2.5.29.29","certificateIssuer");at("2.5.29.30","nameConstraints");I("2.5.29.31","cRLDistributionPoints");I("2.5.29.32","certificatePolicies");at("2.5.29.33","policyMappings");at("2.5.29.34","policyConstraints");I("2.5.29.35","authorityKeyIdentifier");at("2.5.29.36","policyConstraints");I("2.5.29.37","extKeyUsage");at("2.5.29.46","freshestCRL");at("2.5.29.54","inhibitAnyPolicy");I("1.3.6.1.4.1.11129.2.4.2","timestampList");I("1.3.6.1.5.5.7.1.1","authorityInfoAccess");I("1.3.6.1.5.5.7.3.1","serverAuth");I("1.3.6.1.5.5.7.3.2","clientAuth");I("1.3.6.1.5.5.7.3.3","codeSigning");I("1.3.6.1.5.5.7.3.4","emailProtection");I("1.3.6.1.5.5.7.3.8","timeStamping")});var Fn=Y((Lx,eu)=>{var pt=ct();At();Li();var k=eu.exports=pt.asn1=pt.asn1||{};k.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};k.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};k.create=function(t,e,r,n,i){if(pt.util.isArray(n)){for(var s=[],o=0;o<n.length;++o)n[o]!==void 0&&s.push(n[o]);n=s}var a={tagClass:t,type:e,constructed:r,composed:r||pt.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=k.copy(a)),a};k.copy=function(t,e){var r;if(pt.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(k.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:k.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};k.equals=function(t,e,r){if(pt.util.isArray(t)){if(!pt.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!k.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&k.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};k.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function Mn(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}var md=function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var s=r&127;Mn(t,e,s),n=t.getInt(s<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};k.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=pt.util.createBuffer(t));var r=t.length(),n=Ni(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function Ni(t,e,r,n){var i;Mn(t,e,2);var s=t.getByte();e--;var o=s&192,a=s&31;i=t.length();var u=md(t,e);if(e-=i-t.length(),u!==void 0&&u>e){if(n.strict){var c=new Error("Too few bytes to read ASN.1 value.");throw c.available=t.length(),c.remaining=e,c.requested=u,c}u=e}var f,l,h=(s&32)===32;if(h)if(f=[],u===void 0)for(;;){if(Mn(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}i=t.length(),f.push(Ni(t,e,r+1,n)),e-=i-t.length()}else for(;u>0;)i=t.length(),f.push(Ni(t,u,r+1,n)),e-=i-t.length(),u-=i-t.length();if(f===void 0&&o===k.Class.UNIVERSAL&&a===k.Type.BITSTRING&&(l=t.bytes(u)),f===void 0&&n.decodeBitStrings&&o===k.Class.UNIVERSAL&&a===k.Type.BITSTRING&&u>1){var g=t.read,d=e,p=0;if(a===k.Type.BITSTRING&&(Mn(t,e,1),p=t.getByte(),e--),p===0)try{i=t.length();var y={strict:!0,decodeBitStrings:!0},m=Ni(t,e,r+1,y),w=i-t.length();e-=w,a==k.Type.BITSTRING&&w++;var b=m.tagClass;w===u&&(b===k.Class.UNIVERSAL||b===k.Class.CONTEXT_SPECIFIC)&&(f=[m])}catch{}f===void 0&&(t.read=g,e=d)}if(f===void 0){if(u===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");u=e}if(a===k.Type.BMPSTRING)for(f="";u>0;u-=2)Mn(t,e,2),f+=String.fromCharCode(t.getInt16()),e-=2;else f=t.getBytes(u),e-=u}var T=l===void 0?null:{bitStringContents:l};return k.create(o,a,h,f,T)}k.toDer=function(t){var e=pt.util.createBuffer(),r=t.tagClass|t.type,n=pt.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=k.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var s=0;s<t.value.length;++s)t.value[s]!==void 0&&n.putBuffer(k.toDer(t.value[s]))}else if(t.type===k.Type.BMPSTRING)for(var s=0;s<t.value.length;++s)n.putInt16(t.value.charCodeAt(s));else t.type===k.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&!(t.value.charCodeAt(1)&128)||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var o=n.length(),a="";do a+=String.fromCharCode(o&255),o=o>>>8;while(o>0);e.putByte(a.length|128);for(var s=a.length-1;s>=0;--s)e.putByte(a.charCodeAt(s))}return e.putBuffer(n),e};k.oidToDer=function(t){var e=t.split("."),r=pt.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,s,o,a=2;a<e.length;++a){n=!0,i=[],s=parseInt(e[a],10);do o=s&127,s=s>>>7,n||(o|=128),i.push(o),n=!1;while(s>0);for(var u=i.length-1;u>=0;--u)r.putByte(i[u])}return r};k.derToOid=function(t){var e;typeof t=="string"&&(t=pt.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};k.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),s=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var u=t.charAt(10),c=10;u!=="+"&&u!=="-"&&(a=parseInt(t.substr(10,2),10),c+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(s,o,a,0),c&&(u=t.charAt(c),u==="+"||u==="-")){var f=parseInt(t.substr(c+1,2),10),l=parseInt(t.substr(c+4,2),10),h=f*60+l;h*=6e4,u==="+"?e.setTime(+e-h):e.setTime(+e+h)}return e};k.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),o=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),u=0,c=0,f=!1;t.charAt(t.length-1)==="Z"&&(f=!0);var l=t.length-5,h=t.charAt(l);if(h==="+"||h==="-"){var g=parseInt(t.substr(l+1,2),10),d=parseInt(t.substr(l+4,2),10);c=g*60+d,c*=6e4,h==="+"&&(c*=-1),f=!0}return t.charAt(14)==="."&&(u=parseFloat(t.substr(14),10)*1e3),f?(e.setUTCFullYear(r,n,i),e.setUTCHours(s,o,a,u),e.setTime(+e+c)):(e.setFullYear(r,n,i),e.setHours(s,o,a,u)),e};k.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};k.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};k.integerToDer=function(t){var e=pt.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};k.derToInteger=function(t){typeof t=="string"&&(t=pt.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};k.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&pt.util.isArray(e.value))for(var s=0,o=0;i&&o<e.value.length;++o)i=e.value[o].optional||!1,t.value[s]&&(i=k.validate(t.value[s],e.value[o],r,n),i?++s:e.value[o].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var a;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var u=t.bitStringContents.charCodeAt(0);if(u!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var tu=/[^\\u0000-\\u00ff]/;k.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",s=0;s<e*r;++s)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case k.Class.UNIVERSAL:n+="Universal:";break;case k.Class.APPLICATION:n+="Application:";break;case k.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case k.Class.PRIVATE:n+="Private:";break}if(t.tagClass===k.Class.UNIVERSAL)switch(n+=t.type,t.type){case k.Type.NONE:n+=" (None)";break;case k.Type.BOOLEAN:n+=" (Boolean)";break;case k.Type.INTEGER:n+=" (Integer)";break;case k.Type.BITSTRING:n+=" (Bit string)";break;case k.Type.OCTETSTRING:n+=" (Octet string)";break;case k.Type.NULL:n+=" (Null)";break;case k.Type.OID:n+=" (Object Identifier)";break;case k.Type.ODESC:n+=" (Object Descriptor)";break;case k.Type.EXTERNAL:n+=" (External or Instance of)";break;case k.Type.REAL:n+=" (Real)";break;case k.Type.ENUMERATED:n+=" (Enumerated)";break;case k.Type.EMBEDDED:n+=" (Embedded PDV)";break;case k.Type.UTF8:n+=" (UTF8)";break;case k.Type.ROID:n+=" (Relative Object Identifier)";break;case k.Type.SEQUENCE:n+=" (Sequence)";break;case k.Type.SET:n+=" (Set)";break;case k.Type.PRINTABLESTRING:n+=" (Printable String)";break;case k.Type.IA5String:n+=" (IA5String (ASCII))";break;case k.Type.UTCTIME:n+=" (UTC time)";break;case k.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case k.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var o=0,a="",s=0;s<t.value.length;++s)t.value[s]!==void 0&&(o+=1,a+=k.prettyPrint(t.value[s],e+1,r),s+1<t.value.length&&(a+=","));n+=i+"Sub values: "+o+a}else{if(n+=i+"Value: ",t.type===k.Type.OID){var u=k.derToOid(t.value);n+=u,pt.pki&&pt.pki.oids&&u in pt.pki.oids&&(n+=" ("+pt.pki.oids[u]+") ")}if(t.type===k.Type.INTEGER)try{n+=k.derToInteger(t.value)}catch{n+="0x"+pt.util.bytesToHex(t.value)}else if(t.type===k.Type.BITSTRING){if(t.value.length>1?n+="0x"+pt.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var c=t.value.charCodeAt(0);c==1?n+=" (1 unused bit shown)":c>1&&(n+=" ("+c+" unused bits shown)")}}else if(t.type===k.Type.OCTETSTRING)tu.test(t.value)||(n+="("+t.value+") "),n+="0x"+pt.util.bytesToHex(t.value);else if(t.type===k.Type.UTF8)try{n+=pt.util.decodeUtf8(t.value)}catch(f){if(f.message==="URI malformed")n+="0x"+pt.util.bytesToHex(t.value)+" (malformed UTF8)";else throw f}else t.type===k.Type.PRINTABLESTRING||t.type===k.Type.IA5String?n+=t.value:tu.test(t.value)?n+="0x"+pt.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var iu=Y((Nx,nu)=>{var xt=ct();fo();ho();At();nu.exports=xt.des=xt.des||{};xt.des.startEncrypting=function(t,e,r,n){var i=Di({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};xt.des.createEncryptionCipher=function(t,e){return Di({key:t,output:null,decrypt:!1,mode:e})};xt.des.startDecrypting=function(t,e,r,n){var i=Di({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};xt.des.createDecryptionCipher=function(t,e){return Di({key:t,output:null,decrypt:!0,mode:e})};xt.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(n,i){return ru(r._keys,n,i,!1)},decrypt:function(n,i){return ru(r._keys,n,i,!0)}}}),r._init=!1};xt.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=xt.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=Ad(e),this._init=!0}};Ce("DES-ECB",xt.cipher.modes.ecb);Ce("DES-CBC",xt.cipher.modes.cbc);Ce("DES-CFB",xt.cipher.modes.cfb);Ce("DES-OFB",xt.cipher.modes.ofb);Ce("DES-CTR",xt.cipher.modes.ctr);Ce("3DES-ECB",xt.cipher.modes.ecb);Ce("3DES-CBC",xt.cipher.modes.cbc);Ce("3DES-CFB",xt.cipher.modes.cfb);Ce("3DES-OFB",xt.cipher.modes.ofb);Ce("3DES-CTR",xt.cipher.modes.ctr);function Ce(t,e){var r=function(){return new xt.des.Algorithm(t,e)};xt.cipher.registerAlgorithm(t,r)}var xd=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],bd=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],vd=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],wd=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],Ed=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],Sd=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],Bd=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],Cd=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function Ad(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],l=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],g=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],d=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],p=t.length()>8?3:1,y=[],m=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],w=0,b,T=0;T<p;T++){var E=t.getInt32(),S=t.getInt32();b=(E>>>4^S)&252645135,S^=b,E^=b<<4,b=(S>>>-16^E)&65535,E^=b,S^=b<<-16,b=(E>>>2^S)&858993459,S^=b,E^=b<<2,b=(S>>>-16^E)&65535,E^=b,S^=b<<-16,b=(E>>>1^S)&1431655765,S^=b,E^=b<<1,b=(S>>>8^E)&16711935,E^=b,S^=b<<8,b=(E>>>1^S)&1431655765,S^=b,E^=b<<1,b=E<<8|S>>>20&240,E=S<<24|S<<8&16711680|S>>>8&65280|S>>>24&240,S=b;for(var L=0;L<m.length;++L){m[L]?(E=E<<2|E>>>26,S=S<<2|S>>>26):(E=E<<1|E>>>27,S=S<<1|S>>>27),E&=-15,S&=-15;var N=e[E>>>28]|r[E>>>24&15]|n[E>>>20&15]|i[E>>>16&15]|s[E>>>12&15]|o[E>>>8&15]|a[E>>>4&15],G=u[S>>>28]|c[S>>>24&15]|f[S>>>20&15]|l[S>>>16&15]|h[S>>>12&15]|g[S>>>8&15]|d[S>>>4&15];b=(G>>>16^N)&65535,y[w++]=N^b,y[w++]=G^b<<16}}return y}function ru(t,e,r,n){var i=t.length===32?3:9,s;i===3?s=n?[30,-2,-2]:[0,32,2]:s=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var o,a=e[0],u=e[1];o=(a>>>4^u)&252645135,u^=o,a^=o<<4,o=(a>>>16^u)&65535,u^=o,a^=o<<16,o=(u>>>2^a)&858993459,a^=o,u^=o<<2,o=(u>>>8^a)&16711935,a^=o,u^=o<<8,o=(a>>>1^u)&1431655765,u^=o,a^=o<<1,a=a<<1|a>>>31,u=u<<1|u>>>31;for(var c=0;c<i;c+=3){for(var f=s[c+1],l=s[c+2],h=s[c];h!=f;h+=l){var g=u^t[h],d=(u>>>4|u<<28)^t[h+1];o=a,a=u,u=o^(bd[g>>>24&63]|wd[g>>>16&63]|Sd[g>>>8&63]|Cd[g&63]|xd[d>>>24&63]|vd[d>>>16&63]|Ed[d>>>8&63]|Bd[d&63])}o=a,a=u,u=o}a=a>>>1|a<<31,u=u>>>1|u<<31,o=(a>>>1^u)&1431655765,u^=o,a^=o<<1,o=(u>>>8^a)&16711935,a^=o,u^=o<<8,o=(u>>>2^a)&858993459,a^=o,u^=o<<2,o=(a>>>16^u)&65535,u^=o,a^=o<<16,o=(a>>>4^u)&252645135,u^=o,a^=o<<4,r[0]=a,r[1]=u}function Di(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=xt.cipher.createDecipher(r,t.key):n=xt.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(s,o){var a=null;o instanceof xt.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,i.call(n,o)},n}});var Sr=Y((Dx,su)=>{var Pi=ct();su.exports=Pi.md=Pi.md||{};Pi.md.algorithms=Pi.md.algorithms||{}});var au=Y((Px,ou)=>{var Me=ct();Sr();At();var _d=ou.exports=Me.hmac=Me.hmac||{};_d.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(s,o){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in Me.md.algorithms)e=Me.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else e=s;if(o===null)o=t;else{if(typeof o=="string")o=Me.util.createBuffer(o);else if(Me.util.isArray(o)){var a=o;o=Me.util.createBuffer();for(var u=0;u<a.length;++u)o.putByte(a[u])}var c=o.length();c>e.blockLength&&(e.start(),e.update(o.bytes()),o=e.digest()),r=Me.util.createBuffer(),n=Me.util.createBuffer(),c=o.length();for(var u=0;u<c;++u){var a=o.at(u);r.putByte(54^a),n.putByte(92^a)}if(c<e.blockLength)for(var a=e.blockLength-c,u=0;u<a;++u)r.putByte(54),n.putByte(92);t=o,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(s){e.update(s)},i.getMac=function(){var s=e.digest().bytes();return e.start(),e.update(n),e.update(s),e.digest()},i.digest=i.getMac,i}});var ki=Y(()=>{});var bo=Y((Ox,uu)=>{var jt=ct();au();Sr();At();var Id=jt.pkcs5=jt.pkcs5||{},Fe;jt.util.isNodejs&&!jt.options.usePureJavaScript&&(Fe=ki());uu.exports=jt.pbkdf2=Id.pbkdf2=function(t,e,r,n,i,s){if(typeof i=="function"&&(s=i,i=null),jt.util.isNodejs&&!jt.options.usePureJavaScript&&Fe.pbkdf2&&(i===null||typeof i!="object")&&(Fe.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),s?Fe.pbkdf2Sync.length===4?Fe.pbkdf2(t,e,r,n,function(b,T){if(b)return s(b);s(null,T.toString("binary"))}):Fe.pbkdf2(t,e,r,n,i,function(b,T){if(b)return s(b);s(null,T.toString("binary"))}):Fe.pbkdf2Sync.length===4?Fe.pbkdf2Sync(t,e,r,n).toString("binary"):Fe.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in jt.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=jt.md[i].create()}var o=i.digestLength;if(n>4294967295*o){var a=new Error("Derived key is too long.");if(s)return s(a);throw a}var u=Math.ceil(n/o),c=n-(u-1)*o,f=jt.hmac.create();f.start(i,t);var l="",h,g,d;if(!s){for(var p=1;p<=u;++p){f.start(null,null),f.update(e),f.update(jt.util.int32ToBytes(p)),h=d=f.digest().getBytes();for(var y=2;y<=r;++y)f.start(null,null),f.update(d),g=f.digest().getBytes(),h=jt.util.xorBytes(h,g,o),d=g;l+=p<u?h:h.substr(0,c)}return l}var p=1,y;function m(){if(p>u)return s(null,l);f.start(null,null),f.update(e),f.update(jt.util.int32ToBytes(p)),h=d=f.digest().getBytes(),y=2,w()}function w(){if(y<=r)return f.start(null,null),f.update(d),g=f.digest().getBytes(),h=jt.util.xorBytes(h,g,o),d=g,++y,jt.util.setImmediate(w);l+=p<u?h:h.substr(0,c),++p,m()}m()}});var lu=Y((Kx,fu)=>{var Oi=ct();At();var cu=fu.exports=Oi.pem=Oi.pem||{};cu.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=Ui(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=Ui(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=Ui(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=Ui(t.headers[i]);return t.procType&&(r+=`\r
`),r+=Oi.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};cu.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,s;s=r.exec(t),!!s;){var o=s[1];o==="NEW CERTIFICATE REQUEST"&&(o="CERTIFICATE REQUEST");var a={type:o,procType:null,contentDomain:null,dekInfo:null,headers:[],body:Oi.util.decode64(s[3])};if(e.push(a),!!s[2]){for(var u=s[2].split(i),c=0;s&&c<u.length;){for(var f=u[c].replace(/\s+$/,""),l=c+1;l<u.length;++l){var h=u[l];if(!/\s/.test(h[0]))break;f+=h,c=l}if(s=f.match(n),s){for(var g={name:s[1],values:[]},d=s[2].split(","),p=0;p<d.length;++p)g.values.push(Td(d[p]));if(a.procType)if(!a.contentDomain&&g.name==="Content-Domain")a.contentDomain=d[0]||"";else if(!a.dekInfo&&g.name==="DEK-Info"){if(g.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:d[0],parameters:d[1]||null}}else a.headers.push(g);else{if(g.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(g.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:d[0],type:d[1]}}}++c}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function Ui(t){for(var e=t.name+": ",r=[],n=function(u,c){return" "+c},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var s=0,o=-1,i=0;i<e.length;++i,++s)if(s>65&&o!==-1){var a=e[o];a===","?(++o,e=e.substr(0,o)+`\r
 `+e.substr(o)):e=e.substr(0,o)+`\r
`+a+e.substr(o+1),s=i-o-1,o=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(o=i);return e}function Td(t){return t.replace(/^\s+/,"")}});var mu=Y((Mx,gu)=>{var Ae=ct();Sr();At();var du=gu.exports=Ae.sha256=Ae.sha256||{};Ae.md.sha256=Ae.md.algorithms.sha256=du;du.create=function(){pu||Rd();var t=null,e=Ae.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return e=Ae.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=Ae.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return e.putBytes(i),hu(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Ae.util.createBuffer();i.putBytes(e.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(vo.substr(0,n.blockLength-o));for(var a,u,c=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)a=n.fullMessageLength[f+1]*8,u=a/4294967296>>>0,c+=u,i.putInt32(c>>>0),c=a>>>0;i.putInt32(c);var l={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};hu(l,r,i);var h=Ae.util.createBuffer();return h.putInt32(l.h0),h.putInt32(l.h1),h.putInt32(l.h2),h.putInt32(l.h3),h.putInt32(l.h4),h.putInt32(l.h5),h.putInt32(l.h6),h.putInt32(l.h7),h},n};var vo=null,pu=!1,yu=null;function Rd(){vo=String.fromCharCode(128),vo+=Ae.util.fillString(String.fromCharCode(0),64),yu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],pu=!0}function hu(t,e,r){for(var n,i,s,o,a,u,c,f,l,h,g,d,p,y,m,w=r.length();w>=64;){for(c=0;c<16;++c)e[c]=r.getInt32();for(;c<64;++c)n=e[c-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[c-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[c]=n+e[c-7]+i+e[c-16]|0;for(f=t.h0,l=t.h1,h=t.h2,g=t.h3,d=t.h4,p=t.h5,y=t.h6,m=t.h7,c=0;c<64;++c)o=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7),a=y^d&(p^y),s=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),u=f&l|h&(f^l),n=m+o+a+yu[c]+e[c],i=s+u,m=y,y=p,p=d,d=g+n>>>0,g=h,h=l,l=f,f=n+i>>>0;t.h0=t.h0+f|0,t.h1=t.h1+l|0,t.h2=t.h2+h|0,t.h3=t.h3+g|0,t.h4=t.h4+d|0,t.h5=t.h5+p|0,t.h6=t.h6+y|0,t.h7=t.h7+m|0,w-=64}}});var bu=Y((Fx,xu)=>{var _e=ct();At();var Ki=null;_e.util.isNodejs&&!_e.options.usePureJavaScript&&!process.versions["node-webkit"]&&(Ki=ki());var Ld=xu.exports=_e.prng=_e.prng||{};Ld.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(c,f){if(!f)return e.generateSync(c);var l=e.plugin.cipher,h=e.plugin.increment,g=e.plugin.formatKey,d=e.plugin.formatSeed,p=_e.util.createBuffer();e.key=null,y();function y(m){if(m)return f(m);if(p.length()>=c)return f(null,p.getBytes(c));if(e.generated>1048575&&(e.key=null),e.key===null)return _e.util.nextTick(function(){s(y)});var w=l(e.key,e.seed);e.generated+=w.length,p.putBytes(w),e.key=g(l(e.key,h(e.seed))),e.seed=d(l(e.key,e.seed)),_e.util.setImmediate(y)}},e.generateSync=function(c){var f=e.plugin.cipher,l=e.plugin.increment,h=e.plugin.formatKey,g=e.plugin.formatSeed;e.key=null;for(var d=_e.util.createBuffer();d.length()<c;){e.generated>1048575&&(e.key=null),e.key===null&&o();var p=f(e.key,e.seed);e.generated+=p.length,d.putBytes(p),e.key=h(f(e.key,l(e.seed))),e.seed=g(f(e.key,e.seed))}return d.getBytes(c)};function s(c){if(e.pools[0].messageLength>=32)return a(),c();var f=32-e.pools[0].messageLength<<5;e.seedFile(f,function(l,h){if(l)return c(l);e.collect(h),a(),c()})}function o(){if(e.pools[0].messageLength>=32)return a();var c=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(c)),a()}function a(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var c=e.plugin.md.create();c.update(e.keyBytes);for(var f=1,l=0;l<32;++l)e.reseeds%f===0&&(c.update(e.pools[l].digest().getBytes()),e.pools[l].start()),f=f<<1;e.keyBytes=c.digest().getBytes(),c.start(),c.update(e.keyBytes);var h=c.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(h),e.generated=0}function u(c){var f=null,l=_e.util.globalScope,h=l.crypto||l.msCrypto;h&&h.getRandomValues&&(f=function(E){return h.getRandomValues(E)});var g=_e.util.createBuffer();if(f)for(;g.length()<c;){var d=Math.max(1,Math.min(c-g.length(),65536)/4),p=new Uint32Array(Math.floor(d));try{f(p);for(var y=0;y<p.length;++y)g.putInt32(p[y])}catch(E){if(!(typeof QuotaExceededError<"u"&&E instanceof QuotaExceededError))throw E}}if(g.length()<c)for(var m,w,b,T=Math.floor(Math.random()*65536);g.length()<c;){w=16807*(T&65535),m=16807*(T>>16),w+=(m&32767)<<16,w+=m>>15,w=(w&2147483647)+(w>>31),T=w&4294967295;for(var y=0;y<3;++y)b=T>>>(y<<3),b^=Math.floor(Math.random()*256),g.putByte(b&255)}return g.getBytes(c)}return Ki?(e.seedFile=function(c,f){Ki.randomBytes(c,function(l,h){if(l)return f(l);f(null,h.toString())})},e.seedFileSync=function(c){return Ki.randomBytes(c).toString()}):(e.seedFile=function(c,f){try{f(null,u(c))}catch(l){f(l)}},e.seedFileSync=u),e.collect=function(c){for(var f=c.length,l=0;l<f;++l)e.pools[e.pool].update(c.substr(l,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(c,f){for(var l="",h=0;h<f;h+=8)l+=String.fromCharCode(c>>h&255);e.collect(l)},e.registerWorker=function(c){if(c===self)e.seedFile=function(l,h){function g(d){var p=d.data;p.forge&&p.forge.prng&&(self.removeEventListener("message",g),h(p.forge.prng.err,p.forge.prng.bytes))}self.addEventListener("message",g),self.postMessage({forge:{prng:{needed:l}}})};else{var f=function(l){var h=l.data;h.forge&&h.forge.prng&&e.seedFile(h.forge.prng.needed,function(g,d){c.postMessage({forge:{prng:{err:g,bytes:d}}})})};c.addEventListener("message",f)}},e}});var qn=Y((qx,wo)=>{var Ft=ct();Ti();mu();bu();At();(function(){if(Ft.random&&Ft.random.getBytes){wo.exports=Ft.random;return}(function(t){var e={},r=new Array(4),n=Ft.util.createBuffer();e.formatKey=function(l){var h=Ft.util.createBuffer(l);return l=new Array(4),l[0]=h.getInt32(),l[1]=h.getInt32(),l[2]=h.getInt32(),l[3]=h.getInt32(),Ft.aes._expandKey(l,!1)},e.formatSeed=function(l){var h=Ft.util.createBuffer(l);return l=new Array(4),l[0]=h.getInt32(),l[1]=h.getInt32(),l[2]=h.getInt32(),l[3]=h.getInt32(),l},e.cipher=function(l,h){return Ft.aes._updateBlock(l,h,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(l){return++l[3],l},e.md=Ft.md.sha256;function i(){var l=Ft.prng.create(e);return l.getBytes=function(h,g){return l.generate(h,g)},l.getBytesSync=function(h){return l.generate(h)},l}var s=i(),o=null,a=Ft.util.globalScope,u=a.crypto||a.msCrypto;if(u&&u.getRandomValues&&(o=function(l){return u.getRandomValues(l)}),Ft.options.usePureJavaScript||!Ft.util.isNodejs&&!o){if(typeof window>"u"||window.document,s.collectInt(+new Date,32),typeof navigator<"u"){var c="";for(var f in navigator)try{typeof navigator[f]=="string"&&(c+=navigator[f])}catch{}s.collect(c),c=null}t&&(t().mousemove(function(l){s.collectInt(l.clientX,16),s.collectInt(l.clientY,16)}),t().keypress(function(l){s.collectInt(l.charCode,8)}))}if(!Ft.random)Ft.random=s;else for(var f in s)Ft.random[f]=s[f];Ft.random.createInstance=i,wo.exports=Ft.random})(typeof jQuery<"u"?jQuery:null)})()});var Su=Y((Vx,Eu)=>{var te=ct();At();var Eo=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],vu=[1,2,3,5],Nd=function(t,e){return t<<e&65535|(t&65535)>>16-e},Dd=function(t,e){return(t&65535)>>e|t<<16-e&65535};Eu.exports=te.rc2=te.rc2||{};te.rc2.expandKey=function(t,e){typeof t=="string"&&(t=te.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,s=Math.ceil(i/8),o=255>>(i&7),a;for(a=n;a<128;a++)r.putByte(Eo[r.at(a-1)+r.at(a-n)&255]);for(r.setAt(128-s,Eo[r.at(128-s)&o]),a=127-s;a>=0;a--)r.setAt(a,Eo[r.at(a+1)^r.at(a+s)]);return r};var wu=function(t,e,r){var n=!1,i=null,s=null,o=null,a,u,c,f,l=[];for(t=te.rc2.expandKey(t,e),c=0;c<64;c++)l.push(t.getInt16Le());r?(a=function(d){for(c=0;c<4;c++)d[c]+=l[f]+(d[(c+3)%4]&d[(c+2)%4])+(~d[(c+3)%4]&d[(c+1)%4]),d[c]=Nd(d[c],vu[c]),f++},u=function(d){for(c=0;c<4;c++)d[c]+=l[d[(c+3)%4]&63]}):(a=function(d){for(c=3;c>=0;c--)d[c]=Dd(d[c],vu[c]),d[c]-=l[f]+(d[(c+3)%4]&d[(c+2)%4])+(~d[(c+3)%4]&d[(c+1)%4]),f--},u=function(d){for(c=3;c>=0;c--)d[c]-=l[d[(c+3)%4]&63]});var h=function(d){var p=[];for(c=0;c<4;c++){var y=i.getInt16Le();o!==null&&(r?y^=o.getInt16Le():o.putInt16Le(y)),p.push(y&65535)}f=r?0:63;for(var m=0;m<d.length;m++)for(var w=0;w<d[m][0];w++)d[m][1](p);for(c=0;c<4;c++)o!==null&&(r?o.putInt16Le(p[c]):p[c]^=o.getInt16Le()),s.putInt16Le(p[c])},g=null;return g={start:function(d,p){d&&typeof d=="string"&&(d=te.util.createBuffer(d)),n=!1,i=te.util.createBuffer(),s=p||new te.util.createBuffer,o=d,g.output=s},update:function(d){for(n||i.putBuffer(d);i.length()>=8;)h([[5,a],[1,u],[6,a],[1,u],[5,a]])},finish:function(d){var p=!0;if(r)if(d)p=d(8,i,!r);else{var y=i.length()===8?8:8-i.length();i.fillWithByte(y,y)}if(p&&(n=!0,g.update()),!r&&(p=i.length()===0,p))if(d)p=d(8,s,!r);else{var m=s.length(),w=s.at(m-1);w>m?p=!1:s.truncate(w)}return p}},g};te.rc2.startEncrypting=function(t,e,r){var n=te.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};te.rc2.createEncryptionCipher=function(t,e){return wu(t,e,!0)};te.rc2.startDecrypting=function(t,e,r){var n=te.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};te.rc2.createDecryptionCipher=function(t,e){return wu(t,e,!1)}});var qi=Y((Hx,Lu)=>{var So=ct();Lu.exports=So.jsbn=So.jsbn||{};var qe,Pd=0xdeadbeefcafe,Bu=(Pd&16777215)==15715070;function A(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}So.jsbn.BigInteger=A;function nt(){return new A(null)}function kd(t,e,r,n,i,s){for(;--s>=0;){var o=e*this.data[t++]+r.data[n]+i;i=Math.floor(o/67108864),r.data[n++]=o&67108863}return i}function Ud(t,e,r,n,i,s){for(var o=e&32767,a=e>>15;--s>=0;){var u=this.data[t]&32767,c=this.data[t++]>>15,f=a*u+c*o;u=o*u+((f&32767)<<15)+r.data[n]+(i&1073741823),i=(u>>>30)+(f>>>15)+a*c+(i>>>30),r.data[n++]=u&1073741823}return i}function Cu(t,e,r,n,i,s){for(var o=e&16383,a=e>>14;--s>=0;){var u=this.data[t]&16383,c=this.data[t++]>>14,f=a*u+c*o;u=o*u+((f&16383)<<14)+r.data[n]+i,i=(u>>28)+(f>>14)+a*c,r.data[n++]=u&268435455}return i}typeof navigator>"u"?(A.prototype.am=Cu,qe=28):Bu&&navigator.appName=="Microsoft Internet Explorer"?(A.prototype.am=Ud,qe=30):Bu&&navigator.appName!="Netscape"?(A.prototype.am=kd,qe=26):(A.prototype.am=Cu,qe=28);A.prototype.DB=qe;A.prototype.DM=(1<<qe)-1;A.prototype.DV=1<<qe;var Bo=52;A.prototype.FV=Math.pow(2,Bo);A.prototype.F1=Bo-qe;A.prototype.F2=2*qe-Bo;var Od="0123456789abcdefghijklmnopqrstuvwxyz",Mi=new Array,rn,ae;rn="0".charCodeAt(0);for(ae=0;ae<=9;++ae)Mi[rn++]=ae;rn="a".charCodeAt(0);for(ae=10;ae<36;++ae)Mi[rn++]=ae;rn="A".charCodeAt(0);for(ae=10;ae<36;++ae)Mi[rn++]=ae;function Au(t){return Od.charAt(t)}function _u(t,e){var r=Mi[t.charCodeAt(e)];return r??-1}function Kd(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function Md(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function ir(t){var e=nt();return e.fromInt(t),e}function Fd(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,s=0;--n>=0;){var o=r==8?t[n]&255:_u(t,n);if(o<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,s==0?this.data[this.t++]=o:s+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&t[0]&128&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&A.ZERO.subTo(this,this)}function qd(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function Vd(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(n=this.data[o]>>a)>0&&(i=!0,s=Au(n));o>=0;)a<e?(n=(this.data[o]&(1<<a)-1)<<e-a,n|=this.data[--o]>>(a+=this.DB-e)):(n=this.data[o]>>(a-=e)&r,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(s+=Au(n));return i?s:"0"}function Hd(){var t=nt();return A.ZERO.subTo(this,t),t}function zd(){return this.s<0?this.negate():this}function Gd(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function Fi(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function Wd(){return this.t<=0?0:this.DB*(this.t-1)+Fi(this.data[this.t-1]^this.s&this.DM)}function Yd(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function Qd(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function $d(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,s=Math.floor(t/this.DB),o=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)e.data[a+s+1]=this.data[a]>>n|o,o=(this.data[a]&i)<<r;for(a=s-1;a>=0;--a)e.data[a]=0;e.data[s]=o,e.t=this.t+s+1,e.s=this.s,e.clamp()}function Zd(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,s=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)e.data[o-r-1]|=(this.data[o]&s)<<i,e.data[o-r]=this.data[o]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&s)<<i),e.t=this.t-r,e.clamp()}function Xd(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function Jd(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&A.ZERO.subTo(e,e)}function jd(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function tp(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=nt());var s=nt(),o=this.s,a=t.s,u=this.DB-Fi(n.data[n.t-1]);u>0?(n.lShiftTo(u,s),i.lShiftTo(u,r)):(n.copyTo(s),i.copyTo(r));var c=s.t,f=s.data[c-1];if(f!=0){var l=f*(1<<this.F1)+(c>1?s.data[c-2]>>this.F2:0),h=this.FV/l,g=(1<<this.F1)/l,d=1<<this.F2,p=r.t,y=p-c,m=e??nt();for(s.dlShiftTo(y,m),r.compareTo(m)>=0&&(r.data[r.t++]=1,r.subTo(m,r)),A.ONE.dlShiftTo(c,m),m.subTo(s,s);s.t<c;)s.data[s.t++]=0;for(;--y>=0;){var w=r.data[--p]==f?this.DM:Math.floor(r.data[p]*h+(r.data[p-1]+d)*g);if((r.data[p]+=s.am(0,w,r,y,0,c))<w)for(s.dlShiftTo(y,m),r.subTo(m,r);r.data[p]<--w;)r.subTo(m,r)}e!=null&&(r.drShiftTo(c,e),o!=a&&A.ZERO.subTo(e,e)),r.t=c,r.clamp(),u>0&&r.rShiftTo(u,r),o<0&&A.ZERO.subTo(r,r)}}}function ep(t){var e=nt();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(A.ZERO)>0&&t.subTo(e,e),e}function Br(t){this.m=t}function rp(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function np(t){return t}function ip(t){t.divRemTo(this.m,null,t)}function sp(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function op(t,e){t.squareTo(e),this.reduce(e)}Br.prototype.convert=rp;Br.prototype.revert=np;Br.prototype.reduce=ip;Br.prototype.mulTo=sp;Br.prototype.sqrTo=op;function ap(){if(this.t<1)return 0;var t=this.data[0];if(!(t&1))return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Cr(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function up(t){var e=nt();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(A.ZERO)>0&&this.m.subTo(e,e),e}function cp(t){var e=nt();return t.copyTo(e),this.reduce(e),e}function fp(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function lp(t,e){t.squareTo(e),this.reduce(e)}function hp(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Cr.prototype.convert=up;Cr.prototype.revert=cp;Cr.prototype.reduce=fp;Cr.prototype.mulTo=hp;Cr.prototype.sqrTo=lp;function dp(){return(this.t>0?this.data[0]&1:this.s)==0}function pp(t,e){if(t>4294967295||t<1)return A.ONE;var r=nt(),n=nt(),i=e.convert(this),s=Fi(t)-1;for(i.copyTo(r);--s>=0;)if(e.sqrTo(r,n),(t&1<<s)>0)e.mulTo(n,i,r);else{var o=r;r=n,n=o}return e.revert(r)}function yp(t,e){var r;return t<256||e.isEven()?r=new Br(e):r=new Cr(e),this.exp(t,r)}A.prototype.copyTo=Kd;A.prototype.fromInt=Md;A.prototype.fromString=Fd;A.prototype.clamp=qd;A.prototype.dlShiftTo=Yd;A.prototype.drShiftTo=Qd;A.prototype.lShiftTo=$d;A.prototype.rShiftTo=Zd;A.prototype.subTo=Xd;A.prototype.multiplyTo=Jd;A.prototype.squareTo=jd;A.prototype.divRemTo=tp;A.prototype.invDigit=ap;A.prototype.isEven=dp;A.prototype.exp=pp;A.prototype.toString=Vd;A.prototype.negate=Hd;A.prototype.abs=zd;A.prototype.compareTo=Gd;A.prototype.bitLength=Wd;A.prototype.mod=ep;A.prototype.modPowInt=yp;A.ZERO=ir(0);A.ONE=ir(1);function gp(){var t=nt();return this.copyTo(t),t}function mp(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function xp(){return this.t==0?this.s:this.data[0]<<24>>24}function bp(){return this.t==0?this.s:this.data[0]<<16>>16}function vp(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function wp(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function Ep(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=ir(r),i=nt(),s=nt(),o="";for(this.divRemTo(n,i,s);i.signum()>0;)o=(r+s.intValue()).toString(t).substr(1)+o,i.divRemTo(n,i,s);return s.intValue().toString(t)+o}function Sp(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,s=0,o=0,a=0;a<t.length;++a){var u=_u(t,a);if(u<0){t.charAt(a)=="-"&&this.signum()==0&&(i=!0);continue}o=e*o+u,++s>=r&&(this.dMultiply(n),this.dAddOffset(o,0),s=0,o=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(o,0)),i&&A.ZERO.subTo(this,this)}function Bp(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(A.ONE.shiftLeft(t-1),Co,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(A.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function Cp(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function Ap(t){return this.compareTo(t)==0}function _p(t){return this.compareTo(t)<0?this:t}function Ip(t){return this.compareTo(t)>0?this:t}function Tp(t,e,r){var n,i,s=Math.min(t.t,this.t);for(n=0;n<s;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=s;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function Rp(t,e){return t&e}function Lp(t){var e=nt();return this.bitwiseTo(t,Rp,e),e}function Co(t,e){return t|e}function Np(t){var e=nt();return this.bitwiseTo(t,Co,e),e}function Iu(t,e){return t^e}function Dp(t){var e=nt();return this.bitwiseTo(t,Iu,e),e}function Tu(t,e){return t&~e}function Pp(t){var e=nt();return this.bitwiseTo(t,Tu,e),e}function kp(){for(var t=nt(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function Up(t){var e=nt();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function Op(t){var e=nt();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function Kp(t){if(t==0)return-1;var e=0;return t&65535||(t>>=16,e+=16),t&255||(t>>=8,e+=8),t&15||(t>>=4,e+=4),t&3||(t>>=2,e+=2),t&1||++e,e}function Mp(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+Kp(this.data[t]);return this.s<0?this.t*this.DB:-1}function Fp(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function qp(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=Fp(this.data[r]^e);return t}function Vp(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function Hp(t,e){var r=A.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function zp(t){return this.changeBit(t,Co)}function Gp(t){return this.changeBit(t,Tu)}function Wp(t){return this.changeBit(t,Iu)}function Yp(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function Qp(t){var e=nt();return this.addTo(t,e),e}function $p(t){var e=nt();return this.subTo(t,e),e}function Zp(t){var e=nt();return this.multiplyTo(t,e),e}function Xp(t){var e=nt();return this.divRemTo(t,e,null),e}function Jp(t){var e=nt();return this.divRemTo(t,null,e),e}function jp(t){var e=nt(),r=nt();return this.divRemTo(t,e,r),new Array(e,r)}function ty(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function ey(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function Vn(){}function Ru(t){return t}function ry(t,e,r){t.multiplyTo(e,r)}function ny(t,e){t.squareTo(e)}Vn.prototype.convert=Ru;Vn.prototype.revert=Ru;Vn.prototype.mulTo=ry;Vn.prototype.sqrTo=ny;function iy(t){return this.exp(t,new Vn)}function sy(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function oy(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function nn(t){this.r2=nt(),this.q3=nt(),A.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function ay(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=nt();return t.copyTo(e),this.reduce(e),e}function uy(t){return t}function cy(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function fy(t,e){t.squareTo(e),this.reduce(e)}function ly(t,e,r){t.multiplyTo(e,r),this.reduce(r)}nn.prototype.convert=ay;nn.prototype.revert=uy;nn.prototype.reduce=cy;nn.prototype.mulTo=ly;nn.prototype.sqrTo=fy;function hy(t,e){var r=t.bitLength(),n,i=ir(1),s;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?s=new Br(e):e.isEven()?s=new nn(e):s=new Cr(e);var o=new Array,a=3,u=n-1,c=(1<<n)-1;if(o[1]=s.convert(this),n>1){var f=nt();for(s.sqrTo(o[1],f);a<=c;)o[a]=nt(),s.mulTo(f,o[a-2],o[a]),a+=2}var l=t.t-1,h,g=!0,d=nt(),p;for(r=Fi(t.data[l])-1;l>=0;){for(r>=u?h=t.data[l]>>r-u&c:(h=(t.data[l]&(1<<r+1)-1)<<u-r,l>0&&(h|=t.data[l-1]>>this.DB+r-u)),a=n;!(h&1);)h>>=1,--a;if((r-=a)<0&&(r+=this.DB,--l),g)o[h].copyTo(i),g=!1;else{for(;a>1;)s.sqrTo(i,d),s.sqrTo(d,i),a-=2;a>0?s.sqrTo(i,d):(p=i,i=d,d=p),s.mulTo(d,o[h],i)}for(;l>=0&&!(t.data[l]&1<<r);)s.sqrTo(i,d),p=i,i=d,d=p,--r<0&&(r=this.DB-1,--l)}return s.revert(i)}function dy(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(i<s&&(s=i),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function py(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function yy(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return A.ZERO;for(var r=t.clone(),n=this.clone(),i=ir(1),s=ir(0),o=ir(0),a=ir(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!s.isEven())&&(i.addTo(this,i),s.subTo(t,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?((!o.isEven()||!a.isEven())&&(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(o,i),s.subTo(a,s)):(n.subTo(r,n),e&&o.subTo(i,o),a.subTo(s,a))}if(n.compareTo(A.ONE)!=0)return A.ZERO;if(a.compareTo(t)>=0)return a.subtract(t);if(a.signum()<0)a.addTo(t,a);else return a;return a.signum()<0?a.add(t):a}var pe=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],gy=(1<<26)/pe[pe.length-1];function my(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=pe[pe.length-1]){for(e=0;e<pe.length;++e)if(r.data[0]==pe[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<pe.length;){for(var n=pe[e],i=e+1;i<pe.length&&n<gy;)n*=pe[i++];for(n=r.modInt(n);e<i;)if(n%pe[e++]==0)return!1}return r.millerRabin(t)}function xy(t){var e=this.subtract(A.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=by(),s,o=0;o<t;++o){do s=new A(this.bitLength(),i);while(s.compareTo(A.ONE)<=0||s.compareTo(e)>=0);var a=s.modPow(n,this);if(a.compareTo(A.ONE)!=0&&a.compareTo(e)!=0){for(var u=1;u++<r&&a.compareTo(e)!=0;)if(a=a.modPowInt(2,this),a.compareTo(A.ONE)==0)return!1;if(a.compareTo(e)!=0)return!1}}return!0}function by(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}A.prototype.chunkSize=vp;A.prototype.toRadix=Ep;A.prototype.fromRadix=Sp;A.prototype.fromNumber=Bp;A.prototype.bitwiseTo=Tp;A.prototype.changeBit=Hp;A.prototype.addTo=Yp;A.prototype.dMultiply=ty;A.prototype.dAddOffset=ey;A.prototype.multiplyLowerTo=sy;A.prototype.multiplyUpperTo=oy;A.prototype.modInt=py;A.prototype.millerRabin=xy;A.prototype.clone=gp;A.prototype.intValue=mp;A.prototype.byteValue=xp;A.prototype.shortValue=bp;A.prototype.signum=wp;A.prototype.toByteArray=Cp;A.prototype.equals=Ap;A.prototype.min=_p;A.prototype.max=Ip;A.prototype.and=Lp;A.prototype.or=Np;A.prototype.xor=Dp;A.prototype.andNot=Pp;A.prototype.not=kp;A.prototype.shiftLeft=Up;A.prototype.shiftRight=Op;A.prototype.getLowestSetBit=Mp;A.prototype.bitCount=qp;A.prototype.testBit=Vp;A.prototype.setBit=zp;A.prototype.clearBit=Gp;A.prototype.flipBit=Wp;A.prototype.add=Qp;A.prototype.subtract=$p;A.prototype.multiply=Zp;A.prototype.divide=Xp;A.prototype.remainder=Jp;A.prototype.divideAndRemainder=jp;A.prototype.modPow=hy;A.prototype.modInverse=yy;A.prototype.pow=iy;A.prototype.gcd=dy;A.prototype.isProbablePrime=my});var Uu=Y((zx,ku)=>{var Ie=ct();Sr();At();var Du=ku.exports=Ie.sha1=Ie.sha1||{};Ie.md.sha1=Ie.md.algorithms.sha1=Du;Du.create=function(){Pu||vy();var t=null,e=Ie.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return e=Ie.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=Ie.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return e.putBytes(i),Nu(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Ie.util.createBuffer();i.putBytes(e.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(Ao.substr(0,n.blockLength-o));for(var a,u,c=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)a=n.fullMessageLength[f+1]*8,u=a/4294967296>>>0,c+=u,i.putInt32(c>>>0),c=a>>>0;i.putInt32(c);var l={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};Nu(l,r,i);var h=Ie.util.createBuffer();return h.putInt32(l.h0),h.putInt32(l.h1),h.putInt32(l.h2),h.putInt32(l.h3),h.putInt32(l.h4),h},n};var Ao=null,Pu=!1;function vy(){Ao=String.fromCharCode(128),Ao+=Ie.util.fillString(String.fromCharCode(0),64),Pu=!0}function Nu(t,e,r){for(var n,i,s,o,a,u,c,f,l=r.length();l>=64;){for(i=t.h0,s=t.h1,o=t.h2,a=t.h3,u=t.h4,f=0;f<16;++f)n=r.getInt32(),e[f]=n,c=a^s&(o^a),n=(i<<5|i>>>27)+c+u+1518500249+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<20;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,c=a^s&(o^a),n=(i<<5|i>>>27)+c+u+1518500249+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<32;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,c=s^o^a,n=(i<<5|i>>>27)+c+u+1859775393+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<40;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,c=s^o^a,n=(i<<5|i>>>27)+c+u+1859775393+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<60;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,c=s&o|a&(s^o),n=(i<<5|i>>>27)+c+u+2400959708+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<80;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,c=s^o^a,n=(i<<5|i>>>27)+c+u+3395469782+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+s|0,t.h2=t.h2+o|0,t.h3=t.h3+a|0,t.h4=t.h4+u|0,l-=64}}});var Mu=Y((Gx,Ku)=>{var Te=ct();At();qn();Uu();var Ou=Ku.exports=Te.pkcs1=Te.pkcs1||{};Ou.encode_rsa_oaep=function(t,e,r){var n,i,s,o;typeof r=="string"?(n=r,i=arguments[3]||void 0,s=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md)),s?s.start():s=Te.md.sha1.create(),o||(o=s);var a=Math.ceil(t.n.bitLength()/8),u=a-2*s.digestLength-2;if(e.length>u){var c=new Error("RSAES-OAEP input message length is too long.");throw c.length=e.length,c.maxLength=u,c}n||(n=""),s.update(n,"raw");for(var f=s.digest(),l="",h=u-e.length,g=0;g<h;g++)l+="\0";var d=f.getBytes()+l+""+e;if(!i)i=Te.random.getBytes(s.digestLength);else if(i.length!==s.digestLength){var c=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw c.seedLength=i.length,c.digestLength=s.digestLength,c}var p=Vi(i,a-s.digestLength-1,o),y=Te.util.xorBytes(d,p,d.length),m=Vi(y,s.digestLength,o),w=Te.util.xorBytes(i,m,i.length);return"\0"+w+y};Ou.decode_rsa_oaep=function(t,e,r){var n,i,s;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var o=Math.ceil(t.n.bitLength()/8);if(e.length!==o){var y=new Error("RSAES-OAEP encoded message length is invalid.");throw y.length=e.length,y.expectedLength=o,y}if(i===void 0?i=Te.md.sha1.create():i.start(),s||(s=i),o<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),u=e.charAt(0),c=e.substring(1,i.digestLength+1),f=e.substring(1+i.digestLength),l=Vi(f,i.digestLength,s),h=Te.util.xorBytes(c,l,c.length),g=Vi(h,o-i.digestLength-1,s),d=Te.util.xorBytes(f,g,f.length),p=d.substring(0,i.digestLength),y=u!=="\0",m=0;m<i.digestLength;++m)y|=a.charAt(m)!==p.charAt(m);for(var w=1,b=i.digestLength,T=i.digestLength;T<d.length;T++){var E=d.charCodeAt(T),S=E&1^1,L=w?65534:0;y|=E&L,w=w&S,b+=w}if(y||d.charCodeAt(b)!==1)throw new Error("Invalid RSAES-OAEP padding.");return d.substring(b+1)};function Vi(t,e,r){r||(r=Te.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),s=0;s<i;++s){var o=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(t+o),n+=r.digest().getBytes()}return n.substring(0,e)}});var Fu=Y((Wx,_o)=>{var sr=ct();At();qi();qn();(function(){if(sr.prime){_o.exports=sr.prime;return}var t=_o.exports=sr.prime=sr.prime||{},e=sr.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=function(l,h){return l|h};t.generateProbablePrime=function(l,h,g){typeof h=="function"&&(g=h,h={}),h=h||{};var d=h.algorithm||"PRIMEINC";typeof d=="string"&&(d={name:d}),d.options=d.options||{};var p=h.prng||sr.random,y={nextBytes:function(m){for(var w=p.getBytesSync(m.length),b=0;b<m.length;++b)m[b]=w.charCodeAt(b)}};if(d.name==="PRIMEINC")return s(l,y,d.options,g);throw new Error("Invalid prime generation algorithm: "+d.name)};function s(l,h,g,d){return"workers"in g?u(l,h,g,d):o(l,h,g,d)}function o(l,h,g,d){var p=c(l,h),y=0,m=f(p.bitLength());"millerRabinTests"in g&&(m=g.millerRabinTests);var w=10;"maxBlockTime"in g&&(w=g.maxBlockTime),a(p,l,h,y,m,w,d)}function a(l,h,g,d,p,y,m){var w=+new Date;do{if(l.bitLength()>h&&(l=c(h,g)),l.isProbablePrime(p))return m(null,l);l.dAddOffset(r[d++%8],0)}while(y<0||+new Date-w<y);sr.util.setImmediate(function(){a(l,h,g,d,p,y,m)})}function u(l,h,g,d){if(typeof Worker>"u")return o(l,h,g,d);var p=c(l,h),y=g.workers,m=g.workLoad||100,w=m*30/8,b=g.workerScript||"forge/prime.worker.js";if(y===-1)return sr.util.estimateCores(function(E,S){E&&(S=2),y=S-1,T()});T();function T(){y=Math.max(1,y);for(var E=[],S=0;S<y;++S)E[S]=new Worker(b);for(var L=y,S=0;S<y;++S)E[S].addEventListener("message",G);var N=!1;function G(W){if(!N){--L;var H=W.data;if(H.found){for(var j=0;j<E.length;++j)E[j].terminate();return N=!0,d(null,new e(H.prime,16))}p.bitLength()>l&&(p=c(l,h));var ft=p.toString(16);W.target.postMessage({hex:ft,workLoad:m}),p.dAddOffset(w,0)}}}}function c(l,h){var g=new e(l,h),d=l-1;return g.testBit(d)||g.bitwiseTo(e.ONE.shiftLeft(d),i,g),g.dAddOffset(31-g.mod(n).byteValue(),0),g}function f(l){return l<=100?27:l<=150?18:l<=200?15:l<=250?12:l<=300?9:l<=350?8:l<=400?7:l<=500?6:l<=600?5:l<=800?4:l<=1250?3:2}})()});var zi=Y((Yx,Yu)=>{var V=ct();Fn();qi();Li();Mu();Fu();qn();At();typeof rt>"u"&&(rt=V.jsbn.BigInteger);var rt,Io=V.util.isNodejs?ki():null,v=V.asn1,ue=V.util;V.pki=V.pki||{};Yu.exports=V.pki.rsa=V.rsa=V.rsa||{};var Q=V.pki,wy=[6,4,2,4,2,4,6,2],Ey={name:"PrivateKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},Sy={name:"RSAPrivateKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},By={name:"RSAPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},Cy=V.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},Ay={name:"DigestInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:v.Class.UNIVERSAL,type:v.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:v.Class.UNIVERSAL,type:v.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},_y=function(t){var e;if(t.algorithm in Q.oids)e=Q.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=v.oidToDer(e).getBytes(),i=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]),s=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]);s.value.push(v.create(v.Class.UNIVERSAL,v.Type.OID,!1,n)),s.value.push(v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,""));var o=v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(s),i.value.push(o),v.toDer(i).getBytes()},Gu=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(rt.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(rt.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new rt(V.util.bytesToHex(V.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(rt.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),s=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(s)<0;)i=i.add(e.p);var o=i.subtract(s).multiply(e.qInv).mod(e.p).multiply(e.q).add(s);return o=o.multiply(n.modInverse(e.n)).mod(e.n),o};Q.rsa.encrypt=function(t,e,r){var n=r,i,s=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=Wu(t,e,r)):(i=V.util.createBuffer(),i.putBytes(t));for(var o=new rt(i.toHex(),16),a=Gu(o,e,n),u=a.toString(16),c=V.util.createBuffer(),f=s-Math.ceil(u.length/2);f>0;)c.putByte(0),--f;return c.putBytes(V.util.hexToBytes(u)),c.getBytes()};Q.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var s=new Error("Encrypted message length is invalid.");throw s.length=t.length,s.expected=i,s}var o=new rt(V.util.createBuffer(t).toHex(),16);if(o.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=Gu(o,e,r),u=a.toString(16),c=V.util.createBuffer(),f=i-Math.ceil(u.length/2);f>0;)c.putByte(0),--f;return c.putBytes(V.util.hexToBytes(u)),n!==!1?Hi(c.getBytes(),e,r):c.getBytes()};Q.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||V.random,i={nextBytes:function(a){for(var u=n.getBytesSync(a.length),c=0;c<a.length;++c)a[c]=u.charCodeAt(c)}},s=r.algorithm||"PRIMEINC",o;if(s==="PRIMEINC")o={algorithm:s,state:0,bits:t,rng:i,eInt:e||65537,e:new rt(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},o.e.fromInt(o.eInt);else throw new Error("Invalid key generation algorithm: "+s);return o};Q.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new rt(null);r.fromInt(30);for(var n=0,i=function(l,h){return l|h},s=+new Date,o,a=0;t.keys===null&&(e<=0||a<e);){if(t.state===0){var u=t.p===null?t.pBits:t.qBits,c=u-1;t.pqState===0?(t.num=new rt(u,t.rng),t.num.testBit(c)||t.num.bitwiseTo(rt.ONE.shiftLeft(c),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>u?t.pqState=0:t.num.isProbablePrime(Ty(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(wy[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(rt.ONE).gcd(t.e).compareTo(rt.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(rt.ONE),t.q1=t.q.subtract(rt.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(rt.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var f=t.e.modInverse(t.phi);t.keys={privateKey:Q.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:Q.rsa.setPublicKey(t.n,t.e)}}o=+new Date,a+=o-s,s=o}return t.keys!==null};Q.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!V.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(qu("generateKeyPair"))return Io.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,u,c){if(a)return n(a);n(null,{privateKey:Q.privateKeyFromPem(c),publicKey:Q.publicKeyFromPem(u)})});if(Vu("generateKey")&&Vu("exportKey"))return ue.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:zu(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return ue.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var u=Q.privateKeyFromAsn1(v.fromDer(V.util.createBuffer(a)));n(null,{privateKey:u,publicKey:Q.setRsaPublicKey(u.n,u.e)})}});if(Hu("generateKey")&&Hu("exportKey")){var i=ue.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:zu(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(a){var u=a.target.result,c=ue.globalScope.msCrypto.subtle.exportKey("pkcs8",u.privateKey);c.oncomplete=function(f){var l=f.target.result,h=Q.privateKeyFromAsn1(v.fromDer(V.util.createBuffer(l)));n(null,{privateKey:h,publicKey:Q.setRsaPublicKey(h.n,h.e)})},c.onerror=function(f){n(f)}},i.onerror=function(a){n(a)};return}}else if(qu("generateKeyPairSync")){var s=Io.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Q.privateKeyFromPem(s.privateKey),publicKey:Q.publicKeyFromPem(s.publicKey)}}}var o=Q.rsa.createKeyPairGenerationState(t,e,r);if(!n)return Q.rsa.stepKeyPairGenerationState(o,0),o.keys;Iy(o,r,n)};Q.setRsaPublicKey=Q.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,s){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,u,c){return Wu(a,u,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,u){return V.pkcs1.encode_rsa_oaep(u,a,s)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var o=i.encode(n,r,!0);return Q.rsa.encrypt(o,r,!0)},r.verify=function(n,i,s,o){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),o===void 0&&(o={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in o||(o._parseAllDigestBytes=!0),s==="RSASSA-PKCS1-V1_5"?s={verify:function(u,c){c=Hi(c,r,!0);var f=v.fromDer(c,{parseAllBytes:o._parseAllDigestBytes}),l={},h=[];if(!v.validate(f,Ay,l,h)){var g=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw g.errors=h,g}var d=v.derToOid(l.algorithmIdentifier);if(!(d===V.oids.md2||d===V.oids.md5||d===V.oids.sha1||d===V.oids.sha224||d===V.oids.sha256||d===V.oids.sha384||d===V.oids.sha512||d===V.oids["sha512-224"]||d===V.oids["sha512-256"])){var g=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw g.oid=d,g}if((d===V.oids.md2||d===V.oids.md5)&&!("parameters"in l))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return u===l.digest}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(u,c){return c=Hi(c,r,!0),u===c}});var a=Q.rsa.decrypt(i,r,!0,!1);return s.verify(n,a,r.n.bitLength())},r};Q.setRsaPrivateKey=Q.rsa.setPrivateKey=function(t,e,r,n,i,s,o,a){var u={n:t,e,d:r,p:n,q:i,dP:s,dQ:o,qInv:a};return u.decrypt=function(c,f,l){typeof f=="string"?f=f.toUpperCase():f===void 0&&(f="RSAES-PKCS1-V1_5");var h=Q.rsa.decrypt(c,u,!1,!1);if(f==="RSAES-PKCS1-V1_5")f={decode:Hi};else if(f==="RSA-OAEP"||f==="RSAES-OAEP")f={decode:function(g,d){return V.pkcs1.decode_rsa_oaep(d,g,l)}};else if(["RAW","NONE","NULL",null].indexOf(f)!==-1)f={decode:function(g){return g}};else throw new Error('Unsupported encryption scheme: "'+f+'".');return f.decode(h,u,!1)},u.sign=function(c,f){var l=!1;typeof f=="string"&&(f=f.toUpperCase()),f===void 0||f==="RSASSA-PKCS1-V1_5"?(f={encode:_y},l=1):(f==="NONE"||f==="NULL"||f===null)&&(f={encode:function(){return c}},l=1);var h=f.encode(c,u.n.bitLength());return Q.rsa.encrypt(h,u,l)},u};Q.wrapRsaPrivateKey=function(t){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(0).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(Q.oids.rsaEncryption).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")]),v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,v.toDer(t).getBytes())])};Q.privateKeyFromAsn1=function(t){var e={},r=[];if(v.validate(t,Ey,e,r)&&(t=v.fromDer(V.util.createBuffer(e.privateKey))),e={},r=[],!v.validate(t,Sy,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,s,o,a,u,c,f,l;return i=V.util.createBuffer(e.privateKeyModulus).toHex(),s=V.util.createBuffer(e.privateKeyPublicExponent).toHex(),o=V.util.createBuffer(e.privateKeyPrivateExponent).toHex(),a=V.util.createBuffer(e.privateKeyPrime1).toHex(),u=V.util.createBuffer(e.privateKeyPrime2).toHex(),c=V.util.createBuffer(e.privateKeyExponent1).toHex(),f=V.util.createBuffer(e.privateKeyExponent2).toHex(),l=V.util.createBuffer(e.privateKeyCoefficient).toHex(),Q.setRsaPrivateKey(new rt(i,16),new rt(s,16),new rt(o,16),new rt(a,16),new rt(u,16),new rt(c,16),new rt(f,16),new rt(l,16))};Q.privateKeyToAsn1=Q.privateKeyToRSAPrivateKey=function(t){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(0).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Re(t.n)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Re(t.e)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Re(t.d)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Re(t.p)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Re(t.q)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Re(t.dP)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Re(t.dQ)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Re(t.qInv))])};Q.publicKeyFromAsn1=function(t){var e={},r=[];if(v.validate(t,Cy,e,r)){var n=v.derToOid(e.publicKeyOid);if(n!==Q.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!v.validate(t,By,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var s=V.util.createBuffer(e.publicKeyModulus).toHex(),o=V.util.createBuffer(e.publicKeyExponent).toHex();return Q.setRsaPublicKey(new rt(s,16),new rt(o,16))};Q.publicKeyToAsn1=Q.publicKeyToSubjectPublicKeyInfo=function(t){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(Q.oids.rsaEncryption).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")]),v.create(v.Class.UNIVERSAL,v.Type.BITSTRING,!1,[Q.publicKeyToRSAPublicKey(t)])])};Q.publicKeyToRSAPublicKey=function(t){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Re(t.n)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Re(t.e))])};function Wu(t,e,r){var n=V.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=t.length,s.max=i-11,s}n.putByte(0),n.putByte(r);var o=i-3-t.length,a;if(r===0||r===1){a=r===0?0:255;for(var u=0;u<o;++u)n.putByte(a)}else for(;o>0;){for(var c=0,f=V.random.getBytes(o),u=0;u<o;++u)a=f.charCodeAt(u),a===0?++c:n.putByte(a);o=c}return n.putByte(0),n.putBytes(t),n}function Hi(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),s=V.util.createBuffer(t),o=s.getByte(),a=s.getByte();if(o!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var u=0;if(a===0){u=i-3-n;for(var c=0;c<u;++c)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(u=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++u}else if(a===2)for(u=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++u}var f=s.getByte();if(f!==0||u!==i-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function Iy(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){s(t.pBits,function(a,u){if(a)return r(a);if(t.p=u,t.q!==null)return o(a,t.q);s(t.qBits,o)})}function s(a,u){V.prime.generateProbablePrime(a,n,u)}function o(a,u){if(a)return r(a);if(t.q=u,t.p.compareTo(t.q)<0){var c=t.p;t.p=t.q,t.q=c}if(t.p.subtract(rt.ONE).gcd(t.e).compareTo(rt.ONE)!==0){t.p=null,i();return}if(t.q.subtract(rt.ONE).gcd(t.e).compareTo(rt.ONE)!==0){t.q=null,s(t.qBits,o);return}if(t.p1=t.p.subtract(rt.ONE),t.q1=t.q.subtract(rt.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(rt.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,s(t.qBits,o);return}var f=t.e.modInverse(t.phi);t.keys={privateKey:Q.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:Q.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function Re(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=V.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function Ty(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function qu(t){return V.util.isNodejs&&typeof Io[t]=="function"}function Vu(t){return typeof ue.globalScope<"u"&&typeof ue.globalScope.crypto=="object"&&typeof ue.globalScope.crypto.subtle=="object"&&typeof ue.globalScope.crypto.subtle[t]=="function"}function Hu(t){return typeof ue.globalScope<"u"&&typeof ue.globalScope.msCrypto=="object"&&typeof ue.globalScope.msCrypto.subtle=="object"&&typeof ue.globalScope.msCrypto.subtle[t]=="function"}function zu(t){for(var e=V.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}});var ju=Y((Qx,Ju)=>{var U=ct();Ti();Fn();iu();Sr();Li();bo();lu();qn();Su();zi();At();typeof Qu>"u"&&(Qu=U.jsbn.BigInteger);var Qu,B=U.asn1,$=U.pki=U.pki||{};Ju.exports=$.pbe=U.pbe=U.pbe||{};var Ar=$.oids,Ry={name:"EncryptedPrivateKeyInfo",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:B.Class.UNIVERSAL,type:B.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},Ly={name:"PBES2Algorithms",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:B.Class.UNIVERSAL,type:B.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:B.Class.UNIVERSAL,type:B.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:B.Class.UNIVERSAL,type:B.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:B.Class.UNIVERSAL,type:B.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},Ny={name:"pkcs-12PbeParams",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:B.Class.UNIVERSAL,type:B.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:B.Class.UNIVERSAL,type:B.Type.INTEGER,constructed:!1,capture:"iterations"}]};$.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=U.random.getBytesSync(r.saltSize),i=r.count,s=B.integerToDer(i),o,a,u;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var c,f,l;switch(r.algorithm){case"aes128":o=16,c=16,f=Ar["aes128-CBC"],l=U.aes.createEncryptionCipher;break;case"aes192":o=24,c=16,f=Ar["aes192-CBC"],l=U.aes.createEncryptionCipher;break;case"aes256":o=32,c=16,f=Ar["aes256-CBC"],l=U.aes.createEncryptionCipher;break;case"des":o=8,c=8,f=Ar.desCBC,l=U.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var g="hmacWith"+r.prfAlgorithm.toUpperCase(),d=Xu(g),p=U.pkcs5.pbkdf2(e,n,i,o,d),y=U.random.getBytesSync(c),m=l(p);m.start(y),m.update(B.toDer(t)),m.finish(),u=m.output.getBytes();var w=Dy(n,s,o,g);a=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(Ar.pkcs5PBES2).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(Ar.pkcs5PBKDF2).getBytes()),w]),B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(f).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,y)])])])}else if(r.algorithm==="3des"){o=24;var b=new U.util.ByteBuffer(n),p=$.pbe.generatePkcs12Key(e,b,1,i,o),y=$.pbe.generatePkcs12Key(e,b,2,i,o),m=U.des.createEncryptionCipher(p);m.start(y),m.update(B.toDer(t)),m.finish(),u=m.output.getBytes(),a=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(Ar["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,n),B.create(B.Class.UNIVERSAL,B.Type.INTEGER,!1,s.getBytes())])])}else{var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var T=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[a,B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,u)]);return T};$.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!B.validate(t,Ry,n,i)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=B.derToOid(n.encryptionOid),a=$.pbe.getCipher(o,n.encryptionParams,e),u=U.util.createBuffer(n.encryptedData);return a.update(u),a.finish()&&(r=B.fromDer(a.output)),r};$.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:B.toDer(t).getBytes()};return U.pem.encode(r,{maxline:e})};$.encryptedPrivateKeyFromPem=function(t){var e=U.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return B.fromDer(e.body)};$.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=$.wrapRsaPrivateKey($.privateKeyToAsn1(t));return n=$.encryptPrivateKeyInfo(n,e,r),$.encryptedPrivateKeyToPem(n)}var i,s,o,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",o=16,s=U.random.getBytesSync(16),a=U.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",o=24,s=U.random.getBytesSync(16),a=U.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",o=32,s=U.random.getBytesSync(16),a=U.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",o=24,s=U.random.getBytesSync(8),a=U.des.createEncryptionCipher;break;case"des":i="DES-CBC",o=8,s=U.random.getBytesSync(8),a=U.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw u.algorithm=r.algorithm,u}var c=U.pbe.opensslDeriveBytes(e,s.substr(0,8),o),f=a(c);f.start(s),f.update(B.toDer($.privateKeyToAsn1(t))),f.finish();var l={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:U.util.bytesToHex(s).toUpperCase()},body:f.output.getBytes()};return U.pem.encode(l)};$.decryptRsaPrivateKey=function(t,e){var r=null,n=U.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var s,o;switch(n.dekInfo.algorithm){case"DES-CBC":s=8,o=U.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,o=U.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,o=U.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,o=U.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,o=U.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,o=function(l){return U.rc2.createDecryptionCipher(l,40)};break;case"RC2-64-CBC":s=8,o=function(l){return U.rc2.createDecryptionCipher(l,64)};break;case"RC2-128-CBC":s=16,o=function(l){return U.rc2.createDecryptionCipher(l,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var a=U.util.hexToBytes(n.dekInfo.parameters),u=U.pbe.opensslDeriveBytes(e,a.substr(0,8),s),c=o(u);if(c.start(a),c.update(U.util.createBuffer(n.body)),c.finish())r=c.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=$.decryptPrivateKeyInfo(B.fromDer(r),e):r=B.fromDer(r),r!==null&&(r=$.privateKeyFromAsn1(r)),r};$.pbe.generatePkcs12Key=function(t,e,r,n,i,s){var o,a;if(typeof s>"u"||s===null){if(!("sha1"in U.md))throw new Error('"sha1" hash algorithm unavailable.');s=U.md.sha1.create()}var u=s.digestLength,c=s.blockLength,f=new U.util.ByteBuffer,l=new U.util.ByteBuffer;if(t!=null){for(a=0;a<t.length;a++)l.putInt16(t.charCodeAt(a));l.putInt16(0)}var h=l.length(),g=e.length(),d=new U.util.ByteBuffer;d.fillWithByte(r,c);var p=c*Math.ceil(g/c),y=new U.util.ByteBuffer;for(a=0;a<p;a++)y.putByte(e.at(a%g));var m=c*Math.ceil(h/c),w=new U.util.ByteBuffer;for(a=0;a<m;a++)w.putByte(l.at(a%h));var b=y;b.putBuffer(w);for(var T=Math.ceil(i/u),E=1;E<=T;E++){var S=new U.util.ByteBuffer;S.putBytes(d.bytes()),S.putBytes(b.bytes());for(var L=0;L<n;L++)s.start(),s.update(S.getBytes()),S=s.digest();var N=new U.util.ByteBuffer;for(a=0;a<c;a++)N.putByte(S.at(a%u));var G=Math.ceil(g/c)+Math.ceil(h/c),W=new U.util.ByteBuffer;for(o=0;o<G;o++){var H=new U.util.ByteBuffer(b.getBytes(c)),j=511;for(a=N.length()-1;a>=0;a--)j=j>>8,j+=N.at(a)+H.at(a),H.setAt(a,j&255);W.putBuffer(H)}b=W,f.putBuffer(S)}return f.truncate(f.length()-i),f};$.pbe.getCipher=function(t,e,r){switch(t){case $.oids.pkcs5PBES2:return $.pbe.getCipherForPBES2(t,e,r);case $.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case $.oids["pbewithSHAAnd40BitRC2-CBC"]:return $.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};$.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!B.validate(e,Ly,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}if(t=B.derToOid(n.kdfOid),t!==$.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=t,s.supportedOids=["pkcs5PBKDF2"],s}if(t=B.derToOid(n.encOid),t!==$.oids["aes128-CBC"]&&t!==$.oids["aes192-CBC"]&&t!==$.oids["aes256-CBC"]&&t!==$.oids["des-EDE3-CBC"]&&t!==$.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=t,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var o=n.kdfSalt,a=U.util.createBuffer(n.kdfIterationCount);a=a.getInt(a.length()<<3);var u,c;switch($.oids[t]){case"aes128-CBC":u=16,c=U.aes.createDecryptionCipher;break;case"aes192-CBC":u=24,c=U.aes.createDecryptionCipher;break;case"aes256-CBC":u=32,c=U.aes.createDecryptionCipher;break;case"des-EDE3-CBC":u=24,c=U.des.createDecryptionCipher;break;case"desCBC":u=8,c=U.des.createDecryptionCipher;break}var f=Zu(n.prfOid),l=U.pkcs5.pbkdf2(r,o,a,u,f),h=n.encIv,g=c(l);return g.start(h),g};$.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!B.validate(e,Ny,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=U.util.createBuffer(n.salt),a=U.util.createBuffer(n.iterations);a=a.getInt(a.length()<<3);var u,c,f;switch(t){case $.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,c=8,f=U.des.startDecrypting;break;case $.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,c=8,f=function(p,y){var m=U.rc2.createDecryptionCipher(p,40);return m.start(y,null),m};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=t,s}var l=Zu(n.prfOid),h=$.pbe.generatePkcs12Key(r,o,1,a,u,l);l.start();var g=$.pbe.generatePkcs12Key(r,o,2,a,c,l);return f(h,g)};$.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in U.md))throw new Error('"md5" hash algorithm unavailable.');n=U.md.md5.create()}e===null&&(e="");for(var i=[$u(n,t+e)],s=16,o=1;s<r;++o,s+=16)i.push($u(n,i[o-1]+t+e));return i.join("").substr(0,r)};function $u(t,e){return t.start().update(e).digest().getBytes()}function Zu(t){var e;if(!t)e="hmacWithSHA1";else if(e=$.oids[B.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return Xu(e)}function Xu(t){var e=U.md;switch(t){case"hmacWithSHA224":e=U.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function Dy(t,e,r,n){var i=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,t),B.create(B.Class.UNIVERSAL,B.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(B.create(B.Class.UNIVERSAL,B.Type.INTEGER,!1,U.util.hexToBytes(r.toString(16))),B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer($.oids[n]).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.NULL,!1,"")])),i}});var Cc=Y((Fb,Bc)=>{"use strict";Bc.exports=K1;function K1(t,e){for(var r=new Array(arguments.length-1),n=0,i=2,s=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(a,u){r[n]=function(f){if(s)if(s=!1,f)u(f);else{for(var l=new Array(arguments.length-1),h=0;h<l.length;)l[h++]=arguments[h];a.apply(null,l)}};try{t.apply(e||null,r)}catch(c){s&&(s=!1,u(c))}})}});var Tc=Y(Ic=>{"use strict";var os=Ic;os.length=function(e){var r=e.length;if(!r)return 0;for(var n=0;--r%4>1&&e.charAt(r)==="=";)++n;return Math.ceil(e.length*3)/4-n};var hn=new Array(64),_c=new Array(123);for(me=0;me<64;)_c[hn[me]=me<26?me+65:me<52?me+71:me<62?me-4:me-59|43]=me++;var me;os.encode=function(e,r,n){for(var i=null,s=[],o=0,a=0,u;r<n;){var c=e[r++];switch(a){case 0:s[o++]=hn[c>>2],u=(c&3)<<4,a=1;break;case 1:s[o++]=hn[u|c>>4],u=(c&15)<<2,a=2;break;case 2:s[o++]=hn[u|c>>6],s[o++]=hn[c&63],a=0;break}o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0)}return a&&(s[o++]=hn[u],s[o++]=61,a===1&&(s[o++]=61)),i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var Ac="invalid encoding";os.decode=function(e,r,n){for(var i=n,s=0,o,a=0;a<e.length;){var u=e.charCodeAt(a++);if(u===61&&s>1)break;if((u=_c[u])===void 0)throw Error(Ac);switch(s){case 0:o=u,s=1;break;case 1:r[n++]=o<<2|(u&48)>>4,o=u,s=2;break;case 2:r[n++]=(o&15)<<4|(u&60)>>2,o=u,s=3;break;case 3:r[n++]=(o&3)<<6|u,s=0;break}}if(s===1)throw Error(Ac);return n-i};os.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var Lc=Y((Vb,Rc)=>{"use strict";Rc.exports=as;function as(){this._listeners={}}as.prototype.on=function(e,r,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:n||this}),this};as.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===r?n.splice(i,1):++i;return this};as.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this}});var Kc=Y((Hb,Oc)=>{"use strict";Oc.exports=Nc(Nc);function Nc(t){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=r[3]===128;function i(u,c,f){e[0]=u,c[f]=r[0],c[f+1]=r[1],c[f+2]=r[2],c[f+3]=r[3]}function s(u,c,f){e[0]=u,c[f]=r[3],c[f+1]=r[2],c[f+2]=r[1],c[f+3]=r[0]}t.writeFloatLE=n?i:s,t.writeFloatBE=n?s:i;function o(u,c){return r[0]=u[c],r[1]=u[c+1],r[2]=u[c+2],r[3]=u[c+3],e[0]}function a(u,c){return r[3]=u[c],r[2]=u[c+1],r[1]=u[c+2],r[0]=u[c+3],e[0]}t.readFloatLE=n?o:a,t.readFloatBE=n?a:o}():function(){function e(n,i,s,o){var a=i<0?1:0;if(a&&(i=-i),i===0)n(1/i>0?0:2147483648,s,o);else if(isNaN(i))n(2143289344,s,o);else if(i>34028234663852886e22)n((a<<31|2139095040)>>>0,s,o);else if(i<11754943508222875e-54)n((a<<31|Math.round(i/1401298464324817e-60))>>>0,s,o);else{var u=Math.floor(Math.log(i)/Math.LN2),c=Math.round(i*Math.pow(2,-u)*8388608)&8388607;n((a<<31|u+127<<23|c)>>>0,s,o)}}t.writeFloatLE=e.bind(null,Dc),t.writeFloatBE=e.bind(null,Pc);function r(n,i,s){var o=n(i,s),a=(o>>31)*2+1,u=o>>>23&255,c=o&8388607;return u===255?c?NaN:a*(1/0):u===0?a*1401298464324817e-60*c:a*Math.pow(2,u-150)*(c+8388608)}t.readFloatLE=r.bind(null,kc),t.readFloatBE=r.bind(null,Uc)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=r[7]===128;function i(u,c,f){e[0]=u,c[f]=r[0],c[f+1]=r[1],c[f+2]=r[2],c[f+3]=r[3],c[f+4]=r[4],c[f+5]=r[5],c[f+6]=r[6],c[f+7]=r[7]}function s(u,c,f){e[0]=u,c[f]=r[7],c[f+1]=r[6],c[f+2]=r[5],c[f+3]=r[4],c[f+4]=r[3],c[f+5]=r[2],c[f+6]=r[1],c[f+7]=r[0]}t.writeDoubleLE=n?i:s,t.writeDoubleBE=n?s:i;function o(u,c){return r[0]=u[c],r[1]=u[c+1],r[2]=u[c+2],r[3]=u[c+3],r[4]=u[c+4],r[5]=u[c+5],r[6]=u[c+6],r[7]=u[c+7],e[0]}function a(u,c){return r[7]=u[c],r[6]=u[c+1],r[5]=u[c+2],r[4]=u[c+3],r[3]=u[c+4],r[2]=u[c+5],r[1]=u[c+6],r[0]=u[c+7],e[0]}t.readDoubleLE=n?o:a,t.readDoubleBE=n?a:o}():function(){function e(n,i,s,o,a,u){var c=o<0?1:0;if(c&&(o=-o),o===0)n(0,a,u+i),n(1/o>0?0:2147483648,a,u+s);else if(isNaN(o))n(0,a,u+i),n(2146959360,a,u+s);else if(o>17976931348623157e292)n(0,a,u+i),n((c<<31|2146435072)>>>0,a,u+s);else{var f;if(o<22250738585072014e-324)f=o/5e-324,n(f>>>0,a,u+i),n((c<<31|f/4294967296)>>>0,a,u+s);else{var l=Math.floor(Math.log(o)/Math.LN2);l===1024&&(l=1023),f=o*Math.pow(2,-l),n(f*4503599627370496>>>0,a,u+i),n((c<<31|l+1023<<20|f*1048576&1048575)>>>0,a,u+s)}}}t.writeDoubleLE=e.bind(null,Dc,0,4),t.writeDoubleBE=e.bind(null,Pc,4,0);function r(n,i,s,o,a){var u=n(o,a+i),c=n(o,a+s),f=(c>>31)*2+1,l=c>>>20&2047,h=4294967296*(c&1048575)+u;return l===2047?h?NaN:f*(1/0):l===0?f*5e-324*h:f*Math.pow(2,l-1075)*(h+4503599627370496)}t.readDoubleLE=r.bind(null,kc,0,4),t.readDoubleBE=r.bind(null,Uc,4,0)}(),t}function Dc(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function Pc(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function kc(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function Uc(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var Mc=Y((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var qc=Y(Fc=>{"use strict";var Wo=Fc;Wo.length=function(e){for(var r=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?r+=1:n<2048?r+=2:(n&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,r+=4):r+=3;return r};Wo.read=function(e,r,n){var i=n-r;if(i<1)return"";for(var s=null,o=[],a=0,u;r<n;)u=e[r++],u<128?o[a++]=u:u>191&&u<224?o[a++]=(u&31)<<6|e[r++]&63:u>239&&u<365?(u=((u&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,o[a++]=55296+(u>>10),o[a++]=56320+(u&1023)):o[a++]=(u&15)<<12|(e[r++]&63)<<6|e[r++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};Wo.write=function(e,r,n){for(var i=n,s,o,a=0;a<e.length;++a)s=e.charCodeAt(a),s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):(s&64512)===55296&&((o=e.charCodeAt(a+1))&64512)===56320?(s=65536+((s&1023)<<10)+(o&1023),++a,r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128);return n-i}});var Hc=Y((Gb,Vc)=>{"use strict";Vc.exports=M1;function M1(t,e,r){var n=r||8192,i=n>>>1,s=null,o=n;return function(u){if(u<1||u>i)return t(u);o+u>n&&(s=t(n),o=0);var c=e.call(s,o,o+=u);return o&7&&(o=(o|7)+1),c}}});var Gc=Y((Wb,zc)=>{"use strict";zc.exports=qt;var Wn=Lr();function qt(t,e){this.lo=t>>>0,this.hi=e>>>0}var Rr=qt.zero=new qt(0,0);Rr.toNumber=function(){return 0};Rr.zzEncode=Rr.zzDecode=function(){return this};Rr.length=function(){return 1};var F1=qt.zeroHash="\0\0\0\0\0\0\0\0";qt.fromNumber=function(e){if(e===0)return Rr;var r=e<0;r&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new qt(n,i)};qt.from=function(e){if(typeof e=="number")return qt.fromNumber(e);if(Wn.isString(e))if(Wn.Long)e=Wn.Long.fromString(e);else return qt.fromNumber(parseInt(e,10));return e.low||e.high?new qt(e.low>>>0,e.high>>>0):Rr};qt.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};qt.prototype.toLong=function(e){return Wn.Long?new Wn.Long(this.lo|0,this.hi|0,!!e):{low:this.lo|0,high:this.hi|0,unsigned:!!e}};var fr=String.prototype.charCodeAt;qt.fromHash=function(e){return e===F1?Rr:new qt((fr.call(e,0)|fr.call(e,1)<<8|fr.call(e,2)<<16|fr.call(e,3)<<24)>>>0,(fr.call(e,4)|fr.call(e,5)<<8|fr.call(e,6)<<16|fr.call(e,7)<<24)>>>0)};qt.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};qt.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};qt.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};qt.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var Lr=Y(Yo=>{"use strict";var q=Yo;q.asPromise=Cc();q.base64=Tc();q.EventEmitter=Lc();q.float=Kc();q.inquire=Mc();q.utf8=qc();q.pool=Hc();q.LongBits=Gc();q.isNode=!!(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);q.global=q.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||Yo;q.emptyArray=Object.freeze?Object.freeze([]):[];q.emptyObject=Object.freeze?Object.freeze({}):{};q.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};q.isString=function(e){return typeof e=="string"||e instanceof String};q.isObject=function(e){return e&&typeof e=="object"};q.isset=q.isSet=function(e,r){var n=e[r];return n!=null&&e.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};q.Buffer=function(){try{var t=q.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch{return null}}();q._Buffer_from=null;q._Buffer_allocUnsafe=null;q.newBuffer=function(e){return typeof e=="number"?q.Buffer?q._Buffer_allocUnsafe(e):new q.Array(e):q.Buffer?q._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};q.Array=typeof Uint8Array<"u"?Uint8Array:Array;q.Long=q.global.dcodeIO&&q.global.dcodeIO.Long||q.global.Long||q.inquire("long");q.key2Re=/^true|false|0|1$/;q.key32Re=/^-?(?:0|[1-9][0-9]*)$/;q.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;q.longToHash=function(e){return e?q.LongBits.from(e).toHash():q.LongBits.zeroHash};q.longFromHash=function(e,r){var n=q.LongBits.fromHash(e);return q.Long?q.Long.fromBits(n.lo,n.hi,r):n.toNumber(!!r)};function Wc(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;++i)(t[n[i]]===void 0||!r)&&(t[n[i]]=e[n[i]]);return t}q.merge=Wc;q.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function Yc(t){function e(r,n){if(!(this instanceof e))return new e(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&Wc(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}q.newError=Yc;q.ProtocolError=Yc("ProtocolError");q.oneOfGetter=function(e){for(var r={},n=0;n<e.length;++n)r[e[n]]=1;return function(){for(var i=Object.keys(this),s=i.length-1;s>-1;--s)if(r[i[s]]===1&&this[i[s]]!==void 0&&this[i[s]]!==null)return i[s]}};q.oneOfSetter=function(e){return function(r){for(var n=0;n<e.length;++n)e[n]!==r&&delete this[e[n]]}};q.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};q._configure=function(){var t=q.Buffer;if(!t){q._Buffer_from=q._Buffer_allocUnsafe=null;return}q._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,n){return new t(r,n)},q._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var Zo=Y((Qb,Jc)=>{"use strict";Jc.exports=Tt;var xe=Lr(),$o,Zc=xe.LongBits,q1=xe.utf8;function be(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Tt(t){this.buf=t,this.pos=0,this.len=t.length}var Qc=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Tt(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Tt(e);throw Error("illegal buffer")},Xc=function(){return xe.Buffer?function(r){return(Tt.create=function(i){return xe.Buffer.isBuffer(i)?new $o(i):Qc(i)})(r)}:Qc};Tt.create=Xc();Tt.prototype._slice=xe.Array.prototype.subarray||xe.Array.prototype.slice;Tt.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,be(this,10);return e}}();Tt.prototype.int32=function(){return this.uint32()|0};Tt.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function Qo(){var t=new Zc(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw be(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw be(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}Tt.prototype.bool=function(){return this.uint32()!==0};function us(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}Tt.prototype.fixed32=function(){if(this.pos+4>this.len)throw be(this,4);return us(this.buf,this.pos+=4)};Tt.prototype.sfixed32=function(){if(this.pos+4>this.len)throw be(this,4);return us(this.buf,this.pos+=4)|0};function $c(){if(this.pos+8>this.len)throw be(this,8);return new Zc(us(this.buf,this.pos+=4),us(this.buf,this.pos+=4))}Tt.prototype.float=function(){if(this.pos+4>this.len)throw be(this,4);var e=xe.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Tt.prototype.double=function(){if(this.pos+8>this.len)throw be(this,4);var e=xe.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Tt.prototype.bytes=function(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw be(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(r,n);if(r===n){var i=xe.Buffer;return i?i.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,r,n)};Tt.prototype.string=function(){var e=this.bytes();return q1.read(e,0,e.length)};Tt.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw be(this,e);this.pos+=e}else do if(this.pos>=this.len)throw be(this);while(this.buf[this.pos++]&128);return this};Tt.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};Tt._configure=function(t){$o=t,Tt.create=Xc(),$o._configure();var e=xe.Long?"toLong":"toNumber";xe.merge(Tt.prototype,{int64:function(){return Qo.call(this)[e](!1)},uint64:function(){return Qo.call(this)[e](!0)},sint64:function(){return Qo.call(this).zzDecode()[e](!1)},fixed64:function(){return $c.call(this)[e](!0)},sfixed64:function(){return $c.call(this)[e](!1)}})}});var rf=Y(($b,ef)=>{"use strict";ef.exports=Nr;var tf=Zo();(Nr.prototype=Object.create(tf.prototype)).constructor=Nr;var jc=Lr();function Nr(t){tf.call(this,t)}Nr._configure=function(){jc.Buffer&&(Nr.prototype._slice=jc.Buffer.prototype.slice)};Nr.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};Nr._configure()});var na=Y((Zb,af)=>{"use strict";af.exports=it;var ce=Lr(),Xo,cs=ce.LongBits,nf=ce.base64,sf=ce.utf8;function Yn(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function jo(){}function V1(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function it(){this.len=0,this.head=new Yn(jo,0,0),this.tail=this.head,this.states=null}var of=function(){return ce.Buffer?function(){return(it.create=function(){return new Xo})()}:function(){return new it}};it.create=of();it.alloc=function(e){return new ce.Array(e)};ce.Array!==Array&&(it.alloc=ce.pool(it.alloc,ce.Array.prototype.subarray));it.prototype._push=function(e,r,n){return this.tail=this.tail.next=new Yn(e,r,n),this.len+=r,this};function ta(t,e,r){e[r]=t&255}function H1(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function ea(t,e){this.len=t,this.next=void 0,this.val=e}ea.prototype=Object.create(Yn.prototype);ea.prototype.fn=H1;it.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new ea((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};it.prototype.int32=function(e){return e<0?this._push(ra,10,cs.fromNumber(e)):this.uint32(e)};it.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function ra(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}it.prototype.uint64=function(e){var r=cs.from(e);return this._push(ra,r.length(),r)};it.prototype.int64=it.prototype.uint64;it.prototype.sint64=function(e){var r=cs.from(e).zzEncode();return this._push(ra,r.length(),r)};it.prototype.bool=function(e){return this._push(ta,1,e?1:0)};function Jo(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}it.prototype.fixed32=function(e){return this._push(Jo,4,e>>>0)};it.prototype.sfixed32=it.prototype.fixed32;it.prototype.fixed64=function(e){var r=cs.from(e);return this._push(Jo,4,r.lo)._push(Jo,4,r.hi)};it.prototype.sfixed64=it.prototype.fixed64;it.prototype.float=function(e){return this._push(ce.float.writeFloatLE,4,e)};it.prototype.double=function(e){return this._push(ce.float.writeDoubleLE,8,e)};var z1=ce.Array.prototype.set?function(e,r,n){r.set(e,n)}:function(e,r,n){for(var i=0;i<e.length;++i)r[n+i]=e[i]};it.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(ta,1,0);if(ce.isString(e)){var n=it.alloc(r=nf.length(e));nf.decode(e,n,0),e=n}return this.uint32(r)._push(z1,r,e)};it.prototype.string=function(e){var r=sf.length(e);return r?this.uint32(r)._push(sf.write,r,e):this._push(ta,1,0)};it.prototype.fork=function(){return this.states=new V1(this),this.head=this.tail=new Yn(jo,0,0),this.len=0,this};it.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Yn(jo,0,0),this.len=0),this};it.prototype.ldelim=function(){var e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=r,this.len+=n),this};it.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r};it._configure=function(t){Xo=t,it.create=of(),Xo._configure()}});var ff=Y((Xb,cf)=>{"use strict";cf.exports=Ne;var uf=na();(Ne.prototype=Object.create(uf.prototype)).constructor=Ne;var lr=Lr();function Ne(){uf.call(this)}Ne._configure=function(){Ne.alloc=lr._Buffer_allocUnsafe,Ne.writeBytesBuffer=lr.Buffer&&lr.Buffer.prototype instanceof Uint8Array&&lr.Buffer.prototype.set.name==="set"?function(e,r,n){r.set(e,n)}:function(e,r,n){if(e.copy)e.copy(r,n,0,e.length);else for(var i=0;i<e.length;)r[n++]=e[i++]}};Ne.prototype.bytes=function(e){lr.isString(e)&&(e=lr._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(Ne.writeBytesBuffer,r,e),this};function G1(t,e,r){t.length<40?lr.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}Ne.prototype.string=function(e){var r=lr.Buffer.byteLength(e);return this.uint32(r),r&&this._push(G1,r,e),this};Ne._configure()});var If=Y((Vv,_f)=>{var gt=ct();Sr();At();var $n=_f.exports=gt.sha512=gt.sha512||{};gt.md.sha512=gt.md.algorithms.sha512=$n;var Cf=gt.sha384=gt.sha512.sha384=gt.sha512.sha384||{};Cf.create=function(){return $n.create("SHA-384")};gt.md.sha384=gt.md.algorithms.sha384=Cf;gt.sha512.sha256=gt.sha512.sha256||{create:function(){return $n.create("SHA-512/256")}};gt.md["sha512/256"]=gt.md.algorithms["sha512/256"]=gt.sha512.sha256;gt.sha512.sha224=gt.sha512.sha224||{create:function(){return $n.create("SHA-512/224")}};gt.md["sha512/224"]=gt.md.algorithms["sha512/224"]=gt.sha512.sha224;$n.create=function(t){if(Af||eg(),typeof t>"u"&&(t="SHA-512"),!(t in Pr))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=Pr[t],r=null,n=gt.util.createBuffer(),i=new Array(80),s=0;s<80;++s)i[s]=new Array(2);var o=64;switch(t){case"SHA-384":o=48;break;case"SHA-512/256":o=32;break;case"SHA-512/224":o=28;break}var a={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:o,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var u=a.messageLengthSize/4,c=0;c<u;++c)a.fullMessageLength.push(0);n=gt.util.createBuffer(),r=new Array(e.length);for(var c=0;c<e.length;++c)r[c]=e[c].slice(0);return a},a.start(),a.update=function(u,c){c==="utf8"&&(u=gt.util.encodeUtf8(u));var f=u.length;a.messageLength+=f,f=[f/4294967296>>>0,f>>>0];for(var l=a.fullMessageLength.length-1;l>=0;--l)a.fullMessageLength[l]+=f[1],f[1]=f[0]+(a.fullMessageLength[l]/4294967296>>>0),a.fullMessageLength[l]=a.fullMessageLength[l]>>>0,f[0]=f[1]/4294967296>>>0;return n.putBytes(u),Bf(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var u=gt.util.createBuffer();u.putBytes(n.bytes());var c=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,f=c&a.blockLength-1;u.putBytes(da.substr(0,a.blockLength-f));for(var l,h,g=a.fullMessageLength[0]*8,d=0;d<a.fullMessageLength.length-1;++d)l=a.fullMessageLength[d+1]*8,h=l/4294967296>>>0,g+=h,u.putInt32(g>>>0),g=l>>>0;u.putInt32(g);for(var p=new Array(r.length),d=0;d<r.length;++d)p[d]=r[d].slice(0);Bf(p,i,u);var y=gt.util.createBuffer(),m;t==="SHA-512"?m=p.length:t==="SHA-384"?m=p.length-2:m=p.length-4;for(var d=0;d<m;++d)y.putInt32(p[d][0]),(d!==m-1||t!=="SHA-512/224")&&y.putInt32(p[d][1]);return y},a};var da=null,Af=!1,pa=null,Pr=null;function eg(){da=String.fromCharCode(128),da+=gt.util.fillString(String.fromCharCode(0),128),pa=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Pr={},Pr["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Pr["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Pr["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Pr["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],Af=!0}function Bf(t,e,r){for(var n,i,s,o,a,u,c,f,l,h,g,d,p,y,m,w,b,T,E,S,L,N,G,W,H,j,ft,Vt,_,P,R,D,C,O,F,z=r.length();z>=128;){for(_=0;_<16;++_)e[_][0]=r.getInt32()>>>0,e[_][1]=r.getInt32()>>>0;for(;_<80;++_)D=e[_-2],P=D[0],R=D[1],n=((P>>>19|R<<13)^(R>>>29|P<<3)^P>>>6)>>>0,i=((P<<13|R>>>19)^(R<<3|P>>>29)^(P<<26|R>>>6))>>>0,O=e[_-15],P=O[0],R=O[1],s=((P>>>1|R<<31)^(P>>>8|R<<24)^P>>>7)>>>0,o=((P<<31|R>>>1)^(P<<24|R>>>8)^(P<<25|R>>>7))>>>0,C=e[_-7],F=e[_-16],R=i+C[1]+o+F[1],e[_][0]=n+C[0]+s+F[0]+(R/4294967296>>>0)>>>0,e[_][1]=R>>>0;for(p=t[0][0],y=t[0][1],m=t[1][0],w=t[1][1],b=t[2][0],T=t[2][1],E=t[3][0],S=t[3][1],L=t[4][0],N=t[4][1],G=t[5][0],W=t[5][1],H=t[6][0],j=t[6][1],ft=t[7][0],Vt=t[7][1],_=0;_<80;++_)c=((L>>>14|N<<18)^(L>>>18|N<<14)^(N>>>9|L<<23))>>>0,f=((L<<18|N>>>14)^(L<<14|N>>>18)^(N<<23|L>>>9))>>>0,l=(H^L&(G^H))>>>0,h=(j^N&(W^j))>>>0,a=((p>>>28|y<<4)^(y>>>2|p<<30)^(y>>>7|p<<25))>>>0,u=((p<<4|y>>>28)^(y<<30|p>>>2)^(y<<25|p>>>7))>>>0,g=(p&m|b&(p^m))>>>0,d=(y&w|T&(y^w))>>>0,R=Vt+f+h+pa[_][1]+e[_][1],n=ft+c+l+pa[_][0]+e[_][0]+(R/4294967296>>>0)>>>0,i=R>>>0,R=u+d,s=a+g+(R/4294967296>>>0)>>>0,o=R>>>0,ft=H,Vt=j,H=G,j=W,G=L,W=N,R=S+i,L=E+n+(R/4294967296>>>0)>>>0,N=R>>>0,E=b,S=T,b=m,T=w,m=p,w=y,R=i+o,p=n+s+(R/4294967296>>>0)>>>0,y=R>>>0;R=t[0][1]+y,t[0][0]=t[0][0]+p+(R/4294967296>>>0)>>>0,t[0][1]=R>>>0,R=t[1][1]+w,t[1][0]=t[1][0]+m+(R/4294967296>>>0)>>>0,t[1][1]=R>>>0,R=t[2][1]+T,t[2][0]=t[2][0]+b+(R/4294967296>>>0)>>>0,t[2][1]=R>>>0,R=t[3][1]+S,t[3][0]=t[3][0]+E+(R/4294967296>>>0)>>>0,t[3][1]=R>>>0,R=t[4][1]+N,t[4][0]=t[4][0]+L+(R/4294967296>>>0)>>>0,t[4][1]=R>>>0,R=t[5][1]+W,t[5][0]=t[5][0]+G+(R/4294967296>>>0)>>>0,t[5][1]=R>>>0,R=t[6][1]+j,t[6][0]=t[6][0]+H+(R/4294967296>>>0)>>>0,t[6][1]=R>>>0,R=t[7][1]+Vt,t[7][0]=t[7][0]+ft+(R/4294967296>>>0)>>>0,t[7][1]=R>>>0,z-=128}}});var Mg={};Lt(Mg,{PubSubBaseProtocol:()=>Aa});var K=class extends Error{code;props;constructor(e,r,n){super(e),this.code=r,this.name=n?.name??"CodeError",this.props=n??{}}};var Kr=class extends EventTarget{#t=new Map;listenerCount(e){let r=this.#t.get(e);return r==null?0:r.length}addEventListener(e,r,n){super.addEventListener(e,r,n);let i=this.#t.get(e);i==null&&(i=[],this.#t.set(e,i)),i.push({callback:r,once:(n!==!0&&n!==!1&&n?.once)??!1})}removeEventListener(e,r,n){super.removeEventListener(e.toString(),r??null,n);let i=this.#t.get(e);i!=null&&(i=i.filter(({callback:s})=>s!==r),this.#t.set(e,i))}dispatchEvent(e){let r=super.dispatchEvent(e),n=this.#t.get(e.type);return n==null||(n=n.filter(({once:i})=>!i),this.#t.set(e.type,n)),r}safeDispatchEvent(e,r){return this.dispatchEvent(new Se(e,r))}},bs=class extends Event{detail;constructor(e,r){super(e,r),this.detail=r?.detail}},Se=globalThis.CustomEvent??bs;var xn;(function(t){t.Accept="accept",t.Ignore="ignore",t.Reject="reject"})(xn||(xn={}));var re=dt(Fa(),1);var Bs={};Lt(Bs,{base32:()=>Xe,base32hex:()=>ql,base32hexpad:()=>Hl,base32hexpadupper:()=>zl,base32hexupper:()=>Vl,base32pad:()=>Ml,base32padupper:()=>Fl,base32upper:()=>Kl,base32z:()=>Gl});function Dl(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,u=t.charAt(0),c=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function l(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";for(var p=0,y=0,m=0,w=d.length;m!==w&&d[m]===0;)m++,p++;for(var b=(w-m)*f+1>>>0,T=new Uint8Array(b);m!==w;){for(var E=d[m],S=0,L=b-1;(E!==0||S<y)&&L!==-1;L--,S++)E+=256*T[L]>>>0,T[L]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");y=S,m++}for(var N=b-y;N!==b&&T[N]===0;)N++;for(var G=u.repeat(p);N<b;++N)G+=t.charAt(T[N]);return G}function h(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;var p=0;if(d[p]!==" "){for(var y=0,m=0;d[p]===u;)y++,p++;for(var w=(d.length-p)*c+1>>>0,b=new Uint8Array(w);d[p];){var T=r[d.charCodeAt(p)];if(T===255)return;for(var E=0,S=w-1;(T!==0||E<m)&&S!==-1;S--,E++)T+=a*b[S]>>>0,b[S]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");m=E,p++}if(d[p]!==" "){for(var L=w-m;L!==w&&b[L]===0;)L++;for(var N=new Uint8Array(y+(w-L)),G=y;L!==w;)N[G++]=b[L++];return N}}}function g(d){var p=h(d);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:h,decode:g}}var Pl=Dl,kl=Pl,qa=kl;var Yg=new Uint8Array(0);var Va=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},ke=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var Ha=t=>new TextEncoder().encode(t),za=t=>new TextDecoder().decode(t);var vs=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},ws=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Wa(this,e)}},Es=class{constructor(e){this.decoders=e}or(e){return Wa(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Wa=(t,e)=>new Es({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),Ss=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new vs(e,r,n),this.decoder=new ws(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Vr=({name:t,prefix:e,encode:r,decode:n})=>new Ss(t,e,r,n),Ze=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=qa(r,e);return Vr({prefix:t,name:e,encode:n,decode:s=>ke(i(s))})},Ul=(t,e,r,n)=>{let i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),a=0,u=0,c=0;for(let f=0;f<s;++f){let l=i[t[f]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|l,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},Ol=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,s="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},St=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Vr({prefix:e,name:t,encode(i){return Ol(i,n,r)},decode(i){return Ul(i,n,r,t)}});var Xe=St({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Kl=St({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ml=St({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Fl=St({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ql=St({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Vl=St({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Hl=St({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),zl=St({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Gl=St({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Cs={};Lt(Cs,{base58btc:()=>Gt,base58flickr:()=>Wl});var Gt=Ze({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Wl=Ze({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var As={};Lt(As,{base64:()=>gr,base64pad:()=>Yl,base64url:()=>Ql,base64urlpad:()=>$l});var gr=St({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Yl=St({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ql=St({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),$l=St({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});re.default.formatters.b=t=>t==null?"undefined":Gt.baseEncode(t);re.default.formatters.t=t=>t==null?"undefined":Xe.baseEncode(t);re.default.formatters.m=t=>t==null?"undefined":gr.baseEncode(t);re.default.formatters.p=t=>t==null?"undefined":t.toString();re.default.formatters.c=t=>t==null?"undefined":t.toString();re.default.formatters.k=t=>t==null?"undefined":t.toString();re.default.formatters.a=t=>t==null?"undefined":t.toString();function Zl(t){let e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=t,e.destroy=()=>!0,e.extend=()=>e,e}function oi(t){let e=Zl(`${t}:trace`);return re.default.enabled(`${t}:trace`)&&re.default.names.map(r=>r.toString()).find(r=>r.includes(":trace"))!=null&&(e=(0,re.default)(`${t}:trace`)),Object.assign((0,re.default)(t),{error:(0,re.default)(`${t}:error`),trace:e})}var Ya=Symbol.for("@libp2p/peer-id");var _s={};Lt(_s,{base10:()=>Xl});var Xl=Ze({prefix:"9",name:"base10",alphabet:"0123456789"});var Is={};Lt(Is,{base16:()=>Jl,base16upper:()=>jl});var Jl=St({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),jl=St({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ts={};Lt(Ts,{base2:()=>th});var th=St({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Rs={};Lt(Rs,{base256emoji:()=>sh});var Qa=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),eh=Qa.reduce((t,e,r)=>(t[r]=e,t),[]),rh=Qa.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function nh(t){return t.reduce((e,r)=>(e+=eh[r],e),"")}function ih(t){let e=[];for(let r of t){let n=rh[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var sh=Vr({prefix:"\u{1F680}",name:"base256emoji",encode:nh,decode:ih});var Ls={};Lt(Ls,{base36:()=>oh,base36upper:()=>ah});var oh=Ze({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ah=Ze({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Ns={};Lt(Ns,{base8:()=>uh});var uh=St({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Ds={};Lt(Ds,{identity:()=>ch});var ch=Vr({prefix:"\0",name:"identity",encode:t=>za(t),decode:t=>Ha(t)});var d2=new TextEncoder,p2=new TextDecoder;var ks={};Lt(ks,{identity:()=>Je});var hh=Xa,$a=128,dh=127,ph=~dh,yh=Math.pow(2,31);function Xa(t,e,r){e=e||[],r=r||0;for(var n=r;t>=yh;)e[r++]=t&255|$a,t/=128;for(;t&ph;)e[r++]=t&255|$a,t>>>=7;return e[r]=t|0,Xa.bytes=r-n+1,e}var gh=Ps,mh=128,Za=127;function Ps(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw Ps.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&Za)<<i:(o&Za)*Math.pow(2,i),i+=7}while(o>=mh);return Ps.bytes=s-n,r}var xh=Math.pow(2,7),bh=Math.pow(2,14),vh=Math.pow(2,21),wh=Math.pow(2,28),Eh=Math.pow(2,35),Sh=Math.pow(2,42),Bh=Math.pow(2,49),Ch=Math.pow(2,56),Ah=Math.pow(2,63),_h=function(t){return t<xh?1:t<bh?2:t<vh?3:t<wh?4:t<Eh?5:t<Sh?6:t<Bh?7:t<Ch?8:t<Ah?9:10},Ih={encode:hh,decode:gh,encodingLength:_h},Th=Ih,bn=Th;var vn=(t,e=0)=>[bn.decode(t,e),bn.decode.bytes],Hr=(t,e,r=0)=>(bn.encode(t,e,r),e),zr=t=>bn.encodingLength(t);var Be=(t,e)=>{let r=e.byteLength,n=zr(t),i=n+zr(r),s=new Uint8Array(i+r);return Hr(t,s,0),Hr(r,s,n),s.set(e,i),new Gr(t,r,e,s)},wn=t=>{let e=ke(t),[r,n]=vn(e),[i,s]=vn(e.subarray(n)),o=e.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new Gr(r,i,o,e)},Ja=(t,e)=>{if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&Va(t.bytes,r.bytes)}},Gr=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};var ja=0,Rh="identity",t0=ke,Lh=t=>Be(ja,t0(t)),Je={code:ja,name:Rh,encode:t0,digest:Lh};var Ks={};Lt(Ks,{sha256:()=>kt,sha512:()=>Nh});var Os=({name:t,code:e,encode:r})=>new Us(t,e,r),Us=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?Be(this.code,r):r.then(n=>Be(this.code,n))}else throw Error("Unknown type, must be binary type")}};var r0=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),kt=Os({name:"sha2-256",code:18,encode:r0("SHA-256")}),Nh=Os({name:"sha2-512",code:19,encode:r0("SHA-512")});var n0=(t,e)=>{let{bytes:r,version:n}=t;switch(n){case 0:return Ph(r,Ms(t),e||Gt.encoder);default:return kh(r,Ms(t),e||Xe.encoder)}};var i0=new WeakMap,Ms=t=>{let e=i0.get(t);if(e==null){let r=new Map;return i0.set(t,r),r}return e},mr=class t{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==En)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Uh)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=Be(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return t.equals(this,e)}static equals(e,r){let n=r;return n&&e.code===n.code&&e.version===n.version&&Ja(e.multihash,n.multihash)}toString(e){return n0(this,e)}toJSON(){return{"/":n0(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof t)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:s,bytes:o}=r;return new t(n,i,s,o||s0(n,i,s.bytes))}else if(r[Oh]===!0){let{version:n,multihash:i,code:s}=r,o=wn(i);return t.create(n,s,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==En)throw new Error(`Version 0 CID must use dag-pb (code: ${En}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let i=s0(e,r,n.bytes);return new t(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,En,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,i=ke(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=i.subarray(r.multihashSize-r.digestSize),o=new Gr(r.multihashCode,r.digestSize,s,i);return[r.version===0?t.createV0(o):t.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[l,h]=vn(e.subarray(r));return r+=h,l},i=n(),s=En;if(i===18?(i=0,r=0):s=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let o=r,a=n(),u=n(),c=r+u,f=c-o;return{version:i,codec:s,multihashCode:a,digestSize:u,multihashSize:f,size:c}}static parse(e,r){let[n,i]=Dh(e,r),s=t.decode(i);if(s.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Ms(s).set(n,e),s}},Dh=(t,e)=>{switch(t[0]){case"Q":{let r=e||Gt;return[Gt.prefix,r.decode(`${Gt.prefix}${t}`)]}case Gt.prefix:{let r=e||Gt;return[Gt.prefix,r.decode(t)]}case Xe.prefix:{let r=e||Xe;return[Xe.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},Ph=(t,e,r)=>{let{prefix:n}=r;if(n!==Gt.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let s=r.encode(t).slice(1);return e.set(n,s),s}else return i},kh=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let s=r.encode(t);return e.set(n,s),s}else return i},En=112,Uh=18,s0=(t,e,r)=>{let n=zr(t),i=n+zr(e),s=new Uint8Array(i+r.byteLength);return Hr(t,s,0),Hr(e,s,n),s.set(r,i),s},Oh=Symbol.for("@ipld/js-cid/CID");var Yr={...Ds,...Ts,...Ns,..._s,...Is,...Bs,...Ls,...Cs,...As,...Rs},R2={...Ks,...ks};function Yt(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var Kh=Symbol.for("nodejs.util.inspect.custom"),o0=Object.values(Yr).map(t=>t.decoder).reduce((t,e)=>t.or(e),Yr.identity.decoder),a0=114,Fs=36,qs=37,Sn=class{type;multihash;privateKey;publicKey;string;constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}[Ya]=!0;toString(){return this.string==null&&(this.string=Gt.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return mr.createV1(a0,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(e instanceof Uint8Array)return Yt(this.multihash.bytes,e);if(typeof e=="string")return Nt(e).equals(this);if(e?.multihash?.bytes!=null)return Yt(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}[Kh](){return`PeerId(${this.toString()})`}},Qr=class extends Sn{type="RSA";publicKey;constructor(e){super({...e,type:"RSA"}),this.publicKey=e.publicKey}},$r=class extends Sn{type="Ed25519";publicKey;constructor(e){super({...e,type:"Ed25519"}),this.publicKey=e.multihash.digest}},Zr=class extends Sn{type="secp256k1";publicKey;constructor(e){super({...e,type:"secp256k1"}),this.publicKey=e.multihash.digest}};function Nt(t,e){if(e=e??o0,t.charAt(0)==="1"||t.charAt(0)==="Q"){let r=wn(Gt.decode(`z${t}`));return t.startsWith("12D")?new $r({multihash:r}):t.startsWith("16U")?new Zr({multihash:r}):new Qr({multihash:r})}return Bn(o0.decode(t))}function Bn(t){try{let e=wn(t);if(e.code===Je.code){if(e.digest.length===Fs)return new $r({multihash:e});if(e.digest.length===qs)return new Zr({multihash:e})}if(e.code===kt.code)return new Qr({multihash:e})}catch{return Mh(mr.decode(t))}throw new Error("Supplied PeerID CID is invalid")}function Mh(t){if(t==null||t.multihash==null||t.version==null||t.version===1&&t.code!==a0)throw new Error("Supplied PeerID CID is invalid");let e=t.multihash;if(e.code===kt.code)return new Qr({multihash:t.multihash});if(e.code===Je.code){if(e.digest.length===Fs)return new $r({multihash:t.multihash});if(e.digest.length===qs)return new Zr({multihash:t.multihash})}throw new Error("Supplied PeerID CID is invalid")}async function ui(t,e){return t.length===Fs?new $r({multihash:Be(Je.code,t),privateKey:e}):t.length===qs?new Zr({multihash:Be(Je.code,t),privateKey:e}):new Qr({multihash:await kt.digest(t),publicKey:t,privateKey:e})}function Ue(t,e){let r={[Symbol.iterator]:()=>r,next:()=>{let n=t.next(),i=n.value;return n.done===!0||i==null?{done:!0,value:void 0}:{done:!1,value:e(i)}}};return r}var Cn=class{map;constructor(e){if(this.map=new Map,e!=null)for(let[r,n]of e.entries())this.map.set(r.toString(),n)}[Symbol.iterator](){return this.entries()}clear(){this.map.clear()}delete(e){this.map.delete(e.toString())}entries(){return Ue(this.map.entries(),e=>[Nt(e[0]),e[1]])}forEach(e){this.map.forEach((r,n)=>{e(r,Nt(n),this)})}get(e){return this.map.get(e.toString())}has(e){return this.map.has(e.toString())}set(e,r){this.map.set(e.toString(),r)}keys(){return Ue(this.map.keys(),e=>Nt(e))}values(){return this.map.values()}get size(){return this.map.size}};var An=class t{set;constructor(e){if(this.set=new Set,e!=null)for(let r of e)this.set.add(r.toString())}get size(){return this.set.size}[Symbol.iterator](){return this.values()}add(e){this.set.add(e.toString())}clear(){this.set.clear()}delete(e){this.set.delete(e.toString())}entries(){return Ue(this.set.entries(),e=>{let r=Nt(e[0]);return[r,r]})}forEach(e){this.set.forEach(r=>{let n=Nt(r);e(n,n,this)})}has(e){return this.set.has(e.toString())}values(){return Ue(this.set.values(),e=>Nt(e))}intersection(e){let r=new t;for(let n of e)this.has(n)&&r.add(n);return r}difference(e){let r=new t;for(let n of this)e.has(n)||r.add(n);return r}union(e){let r=new t;for(let n of e)r.add(n);for(let n of this)r.add(n);return r}};var Vs=class t{list;constructor(e){if(this.list=[],e!=null)for(let r of e)this.list.push(r.toString())}[Symbol.iterator](){return Ue(this.list.entries(),e=>Nt(e[1]))}concat(e){let r=new t(this);for(let n of e)r.push(n);return r}entries(){return Ue(this.list.entries(),e=>[e[0],Nt(e[1])])}every(e){return this.list.every((r,n)=>e(Nt(r),n,this))}filter(e){let r=new t;return this.list.forEach((n,i)=>{let s=Nt(n);e(s,i,this)&&r.push(s)}),r}find(e){let r=this.list.find((n,i)=>e(Nt(n),i,this));if(r!=null)return Nt(r)}findIndex(e){return this.list.findIndex((r,n)=>e(Nt(r),n,this))}forEach(e){this.list.forEach((r,n)=>{e(Nt(r),n,this)})}includes(e){return this.list.includes(e.toString())}indexOf(e){return this.list.indexOf(e.toString())}pop(){let e=this.list.pop();if(e!=null)return Nt(e)}push(...e){for(let r of e)this.list.push(r.toString())}shift(){let e=this.list.shift();if(e!=null)return Nt(e)}unshift(...e){let r=this.list.length;for(let n=e.length-1;n>-1;n--)r=this.list.unshift(e[n].toString());return r}get length(){return this.list.length}};function ci(){let t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}var fi=class{buffer;mask;top;btm;next;constructor(e){if(!(e>0)||e-1&e)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},Xr=class{size;hwm;head;tail;constructor(e={}){this.hwm=e.splitLimit??16,this.head=new fi(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let r=this.head;this.head=r.next=new fi(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let r=this.tail.next;this.tail.next=null,this.tail=r,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};var Hs=class extends Error{type;code;constructor(e,r){super(e??"The operation was aborted"),this.type="aborted",this.code=r??"ABORT_ERR"}};function Jr(t={}){return Fh(r=>{let n=r.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},t)}function Fh(t,e){e=e??{};let r=e.onEnd,n=new Xr,i,s,o,a=ci(),u=async()=>{try{return n.isEmpty()?o?{done:!0}:await new Promise((y,m)=>{s=w=>{s=null,n.push(w);try{y(t(n))}catch(b){m(b)}return i}}):t(n)}finally{n.isEmpty()&&queueMicrotask(()=>{a.resolve(),a=ci()})}},c=y=>s!=null?s(y):(n.push(y),i),f=y=>(n=new Xr,s!=null?s({error:y}):(n.push({error:y}),i)),l=y=>{if(o)return i;if(e?.objectMode!==!0&&y?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return c({done:!1,value:y})},h=y=>o?i:(o=!0,y!=null?f(y):c({done:!0})),g=()=>(n=new Xr,h(),{done:!0}),d=y=>(h(y),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:u,return:g,throw:d,push:l,end:h,get readableLength(){return n.size},onEmpty:async y=>{let m=y?.signal;if(m?.throwIfAborted(),n.isEmpty())return;let w,b;m!=null&&(w=new Promise((T,E)=>{b=()=>{E(new Hs)},m.addEventListener("abort",b)}));try{await Promise.race([a.promise,w])}finally{b!=null&&m!=null&&m?.removeEventListener("abort",b)}}},r==null)return i;let p=i;return i={[Symbol.asyncIterator](){return this},next(){return p.next()},throw(y){return p.throw(y),r!=null&&(r(y),r=void 0),{done:!0}},return(){return p.return(),r!=null&&(r(),r=void 0),{done:!0}},push:l,end(y){return p.end(y),r!=null&&(r(y),r=void 0),i},get readableLength(){return p.readableLength}},i}function qh(t){return t[Symbol.asyncIterator]!=null}function Vh(...t){let e=[];for(let r of t)qh(r)||e.push(r);return e.length===t.length?function*(){for(let r of e)yield*r}():async function*(){let r=Jr({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(t.map(async n=>{for await(let i of n)r.push(i)})),r.end()}catch(n){r.end(n)}}),yield*r}()}var u0=Vh;function _n(t,...e){if(t==null)throw new Error("Empty pipeline");if(zs(t)){let n=t;t=()=>n.source}else if(f0(t)||c0(t)){let n=t;t=()=>n}let r=[t,...e];if(r.length>1&&zs(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let n=1;n<r.length-1;n++)zs(r[n])&&(r[n]=zh(r[n]));return Hh(...r)}var Hh=(...t)=>{let e;for(;t.length>0;)e=t.shift()(e);return e},c0=t=>t?.[Symbol.asyncIterator]!=null,f0=t=>t?.[Symbol.iterator]!=null,zs=t=>t==null?!1:t.sink!=null&&t.source!=null,zh=t=>e=>{let r=t.sink(e);if(r?.then!=null){let n=Jr({objectMode:!0});r.then(()=>{n.end()},o=>{n.end(o)});let i,s=t.source;if(c0(s))i=async function*(){yield*s,n.end()};else if(f0(s))i=function*(){yield*s,n.end()};else throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");return u0(n,i())}return t.source};var Ws=dt(h0(),1);var Tn=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},Ys=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},d0=t=>globalThis.DOMException===void 0?new Ys(t):new DOMException(t),p0=t=>{let e=t.reason===void 0?d0("This operation was aborted."):t.reason;return e instanceof Error?e:d0(e)};function Qs(t,e,r,n){let i,s=new Promise((o,a)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){o(t);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){let{signal:u}=n;u.aborted&&a(p0(u)),u.addEventListener("abort",()=>{a(p0(u))})}i=n.customTimers.setTimeout.call(void 0,()=>{if(typeof r=="function"){try{o(r())}catch(f){a(f)}return}let u=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,c=r instanceof Error?r:new Tn(u);typeof t.cancel=="function"&&t.cancel(),a(c)},e),(async()=>{try{o(await t)}catch(u){a(u)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()});return s.clear=()=>{clearTimeout(i),i=void 0},s}function $s(t,e,r){let n=0,i=t.length;for(;i>0;){let s=Math.trunc(i/2),o=n+s;r(t[o],e)<=0?(n=++o,i-=s+1):i=s}return n}var xr=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Oe,Zs=class{constructor(){Oe.set(this,[])}enqueue(e,r){r={priority:0,...r};let n={priority:r.priority,run:e};if(this.size&&xr(this,Oe,"f")[this.size-1].priority>=r.priority){xr(this,Oe,"f").push(n);return}let i=$s(xr(this,Oe,"f"),n,(s,o)=>o.priority-s.priority);xr(this,Oe,"f").splice(i,0,n)}dequeue(){let e=xr(this,Oe,"f").shift();return e?.run}filter(e){return xr(this,Oe,"f").filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return xr(this,Oe,"f").length}};Oe=new WeakMap;var y0=Zs;var wt=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},M=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Ct,Ln,Nn,tr,mi,Dn,hi,le,Rn,ne,di,ie,Pn,je,pi,g0,m0,v0,x0,b0,yi,Xs,Js,xi,w0,gi,bi=class extends Error{},js=class extends Ws.default{constructor(e){var r,n,i,s;if(super(),Ct.add(this),Ln.set(this,void 0),Nn.set(this,void 0),tr.set(this,0),mi.set(this,void 0),Dn.set(this,void 0),hi.set(this,0),le.set(this,void 0),Rn.set(this,void 0),ne.set(this,void 0),di.set(this,void 0),ie.set(this,0),Pn.set(this,void 0),je.set(this,void 0),pi.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:y0,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""}\` (${typeof e.interval})`);wt(this,Ln,e.carryoverConcurrencyCount,"f"),wt(this,Nn,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),wt(this,mi,e.intervalCap,"f"),wt(this,Dn,e.interval,"f"),wt(this,ne,new e.queueClass,"f"),wt(this,di,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,wt(this,pi,e.throwOnTimeout===!0,"f"),wt(this,je,e.autoStart===!1,"f")}get concurrency(){return M(this,Pn,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);wt(this,Pn,e,"f"),M(this,Ct,"m",xi).call(this)}async add(e,r={}){return r={timeout:this.timeout,throwOnTimeout:M(this,pi,"f"),...r},new Promise((n,i)=>{M(this,ne,"f").enqueue(async()=>{var s,o,a;wt(this,ie,(o=M(this,ie,"f"),o++,o),"f"),wt(this,tr,(a=M(this,tr,"f"),a++,a),"f");try{if(!((s=r.signal)===null||s===void 0)&&s.aborted)throw new bi("The task was aborted.");let u=e({signal:r.signal});r.timeout&&(u=Qs(Promise.resolve(u),r.timeout)),r.signal&&(u=Promise.race([u,M(this,Ct,"m",w0).call(this,r.signal)]));let c=await u;n(c),this.emit("completed",c)}catch(u){if(u instanceof Tn&&!r.throwOnTimeout){n();return}i(u),this.emit("error",u)}finally{M(this,Ct,"m",v0).call(this)}},r),this.emit("add"),M(this,Ct,"m",yi).call(this)})}async addAll(e,r){return Promise.all(e.map(async n=>this.add(n,r)))}start(){return M(this,je,"f")?(wt(this,je,!1,"f"),M(this,Ct,"m",xi).call(this),this):this}pause(){wt(this,je,!0,"f")}clear(){wt(this,ne,new(M(this,di,"f")),"f")}async onEmpty(){M(this,ne,"f").size!==0&&await M(this,Ct,"m",gi).call(this,"empty")}async onSizeLessThan(e){M(this,ne,"f").size<e||await M(this,Ct,"m",gi).call(this,"next",()=>M(this,ne,"f").size<e)}async onIdle(){M(this,ie,"f")===0&&M(this,ne,"f").size===0||await M(this,Ct,"m",gi).call(this,"idle")}get size(){return M(this,ne,"f").size}sizeBy(e){return M(this,ne,"f").filter(e).length}get pending(){return M(this,ie,"f")}get isPaused(){return M(this,je,"f")}};Ln=new WeakMap,Nn=new WeakMap,tr=new WeakMap,mi=new WeakMap,Dn=new WeakMap,hi=new WeakMap,le=new WeakMap,Rn=new WeakMap,ne=new WeakMap,di=new WeakMap,ie=new WeakMap,Pn=new WeakMap,je=new WeakMap,pi=new WeakMap,Ct=new WeakSet,g0=function(){return M(this,Nn,"f")||M(this,tr,"f")<M(this,mi,"f")},m0=function(){return M(this,ie,"f")<M(this,Pn,"f")},v0=function(){var e;wt(this,ie,(e=M(this,ie,"f"),e--,e),"f"),M(this,Ct,"m",yi).call(this),this.emit("next")},x0=function(){M(this,Ct,"m",Js).call(this),M(this,Ct,"m",Xs).call(this),wt(this,Rn,void 0,"f")},b0=function(){let e=Date.now();if(M(this,le,"f")===void 0){let r=M(this,hi,"f")-e;if(r<0)wt(this,tr,M(this,Ln,"f")?M(this,ie,"f"):0,"f");else return M(this,Rn,"f")===void 0&&wt(this,Rn,setTimeout(()=>{M(this,Ct,"m",x0).call(this)},r),"f"),!0}return!1},yi=function(){if(M(this,ne,"f").size===0)return M(this,le,"f")&&clearInterval(M(this,le,"f")),wt(this,le,void 0,"f"),this.emit("empty"),M(this,ie,"f")===0&&this.emit("idle"),!1;if(!M(this,je,"f")){let e=!M(this,Ct,"a",b0);if(M(this,Ct,"a",g0)&&M(this,Ct,"a",m0)){let r=M(this,ne,"f").dequeue();return r?(this.emit("active"),r(),e&&M(this,Ct,"m",Xs).call(this),!0):!1}}return!1},Xs=function(){M(this,Nn,"f")||M(this,le,"f")!==void 0||(wt(this,le,setInterval(()=>{M(this,Ct,"m",Js).call(this)},M(this,Dn,"f")),"f"),wt(this,hi,Date.now()+M(this,Dn,"f"),"f"))},Js=function(){M(this,tr,"f")===0&&M(this,ie,"f")===0&&M(this,le,"f")&&(clearInterval(M(this,le,"f")),wt(this,le,void 0,"f")),wt(this,tr,M(this,Ln,"f")?M(this,ie,"f"):0,"f"),M(this,Ct,"m",xi).call(this)},xi=function(){for(;M(this,Ct,"m",yi).call(this););},w0=async function(e){return new Promise((r,n)=>{e.addEventListener("abort",()=>{n(new bi("The task was aborted."))},{once:!0})})},gi=async function(e,r){return new Promise(n=>{let i=()=>{r&&!r()||(this.off(e,i),n())};this.on(e,i)})};var E0=js;var Ut={ERR_INVALID_SIGNATURE_POLICY:"ERR_INVALID_SIGNATURE_POLICY",ERR_UNHANDLED_SIGNATURE_POLICY:"ERR_UNHANDLED_SIGNATURE_POLICY",ERR_MISSING_SIGNATURE:"ERR_MISSING_SIGNATURE",ERR_MISSING_SEQNO:"ERR_MISSING_SEQNO",ERR_MISSING_KEY:"ERR_MISSING_KEY",ERR_INVALID_SIGNATURE:"ERR_INVALID_SIGNATURE",ERR_MISSING_FROM:"ERR_MISSING_FROM",ERR_UNEXPECTED_FROM:"ERR_UNEXPECTED_FROM",ERR_UNEXPECTED_SIGNATURE:"ERR_UNEXPECTED_SIGNATURE",ERR_UNEXPECTED_KEY:"ERR_UNEXPECTED_KEY",ERR_UNEXPECTED_SEQNO:"ERR_UNEXPECTED_SEQNO",ERR_TOPIC_VALIDATOR_REJECT:"ERR_TOPIC_VALIDATOR_REJECT"};var kn=class extends Error{constructor(e,r){super(e??"The operation was aborted"),this.type="aborted",this.code=r??"ABORT_ERR"}};function S0(t){if(t!=null){if(typeof t[Symbol.iterator]=="function")return t[Symbol.iterator]();if(typeof t[Symbol.asyncIterator]=="function")return t[Symbol.asyncIterator]();if(typeof t.next=="function")return t}throw new Error("argument is not an iterator or iterable")}function B0(t,e,r){let n=r??{},i=S0(t);async function*s(){let o,a=()=>{o?.()};for(e.addEventListener("abort",a);;){let u;try{if(e.aborted){let{abortMessage:f,abortCode:l}=n;throw new kn(f,l)}let c=new Promise((f,l)=>{o=()=>{let{abortMessage:h,abortCode:g}=n;l(new kn(h,g))}});u=await Promise.race([c,i.next()]),o=null}catch(c){e.removeEventListener("abort",a);let f=c.type==="aborted"&&e.aborted;if(f&&n.onAbort!=null&&n.onAbort(t),typeof i.return=="function")try{let l=i.return();l instanceof Promise&&l.catch(h=>{n.onReturnError!=null&&n.onReturnError(h)})}catch(l){n.onReturnError!=null&&n.onReturnError(l)}if(f&&n.returnOnAbort===!0)return;throw c}if(u.done===!0)break;yield u.value}e.removeEventListener("abort",a)}return s()}function br(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Ke(t=0){return globalThis.Buffer?.alloc!=null?br(globalThis.Buffer.alloc(t)):new Uint8Array(t)}function he(t=0){return globalThis.Buffer?.allocUnsafe!=null?br(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}var Yh=Math.pow(2,7),Qh=Math.pow(2,14),$h=Math.pow(2,21),to=Math.pow(2,28),eo=Math.pow(2,35),ro=Math.pow(2,42),no=Math.pow(2,49),ot=128,$t=127;function vr(t){if(t<Yh)return 1;if(t<Qh)return 2;if(t<$h)return 3;if(t<to)return 4;if(t<eo)return 5;if(t<ro)return 6;if(t<no)return 7;if(Number.MAX_SAFE_INTEGER!=null&&t>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function Zh(t,e,r=0){switch(vr(t)){case 8:e[r++]=t&255|ot,t/=128;case 7:e[r++]=t&255|ot,t/=128;case 6:e[r++]=t&255|ot,t/=128;case 5:e[r++]=t&255|ot,t/=128;case 4:e[r++]=t&255|ot,t>>>=7;case 3:e[r++]=t&255|ot,t>>>=7;case 2:e[r++]=t&255|ot,t>>>=7;case 1:{e[r++]=t&255,t>>>=7;break}default:throw new Error("unreachable")}return e}function Xh(t,e,r=0){switch(vr(t)){case 8:e.set(r++,t&255|ot),t/=128;case 7:e.set(r++,t&255|ot),t/=128;case 6:e.set(r++,t&255|ot),t/=128;case 5:e.set(r++,t&255|ot),t/=128;case 4:e.set(r++,t&255|ot),t>>>=7;case 3:e.set(r++,t&255|ot),t>>>=7;case 2:e.set(r++,t&255|ot),t>>>=7;case 1:{e.set(r++,t&255),t>>>=7;break}default:throw new Error("unreachable")}return e}function Jh(t,e){let r=t[e],n=0;if(n+=r&$t,r<ot||(r=t[e+1],n+=(r&$t)<<7,r<ot)||(r=t[e+2],n+=(r&$t)<<14,r<ot)||(r=t[e+3],n+=(r&$t)<<21,r<ot)||(r=t[e+4],n+=(r&$t)*to,r<ot)||(r=t[e+5],n+=(r&$t)*eo,r<ot)||(r=t[e+6],n+=(r&$t)*ro,r<ot)||(r=t[e+7],n+=(r&$t)*no,r<ot))return n;throw new RangeError("Could not decode varint")}function jh(t,e){let r=t.get(e),n=0;if(n+=r&$t,r<ot||(r=t.get(e+1),n+=(r&$t)<<7,r<ot)||(r=t.get(e+2),n+=(r&$t)<<14,r<ot)||(r=t.get(e+3),n+=(r&$t)<<21,r<ot)||(r=t.get(e+4),n+=(r&$t)*to,r<ot)||(r=t.get(e+5),n+=(r&$t)*eo,r<ot)||(r=t.get(e+6),n+=(r&$t)*ro,r<ot)||(r=t.get(e+7),n+=(r&$t)*no,r<ot))return n;throw new RangeError("Could not decode varint")}function C0(t,e,r=0){return e==null&&(e=he(vr(t))),e instanceof Uint8Array?Zh(t,e,r):Xh(t,e,r)}function A0(t,e=0){return t instanceof Uint8Array?Jh(t,e):jh(t,e)}function Zt(t,e){e==null&&(e=t.reduce((i,s)=>i+s.length,0));let r=he(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return br(r)}var T0=Symbol.for("@achingbrain/uint8arraylist");function I0(t,e){if(e==null||e<0)throw new RangeError("index is out of bounds");let r=0;for(let n of t){let i=r+n.byteLength;if(e<i)return{buf:n,index:e-r};r=i}throw new RangeError("index is out of bounds")}function vi(t){return!!t?.[T0]}var er=class t{constructor(...e){Object.defineProperty(this,T0,{value:!0}),this.bufs=[],this.length=0,e.length>0&&this.appendAll(e)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...e){this.appendAll(e)}appendAll(e){let r=0;for(let n of e)if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.push(n);else if(vi(n))r+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}prepend(...e){this.prependAll(e)}prependAll(e){let r=0;for(let n of e.reverse())if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.unshift(n);else if(vi(n))r+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}get(e){let r=I0(this.bufs,e);return r.buf[r.index]}set(e,r){let n=I0(this.bufs,e);n.buf[n.index]=r}write(e,r=0){if(e instanceof Uint8Array)for(let n=0;n<e.length;n++)this.set(r+n,e[n]);else if(vi(e))for(let n=0;n<e.length;n++)this.set(r+n,e.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0)){if(e===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(e>=this.bufs[0].byteLength)e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}}}slice(e,r){let{bufs:n,length:i}=this._subList(e,r);return Zt(n,i)}subarray(e,r){let{bufs:n,length:i}=this._subList(e,r);return n.length===1?n[0]:Zt(n,i)}sublist(e,r){let{bufs:n,length:i}=this._subList(e,r),s=new t;return s.length=i,s.bufs=n,s}_subList(e,r){if(e=e??0,r=r??this.length,e<0&&(e=this.length+e),r<0&&(r=this.length+r),e<0||r>this.length)throw new RangeError("index is out of bounds");if(e===r)return{bufs:[],length:0};if(e===0&&r===this.length)return{bufs:[...this.bufs],length:this.length};let n=[],i=0;for(let s=0;s<this.bufs.length;s++){let o=this.bufs[s],a=i,u=a+o.byteLength;if(i=u,e>=u)continue;let c=e>=a&&e<u,f=r>a&&r<=u;if(c&&f){if(e===a&&r===u){n.push(o);break}let l=e-a;n.push(o.subarray(l,l+(r-e)));break}if(c){if(e===0){n.push(o);continue}n.push(o.subarray(e-a));continue}if(f){if(r===u){n.push(o);break}n.push(o.subarray(0,r-a));break}n.push(o)}return{bufs:n,length:r-e}}indexOf(e,r=0){if(!vi(e)&&!(e instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');let n=e instanceof Uint8Array?e:e.subarray();if(r=Number(r??0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),e.length===0)return r>this.length?this.length:r;let i=n.byteLength;if(i===0)throw new TypeError("search must be at least 1 byte long");let s=256,o=new Int32Array(s);for(let l=0;l<s;l++)o[l]=-1;for(let l=0;l<i;l++)o[n[l]]=l;let a=o,u=this.byteLength-n.byteLength,c=n.byteLength-1,f;for(let l=r;l<=u;l+=f){f=0;for(let h=c;h>=0;h--){let g=this.get(l+h);if(n[h]!==g){f=Math.max(1,h-a[g]);break}}if(f===0)return l}return-1}getInt8(e){let r=this.subarray(e,e+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt8(0)}setInt8(e,r){let n=he(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,r),this.write(n,e)}getInt16(e,r){let n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,r)}setInt16(e,r,n){let i=Ke(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt16(0,r,n),this.write(i,e)}getInt32(e,r){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,r)}setInt32(e,r,n){let i=Ke(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt32(0,r,n),this.write(i,e)}getBigInt64(e,r){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,r)}setBigInt64(e,r,n){let i=Ke(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigInt64(0,r,n),this.write(i,e)}getUint8(e){let r=this.subarray(e,e+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint8(0)}setUint8(e,r){let n=he(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,r),this.write(n,e)}getUint16(e,r){let n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,r)}setUint16(e,r,n){let i=Ke(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint16(0,r,n),this.write(i,e)}getUint32(e,r){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,r)}setUint32(e,r,n){let i=Ke(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,r,n),this.write(i,e)}getBigUint64(e,r){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,r)}setBigUint64(e,r,n){let i=Ke(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigUint64(0,r,n),this.write(i,e)}getFloat32(e,r){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,r)}setFloat32(e,r,n){let i=Ke(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat32(0,r,n),this.write(i,e)}getFloat64(e,r){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,r)}setFloat64(e,r,n){let i=Ke(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat64(0,r,n),this.write(i,e)}equals(e){if(e==null||!(e instanceof t)||e.bufs.length!==this.bufs.length)return!1;for(let r=0;r<this.bufs.length;r++)if(!Yt(this.bufs[r],e.bufs[r]))return!1;return!0}static fromUint8Arrays(e,r){let n=new t;return n.bufs=e,r==null&&(r=e.reduce((i,s)=>i+s.byteLength,0)),n.length=r,n}};function wi(t){return t[Symbol.asyncIterator]!=null}var Ei=t=>{let e=vr(t),r=he(e);return C0(t,r),Ei.bytes=e,r};Ei.bytes=0;function Si(t,e){e=e??{};let r=e.lengthEncoder??Ei;function*n(i){let s=r(i.byteLength);s instanceof Uint8Array?yield s:yield*s,i instanceof Uint8Array?yield i:yield*i}return wi(t)?async function*(){for await(let i of t)yield*n(i)}():function*(){for(let i of t)yield*n(i)}()}Si.single=(t,e)=>{e=e??{};let r=e.lengthEncoder??Ei;return new er(r(t.byteLength),t)};var jr=dt(N0(),1);var ed=8,rd=1024*1024*4,wr;(function(t){t[t.LENGTH=0]="LENGTH",t[t.DATA=1]="DATA"})(wr||(wr={}));var io=t=>{let e=A0(t);return io.bytes=vr(e),e};io.bytes=0;function Un(t,e){let r=new er,n=wr.LENGTH,i=-1,s=e?.lengthDecoder??io,o=e?.maxLengthLength??ed,a=e?.maxDataLength??rd;function*u(){for(;r.byteLength>0;){if(n===wr.LENGTH)try{if(i=s(r),i<0)throw(0,jr.default)(new Error("invalid message length"),"ERR_INVALID_MSG_LENGTH");if(i>a)throw(0,jr.default)(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");let c=s.bytes;r.consume(c),e?.onLength!=null&&e.onLength(i),n=wr.DATA}catch(c){if(c instanceof RangeError){if(r.byteLength>o)throw(0,jr.default)(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG");break}throw c}if(n===wr.DATA){if(r.byteLength<i)break;let c=r.sublist(0,i);r.consume(i),e?.onData!=null&&e.onData(c),yield c,n=wr.LENGTH}}}return wi(t)?async function*(){for await(let c of t)r.append(c),yield*u();if(r.byteLength>0)throw(0,jr.default)(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}():function*(){for(let c of t)r.append(c),yield*u();if(r.byteLength>0)throw(0,jr.default)(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}()}Un.fromReader=(t,e)=>{let r=1,n=async function*(){for(;;)try{let{done:s,value:o}=await t.next(r);if(s===!0)return;o!=null&&(yield o)}catch(s){if(s.code==="ERR_UNDER_READ")return{done:!0,value:null};throw s}finally{r=1}}();return Un(n,{...e??{},onLength:s=>{r=s}})};var D0=oi("libp2p-pubsub:peer-streams"),Bi=class extends Kr{id;protocol;outboundStream;inboundStream;_rawOutboundStream;_rawInboundStream;_inboundAbortController;closed;constructor(e){super(),this.id=e.id,this.protocol=e.protocol,this._inboundAbortController=new AbortController,this.closed=!1}get isReadable(){return!!this.inboundStream}get isWritable(){return!!this.outboundStream}write(e){if(this.outboundStream==null){let r=this.id.toString();throw new Error("No writable connection to "+r)}this.outboundStream.push(e instanceof Uint8Array?new er(e):e)}attachInboundStream(e){return this._rawInboundStream=e,this.inboundStream=B0(_n(this._rawInboundStream,r=>Un(r)),this._inboundAbortController.signal,{returnOnAbort:!0}),this.dispatchEvent(new Se("stream:inbound")),this.inboundStream}async attachOutboundStream(e){let r=this.outboundStream;return this.outboundStream!=null&&this.outboundStream.end(),this._rawOutboundStream=e,this.outboundStream=Jr({objectMode:!0,onEnd:n=>{this._rawOutboundStream!=null&&this._rawOutboundStream.closeWrite().catch(i=>{D0("error closing outbound stream",i)}),this._rawOutboundStream=void 0,this.outboundStream=void 0,n!=null&&this.dispatchEvent(new Se("close"))}}),_n(this.outboundStream,n=>Si(n),this._rawOutboundStream).catch(n=>{D0.error(n)}),r==null&&this.dispatchEvent(new Se("stream:outbound")),this.outboundStream}close(){this.closed||(this.closed=!0,this.outboundStream!=null&&this.outboundStream.end(),this.inboundStream!=null&&this._inboundAbortController.abort(),this._rawOutboundStream=void 0,this.outboundStream=void 0,this._rawInboundStream=void 0,this.inboundStream=void 0,this.dispatchEvent(new Se("close")))}};var bx=dt(Ti(),1),hd=dt(ct(),1);function $0(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var Q0=$0("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),mo=$0("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=he(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),ld={utf8:Q0,"utf-8":Q0,hex:Yr.base16,latin1:mo,ascii:mo,binary:mo,...Yr},Ri=ld;function _t(t,e="utf8"){let r=Ri[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?br(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function Dt(t,e="utf8"){let r=Ri[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var It={get(t=globalThis){let e=t.crypto;if(e==null||e.subtle==null)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}};var Z0={SHA1:20,SHA256:32,SHA512:64};var yd={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"},gd=async(t,e)=>{let r=await It.get().subtle.sign({name:"HMAC"},t,e);return new Uint8Array(r,0,r.byteLength)};async function X0(t,e){let r=yd[t],n=await It.get().subtle.importKey("raw",e,{name:"HMAC",hash:{name:r}},!1,["sign"]);return{async digest(i){return gd(n,i)},length:Z0[t]}}var ei={};Lt(ei,{generateEphemeralKeyPair:()=>vf,generateKeyPair:()=>_g,generateKeyPairFromSeed:()=>Ig,importKey:()=>Ng,keyStretcher:()=>Sf,keysPBM:()=>pn,marshalPrivateKey:()=>Lg,marshalPublicKey:()=>Rg,supportedKeys:()=>De,unmarshalPrivateKey:()=>Jf,unmarshalPublicKey:()=>Tg});var Hw=dt(Fn(),1),zw=dt(ju(),1);var ms=dt(ct(),1);var la={};Lt(la,{Ed25519PrivateKey:()=>Dr,Ed25519PublicKey:()=>Qn,generateKeyPair:()=>X1,generateKeyPairFromSeed:()=>fa,unmarshalEd25519PrivateKey:()=>$1,unmarshalEd25519PublicKey:()=>Z1});function tc(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function To(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function ec(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");tc(t.outputLen),tc(t.blockLen)}function sn(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function rc(t,e){To(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var Gi=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var nc=t=>t instanceof Uint8Array;var Wi=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),ye=(t,e)=>t<<32-e|t>>>e,Py=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Py)throw new Error("Non little-endian hardware is not supported");function Ro(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Hn(t){if(typeof t=="string"&&(t=Ro(t)),!nc(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function Yi(...t){let e=new Uint8Array(t.reduce((n,i)=>n+i.length,0)),r=0;return t.forEach(n=>{if(!nc(n))throw new Error("Uint8Array expected");e.set(n,r),r+=n.length}),e}var on=class{clone(){return this._cloneInto()}},Jx={}.toString;function Qi(t){let e=n=>t().update(Hn(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function an(t=32){if(Gi&&typeof Gi.getRandomValues=="function")return Gi.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function ky(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),u=n?4:0,c=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+c,a,n)}var un=class extends on{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Wi(this.buffer)}update(e){sn(this);let{view:r,buffer:n,blockLen:i}=this;e=Hn(e);let s=e.length;for(let o=0;o<s;){let a=Math.min(i-this.pos,s-o);if(a===i){let u=Wi(e);for(;i<=s-o;o+=i)this.process(u,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){sn(this),rc(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:s}=this,{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let l=o;l<i;l++)r[l]=0;ky(n,i-8,BigInt(this.length*8),s),this.process(n,0);let a=Wi(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let c=u/4,f=this.get();if(c>f.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<c;l++)a.setUint32(4*l,f[l],s)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}};var $i=BigInt(4294967295),Lo=BigInt(32);function ic(t,e=!1){return e?{h:Number(t&$i),l:Number(t>>Lo&$i)}:{h:Number(t>>Lo&$i)|0,l:Number(t&$i)|0}}function Uy(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){let{h:s,l:o}=ic(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}var Oy=(t,e)=>BigInt(t>>>0)<<Lo|BigInt(e>>>0),Ky=(t,e,r)=>t>>>r,My=(t,e,r)=>t<<32-r|e>>>r,Fy=(t,e,r)=>t>>>r|e<<32-r,qy=(t,e,r)=>t<<32-r|e>>>r,Vy=(t,e,r)=>t<<64-r|e>>>r-32,Hy=(t,e,r)=>t>>>r-32|e<<64-r,zy=(t,e)=>e,Gy=(t,e)=>t,Wy=(t,e,r)=>t<<r|e>>>32-r,Yy=(t,e,r)=>e<<r|t>>>32-r,Qy=(t,e,r)=>e<<r-32|t>>>64-r,$y=(t,e,r)=>t<<r-32|e>>>64-r;function Zy(t,e,r,n){let i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}var Xy=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Jy=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,jy=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),t1=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,e1=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),r1=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0;var n1={fromBig:ic,split:Uy,toBig:Oy,shrSH:Ky,shrSL:My,rotrSH:Fy,rotrSL:qy,rotrBH:Vy,rotrBL:Hy,rotr32H:zy,rotr32L:Gy,rotlSH:Wy,rotlSL:Yy,rotlBH:Qy,rotlBL:$y,add:Zy,add3L:Xy,add3H:Jy,add4L:jy,add4H:t1,add5H:r1,add5L:e1},Z=n1;var[i1,s1]=(()=>Z.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),or=new Uint32Array(80),ar=new Uint32Array(80),No=class extends un{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:u,Eh:c,El:f,Fh:l,Fl:h,Gh:g,Gl:d,Hh:p,Hl:y}=this;return[e,r,n,i,s,o,a,u,c,f,l,h,g,d,p,y]}set(e,r,n,i,s,o,a,u,c,f,l,h,g,d,p,y){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=u|0,this.Eh=c|0,this.El=f|0,this.Fh=l|0,this.Fl=h|0,this.Gh=g|0,this.Gl=d|0,this.Hh=p|0,this.Hl=y|0}process(e,r){for(let b=0;b<16;b++,r+=4)or[b]=e.getUint32(r),ar[b]=e.getUint32(r+=4);for(let b=16;b<80;b++){let T=or[b-15]|0,E=ar[b-15]|0,S=Z.rotrSH(T,E,1)^Z.rotrSH(T,E,8)^Z.shrSH(T,E,7),L=Z.rotrSL(T,E,1)^Z.rotrSL(T,E,8)^Z.shrSL(T,E,7),N=or[b-2]|0,G=ar[b-2]|0,W=Z.rotrSH(N,G,19)^Z.rotrBH(N,G,61)^Z.shrSH(N,G,6),H=Z.rotrSL(N,G,19)^Z.rotrBL(N,G,61)^Z.shrSL(N,G,6),j=Z.add4L(L,H,ar[b-7],ar[b-16]),ft=Z.add4H(j,S,W,or[b-7],or[b-16]);or[b]=ft|0,ar[b]=j|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:u,Dh:c,Dl:f,Eh:l,El:h,Fh:g,Fl:d,Gh:p,Gl:y,Hh:m,Hl:w}=this;for(let b=0;b<80;b++){let T=Z.rotrSH(l,h,14)^Z.rotrSH(l,h,18)^Z.rotrBH(l,h,41),E=Z.rotrSL(l,h,14)^Z.rotrSL(l,h,18)^Z.rotrBL(l,h,41),S=l&g^~l&p,L=h&d^~h&y,N=Z.add5L(w,E,L,s1[b],ar[b]),G=Z.add5H(N,m,T,S,i1[b],or[b]),W=N|0,H=Z.rotrSH(n,i,28)^Z.rotrBH(n,i,34)^Z.rotrBH(n,i,39),j=Z.rotrSL(n,i,28)^Z.rotrBL(n,i,34)^Z.rotrBL(n,i,39),ft=n&s^n&a^s&a,Vt=i&o^i&u^o&u;m=p|0,w=y|0,p=g|0,y=d|0,g=l|0,d=h|0,{h:l,l:h}=Z.add(c|0,f|0,G|0,W|0),c=a|0,f=u|0,a=s|0,u=o|0,s=n|0,o=i|0;let _=Z.add3L(W,j,Vt);n=Z.add3H(_,G,H,ft),i=_|0}({h:n,l:i}=Z.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=Z.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:u}=Z.add(this.Ch|0,this.Cl|0,a|0,u|0),{h:c,l:f}=Z.add(this.Dh|0,this.Dl|0,c|0,f|0),{h:l,l:h}=Z.add(this.Eh|0,this.El|0,l|0,h|0),{h:g,l:d}=Z.add(this.Fh|0,this.Fl|0,g|0,d|0),{h:p,l:y}=Z.add(this.Gh|0,this.Gl|0,p|0,y|0),{h:m,l:w}=Z.add(this.Hh|0,this.Hl|0,m|0,w|0),this.set(n,i,s,o,a,u,c,f,l,h,g,d,p,y,m,w)}roundClean(){or.fill(0),ar.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var Do=Qi(()=>new No);var Ji={};Lt(Ji,{bitGet:()=>h1,bitLen:()=>l1,bitMask:()=>zn,bitSet:()=>d1,bytesToHex:()=>Ve,bytesToNumberBE:()=>He,bytesToNumberLE:()=>ur,concatBytes:()=>ze,createHmacDrbg:()=>Uo,ensureBytes:()=>Bt,equalBytes:()=>c1,hexToBytes:()=>_r,hexToNumber:()=>ko,numberToBytesBE:()=>cr,numberToBytesLE:()=>Ir,numberToHexUnpadded:()=>ac,numberToVarBytesBE:()=>u1,utf8ToBytes:()=>f1,validateObject:()=>Le});var oc=BigInt(0),Zi=BigInt(1),o1=BigInt(2),Xi=t=>t instanceof Uint8Array,a1=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ve(t){if(!Xi(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=a1[t[r]];return e}function ac(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function ko(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function _r(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let r=new Uint8Array(e/2);for(let n=0;n<r.length;n++){let i=n*2,s=t.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");r[n]=o}return r}function He(t){return ko(Ve(t))}function ur(t){if(!Xi(t))throw new Error("Uint8Array expected");return ko(Ve(Uint8Array.from(t).reverse()))}function cr(t,e){return _r(t.toString(16).padStart(e*2,"0"))}function Ir(t,e){return cr(t,e).reverse()}function u1(t){return _r(ac(t))}function Bt(t,e,r){let n;if(typeof e=="string")try{n=_r(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else if(Xi(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${t} expected ${r} bytes, got ${i}`);return n}function ze(...t){let e=new Uint8Array(t.reduce((n,i)=>n+i.length,0)),r=0;return t.forEach(n=>{if(!Xi(n))throw new Error("Uint8Array expected");e.set(n,r),r+=n.length}),e}function c1(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function f1(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function l1(t){let e;for(e=0;t>oc;t>>=Zi,e+=1);return e}function h1(t,e){return t>>BigInt(e)&Zi}var d1=(t,e,r)=>t|(r?Zi:oc)<<BigInt(e),zn=t=>(o1<<BigInt(t-1))-Zi,Po=t=>new Uint8Array(t),sc=t=>Uint8Array.from(t);function Uo(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Po(t),i=Po(t),s=0,o=()=>{n.fill(1),i.fill(0),s=0},a=(...l)=>r(i,n,...l),u=(l=Po())=>{i=a(sc([0]),l),n=a(),l.length!==0&&(i=a(sc([1]),l),n=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let l=0,h=[];for(;l<e;){n=a();let g=n.slice();h.push(g),l+=n.length}return ze(...h)};return(l,h)=>{o(),u(l);let g;for(;!(g=h(c()));)u();return o(),g}}var p1={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Le(t,e,r={}){let n=(i,s,o)=>{let a=p1[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);let u=t[i];if(!(o&&u===void 0)&&!a(u,t))throw new Error(`Invalid param ${String(i)}=${u} (${typeof u}), expected ${s}`)};for(let[i,s]of Object.entries(e))n(i,s,!1);for(let[i,s]of Object.entries(r))n(i,s,!0);return t}var Ot=BigInt(0),bt=BigInt(1),Tr=BigInt(2),y1=BigInt(3),Oo=BigInt(4),uc=BigInt(5),cc=BigInt(8),g1=BigInt(9),m1=BigInt(16);function lt(t,e){let r=t%e;return r>=Ot?r:e+r}function x1(t,e,r){if(r<=Ot||e<Ot)throw new Error("Expected power/modulo > 0");if(r===bt)return Ot;let n=bt;for(;e>Ot;)e&bt&&(n=n*t%r),t=t*t%r,e>>=bt;return n}function vt(t,e,r){let n=t;for(;e-- >Ot;)n*=n,n%=r;return n}function ji(t,e){if(t===Ot||e<=Ot)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=lt(t,e),n=e,i=Ot,s=bt,o=bt,a=Ot;for(;r!==Ot;){let c=n/r,f=n%r,l=i-o*c,h=s-a*c;n=r,r=f,i=o,s=a,o=l,a=h}if(n!==bt)throw new Error("invert: does not exist");return lt(i,e)}function b1(t){let e=(t-bt)/Tr,r,n,i;for(r=t-bt,n=0;r%Tr===Ot;r/=Tr,n++);for(i=Tr;i<t&&x1(i,e,t)!==t-bt;i++);if(n===1){let o=(t+bt)/Oo;return function(u,c){let f=u.pow(c,o);if(!u.eql(u.sqr(f),c))throw new Error("Cannot find square root");return f}}let s=(r+bt)/Tr;return function(a,u){if(a.pow(u,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=n,f=a.pow(a.mul(a.ONE,i),r),l=a.pow(u,s),h=a.pow(u,r);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let g=1;for(let p=a.sqr(h);g<c&&!a.eql(p,a.ONE);g++)p=a.sqr(p);let d=a.pow(f,bt<<BigInt(c-g-1));f=a.sqr(d),l=a.mul(l,d),h=a.mul(h,f),c=g}return l}}function v1(t){if(t%Oo===y1){let e=(t+bt)/Oo;return function(n,i){let s=n.pow(i,e);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%cc===uc){let e=(t-uc)/cc;return function(n,i){let s=n.mul(i,Tr),o=n.pow(s,e),a=n.mul(i,o),u=n.mul(n.mul(a,Tr),o),c=n.mul(a,n.sub(u,n.ONE));if(!n.eql(n.sqr(c),i))throw new Error("Cannot find square root");return c}}return t%m1,b1(t)}var fc=(t,e)=>(lt(t,e)&bt)===bt,w1=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ko(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=w1.reduce((n,i)=>(n[i]="function",n),e);return Le(t,r)}function E1(t,e,r){if(r<Ot)throw new Error("Expected power > 0");if(r===Ot)return t.ONE;if(r===bt)return e;let n=t.ONE,i=e;for(;r>Ot;)r&bt&&(n=t.mul(n,i)),i=t.sqr(i),r>>=bt;return n}function S1(t,e){let r=new Array(e.length),n=e.reduce((s,o,a)=>t.is0(o)?s:(r[a]=s,t.mul(s,o)),t.ONE),i=t.inv(n);return e.reduceRight((s,o,a)=>t.is0(o)?s:(r[a]=t.mul(s,r[a]),t.mul(s,o)),i),r}function Mo(t,e){let r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function ts(t,e,r=!1,n={}){if(t<=Ot)throw new Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:i,nByteLength:s}=Mo(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");let o=v1(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:zn(i),ZERO:Ot,ONE:bt,create:u=>lt(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return Ot<=u&&u<t},is0:u=>u===Ot,isOdd:u=>(u&bt)===bt,neg:u=>lt(-u,t),eql:(u,c)=>u===c,sqr:u=>lt(u*u,t),add:(u,c)=>lt(u+c,t),sub:(u,c)=>lt(u-c,t),mul:(u,c)=>lt(u*c,t),pow:(u,c)=>E1(a,u,c),div:(u,c)=>lt(u*ji(c,t),t),sqrN:u=>u*u,addN:(u,c)=>u+c,subN:(u,c)=>u-c,mulN:(u,c)=>u*c,inv:u=>ji(u,t),sqrt:n.sqrt||(u=>o(a,u)),invertBatch:u=>S1(a,u),cmov:(u,c,f)=>f?c:u,toBytes:u=>r?Ir(u,s):cr(u,s),fromBytes:u=>{if(u.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${u.length}`);return r?ur(u):He(u)}});return Object.freeze(a)}function lc(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r}function hc(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function Fo(t){let e=hc(t);return e+Math.ceil(e/2)}function dc(t,e,r=!1){let n=t.length,i=hc(e),s=Fo(e);if(n<16||n<s||n>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${n}`);let o=r?He(t):ur(t),a=lt(o,e-bt)+bt;return r?Ir(a,i):cr(a,i)}var C1=BigInt(0),qo=BigInt(1);function es(t,e){let r=(i,s)=>{let o=s.negate();return i?o:s},n=i=>{let s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:r,unsafeLadder(i,s){let o=t.ZERO,a=i;for(;s>C1;)s&qo&&(o=o.add(a)),a=a.double(),s>>=qo;return o},precomputeWindow(i,s){let{windows:o,windowSize:a}=n(s),u=[],c=i,f=c;for(let l=0;l<o;l++){f=c,u.push(f);for(let h=1;h<a;h++)f=f.add(c),u.push(f);c=f.double()}return u},wNAF(i,s,o){let{windows:a,windowSize:u}=n(i),c=t.ZERO,f=t.BASE,l=BigInt(2**i-1),h=2**i,g=BigInt(i);for(let d=0;d<a;d++){let p=d*u,y=Number(o&l);o>>=g,y>u&&(y-=h,o+=qo);let m=p,w=p+Math.abs(y)-1,b=d%2!==0,T=y<0;y===0?f=f.add(r(b,s[m])):c=c.add(r(T,s[w]))}return{p:c,f}},wNAFCached(i,s,o,a){let u=i._WINDOW_SIZE||1,c=s.get(i);return c||(c=this.precomputeWindow(i,u),u!==1&&s.set(i,a(c))),this.wNAF(u,c,o)}}}function Gn(t){return Ko(t.Fp),Le(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Mo(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}var ge=BigInt(0),se=BigInt(1),rs=BigInt(2),A1=BigInt(8),_1={zip215:!0};function I1(t){let e=Gn(t);return Le(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function ns(t){let e=I1(t),{Fp:r,n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:u}=e,c=rs<<BigInt(a*8)-se,f=r.create,l=e.uvRatio||((D,C)=>{try{return{isValid:!0,value:r.sqrt(D*r.inv(C))}}catch{return{isValid:!1,value:ge}}}),h=e.adjustScalarBytes||(D=>D),g=e.domain||((D,C,O)=>{if(C.length||O)throw new Error("Contexts/pre-hash are not supported");return D}),d=D=>typeof D=="bigint"&&ge<D,p=(D,C)=>d(D)&&d(C)&&D<C,y=D=>D===ge||p(D,c);function m(D,C){if(p(D,C))return D;throw new Error(`Expected valid scalar < ${C}, got ${typeof D} ${D}`)}function w(D){return D===ge?D:m(D,n)}let b=new Map;function T(D){if(!(D instanceof E))throw new Error("ExtendedPoint expected")}class E{constructor(C,O,F,z){if(this.ex=C,this.ey=O,this.ez=F,this.et=z,!y(C))throw new Error("x required");if(!y(O))throw new Error("y required");if(!y(F))throw new Error("z required");if(!y(z))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(C){if(C instanceof E)throw new Error("extended point not allowed");let{x:O,y:F}=C||{};if(!y(O)||!y(F))throw new Error("invalid affine point");return new E(O,F,se,f(O*F))}static normalizeZ(C){let O=r.invertBatch(C.map(F=>F.ez));return C.map((F,z)=>F.toAffine(O[z])).map(E.fromAffine)}_setWindowSize(C){this._WINDOW_SIZE=C,b.delete(this)}assertValidity(){let{a:C,d:O}=e;if(this.is0())throw new Error("bad point: ZERO");let{ex:F,ey:z,ez:X,et:tt}=this,ut=f(F*F),et=f(z*z),st=f(X*X),Rt=f(st*st),Et=f(ut*C),Ht=f(st*f(Et+et)),zt=f(Rt+f(O*f(ut*et)));if(Ht!==zt)throw new Error("bad point: equation left != right (1)");let Pt=f(F*z),Wt=f(X*tt);if(Pt!==Wt)throw new Error("bad point: equation left != right (2)")}equals(C){T(C);let{ex:O,ey:F,ez:z}=this,{ex:X,ey:tt,ez:ut}=C,et=f(O*ut),st=f(X*z),Rt=f(F*ut),Et=f(tt*z);return et===st&&Rt===Et}is0(){return this.equals(E.ZERO)}negate(){return new E(f(-this.ex),this.ey,this.ez,f(-this.et))}double(){let{a:C}=e,{ex:O,ey:F,ez:z}=this,X=f(O*O),tt=f(F*F),ut=f(rs*f(z*z)),et=f(C*X),st=O+F,Rt=f(f(st*st)-X-tt),Et=et+tt,Ht=Et-ut,zt=et-tt,Pt=f(Rt*Ht),Wt=f(Et*zt),Pe=f(Rt*zt),pr=f(Ht*Et);return new E(Pt,Wt,pr,Pe)}add(C){T(C);let{a:O,d:F}=e,{ex:z,ey:X,ez:tt,et:ut}=this,{ex:et,ey:st,ez:Rt,et:Et}=C;if(O===BigInt(-1)){let Ia=f((X-z)*(st+et)),Ta=f((X+z)*(st-et)),xs=f(Ta-Ia);if(xs===ge)return this.double();let Ra=f(tt*rs*Et),La=f(ut*rs*Rt),Na=La+Ra,Da=Ta+Ia,Pa=La-Ra,ll=f(Na*xs),hl=f(Da*Pa),dl=f(Na*Pa),pl=f(xs*Da);return new E(ll,hl,pl,dl)}let Ht=f(z*et),zt=f(X*st),Pt=f(ut*F*Et),Wt=f(tt*Rt),Pe=f((z+X)*(et+st)-Ht-zt),pr=Wt-Pt,mn=Wt+Pt,_a=f(zt-O*Ht),al=f(Pe*pr),ul=f(mn*_a),cl=f(Pe*_a),fl=f(pr*mn);return new E(al,ul,fl,cl)}subtract(C){return this.add(C.negate())}wNAF(C){return N.wNAFCached(this,b,C,E.normalizeZ)}multiply(C){let{p:O,f:F}=this.wNAF(m(C,n));return E.normalizeZ([O,F])[0]}multiplyUnsafe(C){let O=w(C);return O===ge?L:this.equals(L)||O===se?this:this.equals(S)?this.wNAF(O).p:N.unsafeLadder(this,O)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return N.unsafeLadder(this,n).is0()}toAffine(C){let{ex:O,ey:F,ez:z}=this,X=this.is0();C==null&&(C=X?A1:r.inv(z));let tt=f(O*C),ut=f(F*C),et=f(z*C);if(X)return{x:ge,y:se};if(et!==se)throw new Error("invZ was invalid");return{x:tt,y:ut}}clearCofactor(){let{h:C}=e;return C===se?this:this.multiplyUnsafe(C)}static fromHex(C,O=!1){let{d:F,a:z}=e,X=r.BYTES;C=Bt("pointHex",C,X);let tt=C.slice(),ut=C[X-1];tt[X-1]=ut&-129;let et=ur(tt);et===ge||(O?m(et,c):m(et,r.ORDER));let st=f(et*et),Rt=f(st-se),Et=f(F*st-z),{isValid:Ht,value:zt}=l(Rt,Et);if(!Ht)throw new Error("Point.fromHex: invalid y coordinate");let Pt=(zt&se)===se,Wt=(ut&128)!==0;if(!O&&zt===ge&&Wt)throw new Error("Point.fromHex: x=0 and x_0=1");return Wt!==Pt&&(zt=f(-zt)),E.fromAffine({x:zt,y:et})}static fromPrivateKey(C){return H(C).point}toRawBytes(){let{x:C,y:O}=this.toAffine(),F=Ir(O,r.BYTES);return F[F.length-1]|=C&se?128:0,F}toHex(){return Ve(this.toRawBytes())}}E.BASE=new E(e.Gx,e.Gy,se,f(e.Gx*e.Gy)),E.ZERO=new E(ge,se,se,ge);let{BASE:S,ZERO:L}=E,N=es(E,a*8);function G(D){return lt(D,n)}function W(D){return G(ur(D))}function H(D){let C=a;D=Bt("private key",D,C);let O=Bt("hashed private key",s(D),2*C),F=h(O.slice(0,C)),z=O.slice(C,2*C),X=W(F),tt=S.multiply(X),ut=tt.toRawBytes();return{head:F,prefix:z,scalar:X,point:tt,pointBytes:ut}}function j(D){return H(D).pointBytes}function ft(D=new Uint8Array,...C){let O=ze(...C);return W(s(g(O,Bt("context",D),!!i)))}function Vt(D,C,O={}){D=Bt("message",D),i&&(D=i(D));let{prefix:F,scalar:z,pointBytes:X}=H(C),tt=ft(O.context,F,D),ut=S.multiply(tt).toRawBytes(),et=ft(O.context,ut,X,D),st=G(tt+et*z);w(st);let Rt=ze(ut,Ir(st,r.BYTES));return Bt("result",Rt,a*2)}let _=_1;function P(D,C,O,F=_){let{context:z,zip215:X}=F,tt=r.BYTES;D=Bt("signature",D,2*tt),C=Bt("message",C),i&&(C=i(C));let ut=ur(D.slice(tt,2*tt)),et,st,Rt;try{et=E.fromHex(O,X),st=E.fromHex(D.slice(0,tt),X),Rt=S.multiplyUnsafe(ut)}catch{return!1}if(!X&&et.isSmallOrder())return!1;let Et=ft(z,st.toRawBytes(),et.toRawBytes(),C);return st.add(et.multiplyUnsafe(Et)).subtract(Rt).clearCofactor().equals(E.ZERO)}return S._setWindowSize(8),{CURVE:e,getPublicKey:j,sign:Vt,verify:P,ExtendedPoint:E,utils:{getExtendedPublicKey:H,randomPrivateKey:()=>o(r.BYTES),precompute(D=8,C=E.BASE){return C._setWindowSize(D),C.multiply(BigInt(3)),C}}}}var Ho=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),pc=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),vb=BigInt(0),T1=BigInt(1),Vo=BigInt(2),R1=BigInt(5),yc=BigInt(10),L1=BigInt(20),N1=BigInt(40),gc=BigInt(80);function D1(t){let e=Ho,n=t*t%e*t%e,i=vt(n,Vo,e)*n%e,s=vt(i,T1,e)*t%e,o=vt(s,R1,e)*s%e,a=vt(o,yc,e)*o%e,u=vt(a,L1,e)*a%e,c=vt(u,N1,e)*u%e,f=vt(c,gc,e)*c%e,l=vt(f,gc,e)*c%e,h=vt(l,yc,e)*o%e;return{pow_p_5_8:vt(h,Vo,e)*t%e,b2:n}}function P1(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function k1(t,e){let r=Ho,n=lt(e*e*e,r),i=lt(n*n*e,r),s=D1(t*i).pow_p_5_8,o=lt(t*n*s,r),a=lt(e*o*o,r),u=o,c=lt(o*pc,r),f=a===t,l=a===lt(-t,r),h=a===lt(-t*pc,r);return f&&(o=u),(l||h)&&(o=c),fc(o,r)&&(o=lt(-o,r)),{isValid:f||l,value:o}}var Ge=ts(Ho,void 0,!0),zo={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Ge,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Do,randomBytes:an,adjustScalarBytes:P1,uvRatio:k1},cn=ns(zo);function mc(t,e,r){if(e.length>255)throw new Error("Context is too big");return Yi(Ro("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,e.length]),e,t)}var wb=ns({...zo,domain:mc}),Eb=ns({...zo,domain:mc,prehash:Do});var U1=(Ge.ORDER+BigInt(3))/BigInt(8),Sb=Ge.pow(Vo,U1),Bb=Ge.sqrt(Ge.neg(Ge.ONE)),Cb=(Ge.ORDER-BigInt(5))/BigInt(8),Ab=BigInt(486662);var _b=lc(Ge,Ge.neg(BigInt(486664)));var Ib=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),Tb=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),Rb=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),Lb=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");var Nb=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var fn=32,We=64,is=32;async function xc(){let t=cn.utils.randomPrivateKey(),e=cn.getPublicKey(t);return{privateKey:Ec(t,e),publicKey:e}}async function bc(t){if(t.length!==is)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let e=t,r=cn.getPublicKey(e);return{privateKey:Ec(e,r),publicKey:r}}async function vc(t,e){let r=t.subarray(0,is);return cn.sign(e,r)}async function wc(t,e,r){return cn.verify(e,r,t)}function Ec(t,e){let r=new Uint8Array(We);for(let n=0;n<is;n++)r[n]=t[n],r[is+n]=e[n];return r}var Go={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};function ss(t){let e=t?.algorithm??"AES-GCM",r=t?.keyLength??16,n=t?.nonceLength??12,i=t?.digest??"SHA-256",s=t?.saltLength??16,o=t?.iterations??32767,a=It.get();r*=8;async function u(l,h){let g=a.getRandomValues(new Uint8Array(s)),d=a.getRandomValues(new Uint8Array(n)),p={name:e,iv:d};typeof h=="string"&&(h=_t(h));let y;if(h.length===0){y=await a.subtle.importKey("jwk",Go,{name:"AES-GCM"},!0,["encrypt"]);try{let w={name:"PBKDF2",salt:g,iterations:o,hash:{name:i}},b=await a.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);y=await a.subtle.deriveKey(w,b,{name:e,length:r},!0,["encrypt"])}catch{y=await a.subtle.importKey("jwk",Go,{name:"AES-GCM"},!0,["encrypt"])}}else{let w={name:"PBKDF2",salt:g,iterations:o,hash:{name:i}},b=await a.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);y=await a.subtle.deriveKey(w,b,{name:e,length:r},!0,["encrypt"])}let m=await a.subtle.encrypt(p,y,l);return Zt([g,p.iv,new Uint8Array(m)])}async function c(l,h){let g=l.subarray(0,s),d=l.subarray(s,s+n),p=l.subarray(s+n),y={name:e,iv:d};typeof h=="string"&&(h=_t(h));let m;if(h.length===0)try{let b={name:"PBKDF2",salt:g,iterations:o,hash:{name:i}},T=await a.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);m=await a.subtle.deriveKey(b,T,{name:e,length:r},!0,["decrypt"])}catch{m=await a.subtle.importKey("jwk",Go,{name:"AES-GCM"},!0,["decrypt"])}else{let b={name:"PBKDF2",salt:g,iterations:o,hash:{name:i}},T=await a.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);m=await a.subtle.deriveKey(b,T,{name:e,length:r},!0,["decrypt"])}let w=await a.subtle.decrypt(y,m,p);return new Uint8Array(w)}return{encrypt:u,decrypt:c}}async function ln(t,e){let n=await ss().encrypt(t,e);return gr.encode(n)}var pn={};Lt(pn,{KeyType:()=>yt,PrivateKey:()=>we,PublicKey:()=>ve});var ia=dt(Zo(),1),lf=dt(rf(),1),hf=dt(Lr(),1),sa=dt(na(),1),df=dt(ff(),1);function W1(){hf.default._configure(),ia.default._configure(lf.default),sa.default._configure(df.default)}W1();var pf=["uint64","int64","sint64","fixed64","sfixed64"];function Y1(t){for(let e of pf){if(t[e]==null)continue;let r=t[e];t[e]=function(){return BigInt(r.call(this).toString())}}return t}function oa(t){return Y1(new ia.default(t))}function Q1(t){for(let e of pf){if(t[e]==null)continue;let r=t[e];t[e]=function(n){return r.call(this,n.toString())}}return t}function aa(){return Q1(sa.default.create())}function fs(t,e){let r=oa(t instanceof Uint8Array?t:t.subarray());return e.decode(r)}function ls(t,e){let r=aa();return e.encode(t,r,{lengthDelimited:!1}),r.finish()}var dn;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})(dn||(dn={}));function hs(t,e,r,n){return{name:t,type:e,encode:r,decode:n}}function ua(t){function e(i){if(t[i.toString()]==null)throw new Error("Invalid enum value");return t[i]}let r=function(s,o){let a=e(s);o.int32(a)},n=function(s){let o=s.int32();return e(o)};return hs("enum",dn.VARINT,r,n)}function ds(t,e){return hs("message",dn.LENGTH_DELIMITED,t,e)}var yt;(function(t){t.RSA="RSA",t.Ed25519="Ed25519",t.Secp256k1="Secp256k1"})(yt||(yt={}));var ca;(function(t){t[t.RSA=0]="RSA",t[t.Ed25519=1]="Ed25519",t[t.Secp256k1=2]="Secp256k1"})(ca||(ca={}));(function(t){t.codec=()=>ua(ca)})(yt||(yt={}));var ve;(function(t){let e;t.codec=()=>(e==null&&(e=ds((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),yt.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.Type=yt.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(o&7);break}}return i})),e),t.encode=r=>ls(r,t.codec()),t.decode=r=>fs(r,t.codec())})(ve||(ve={}));var we;(function(t){let e;t.codec=()=>(e==null&&(e=ds((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),yt.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.Type=yt.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(o&7);break}}return i})),e),t.encode=r=>ls(r,t.codec()),t.decode=r=>fs(r,t.codec())})(we||(we={}));var Qn=class{_key;constructor(e){this._key=yn(e,fn)}async verify(e,r){return wc(this._key,r,e)}marshal(){return this._key}get bytes(){return ve.encode({Type:yt.Ed25519,Data:this.marshal()}).subarray()}equals(e){return Yt(this.bytes,e.bytes)}async hash(){let{bytes:e}=await kt.digest(this.bytes);return e}},Dr=class{_key;_publicKey;constructor(e,r){this._key=yn(e,We),this._publicKey=yn(r,fn)}async sign(e){return vc(this._key,e)}get public(){return new Qn(this._publicKey)}marshal(){return this._key}get bytes(){return we.encode({Type:yt.Ed25519,Data:this.marshal()}).subarray()}equals(e){return Yt(this.bytes,e.bytes)}async hash(){let{bytes:e}=await kt.digest(this.bytes);return e}async id(){let e=Je.digest(this.public.bytes);return Gt.encode(e.bytes).substring(1)}async export(e,r="libp2p-key"){if(r==="libp2p-key")return ln(this.bytes,e);throw new K(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function $1(t){if(t.length>We){t=yn(t,We+fn);let n=t.subarray(0,We),i=t.subarray(We,t.length);return new Dr(n,i)}t=yn(t,We);let e=t.subarray(0,We),r=t.subarray(fn);return new Dr(e,r)}function Z1(t){return t=yn(t,fn),new Qn(t)}async function X1(){let{privateKey:t,publicKey:e}=await xc();return new Dr(t,e)}async function fa(t){let{privateKey:e,publicKey:r}=await bc(t);return new Dr(e,r)}function yn(t,e){if(t=Uint8Array.from(t??[]),t.length!==e)throw new K(`Key must be a Uint8Array of length ${e}, got ${t.length}`,"ERR_INVALID_KEY_TYPE");return t}var wv=dt(At(),1),Ev=dt(qi(),1),yf=dt(ct(),1);function Ee(t,e){let r=Uint8Array.from(t.abs().toByteArray());if(r=r[0]===0?r.subarray(1):r,e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=Zt([new Uint8Array(e-r.length),r])}return Dt(r,"base64url")}function oe(t){let e=ps(t);return new yf.default.jsbn.BigInteger(Dt(e,"base16"),16)}function ps(t,e){let r=_t(t,"base64urlpad");if(e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=Zt([new Uint8Array(e-r.length),r])}return r}var gf={"P-256":256,"P-384":384,"P-521":521},J1=Object.keys(gf),ha=J1.join(" / ");async function mf(t){if(t!=="P-256"&&t!=="P-384"&&t!=="P-521")throw new K(`Unknown curve: ${t}. Must be ${ha}`,"ERR_INVALID_CURVE");let e=await It.get().subtle.generateKey({name:"ECDH",namedCurve:t},!0,["deriveBits"]),r=async(s,o)=>{let a;o!=null?a=await It.get().subtle.importKey("jwk",tg(t,o),{name:"ECDH",namedCurve:t},!1,["deriveBits"]):a=e.privateKey;let u=await It.get().subtle.importKey("jwk",bf(t,s),{name:"ECDH",namedCurve:t},!1,[]),c=await It.get().subtle.deriveBits({name:"ECDH",namedCurve:t,public:u},a,gf[t]);return new Uint8Array(c,0,c.byteLength)},n=await It.get().subtle.exportKey("jwk",e.publicKey);return{key:j1(n),genSharedKey:r}}var xf={"P-256":32,"P-384":48,"P-521":66};function j1(t){if(t.crv==null||t.x==null||t.y==null)throw new K("JWK was missing components","ERR_INVALID_PARAMETERS");if(t.crv!=="P-256"&&t.crv!=="P-384"&&t.crv!=="P-521")throw new K(`Unknown curve: ${t.crv}. Must be ${ha}`,"ERR_INVALID_CURVE");let e=xf[t.crv];return Zt([Uint8Array.from([4]),ps(t.x,e),ps(t.y,e)],1+e*2)}function bf(t,e){if(t!=="P-256"&&t!=="P-384"&&t!=="P-521")throw new K(`Unknown curve: ${t}. Must be ${ha}`,"ERR_INVALID_CURVE");let r=xf[t];if(!Yt(e.subarray(0,1),Uint8Array.from([4])))throw new K("Cannot unmarshal public key - invalid key format","ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:t,x:Dt(e.subarray(1,r+1),"base64url"),y:Dt(e.subarray(1+r),"base64url"),ext:!0}}var tg=(t,e)=>({...bf(t,e.public),d:Dt(e.private,"base64url")});var vf=mf;async function wf(t,e){let r=gr.decode(t);return ss().decrypt(r,e)}var Ef={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,keySize:32}};async function Sf(t,e,r){let n=Ef[t];if(n==null){let w=Object.keys(Ef).join(" / ");throw new K(`unknown cipher type '${t}'. Must be ${w}`,"ERR_INVALID_CIPHER_TYPE")}if(e==null)throw new K("missing hash type","ERR_MISSING_HASH_TYPE");let i=n.keySize,s=n.ivSize,o=20,a=_t("key expansion"),u=2*(s+i+o),c=await X0(e,r),f=await c.digest(a),l=[],h=0;for(;h<u;){let w=await c.digest(Zt([f,a])),b=w.length;h+b>u&&(b=u-h),l.push(w),h+=b,f=await c.digest(f)}let g=u/2,d=Zt(l),p=d.subarray(0,g),y=d.subarray(g,u),m=w=>({iv:w.subarray(0,s),cipherKey:w.subarray(s,s+i),macKey:w.subarray(s+i)});return{k1:m(p),k2:m(y)}}var ma={};Lt(ma,{MAX_KEY_SIZE:()=>Jn,RsaPrivateKey:()=>gn,RsaPublicKey:()=>Xn,fromJwk:()=>fg,generateKeyPair:()=>lg,unmarshalRsaPrivateKey:()=>ug,unmarshalRsaPublicKey:()=>cg});var Zn=dt(ct(),1);var fw=dt(If(),1);function kr(t){if(isNaN(t)||t<=0)throw new K("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return an(t)}var Wv=dt(zi(),1),ya=dt(ct(),1);function Tf(t,e){return e.map(r=>oe(t[r]))}function Rf(t){return ya.default.pki.setRsaPrivateKey(...Tf(t,["n","e","d","p","q","dp","dq","qi"]))}function Lf(t){return ya.default.pki.setRsaPublicKey(...Tf(t,["n","e"]))}var Ur={};Lt(Ur,{jwkToPkcs1:()=>ng,jwkToPkix:()=>sg,pkcs1ToJwk:()=>rg,pkixToJwk:()=>ig});var $v=dt(Fn(),1),Zv=dt(zi(),1);var Ye=dt(ct(),1);function rg(t){let e=Ye.default.asn1.fromDer(Dt(t,"ascii")),r=Ye.default.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:Ee(r.n),e:Ee(r.e),d:Ee(r.d),p:Ee(r.p),q:Ee(r.q),dp:Ee(r.dP),dq:Ee(r.dQ),qi:Ee(r.qInv),alg:"RS256"}}function ng(t){if(t.n==null||t.e==null||t.d==null||t.p==null||t.q==null||t.dp==null||t.dq==null||t.qi==null)throw new K("JWK was missing components","ERR_INVALID_PARAMETERS");let e=Ye.default.pki.privateKeyToAsn1({n:oe(t.n),e:oe(t.e),d:oe(t.d),p:oe(t.p),q:oe(t.q),dP:oe(t.dp),dQ:oe(t.dq),qInv:oe(t.qi)});return _t(Ye.default.asn1.toDer(e).getBytes(),"ascii")}function ig(t){let e=Ye.default.asn1.fromDer(Dt(t,"ascii")),r=Ye.default.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:Ee(r.n),e:Ee(r.e)}}function sg(t){if(t.n==null||t.e==null)throw new K("JWK was missing components","ERR_INVALID_PARAMETERS");let e=Ye.default.pki.publicKeyToAsn1({n:oe(t.n),e:oe(t.e)});return _t(Ye.default.asn1.toDer(e).getBytes(),"ascii")}async function Nf(t){let e=await It.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await kf(e);return{privateKey:r[0],publicKey:r[1]}}async function ga(t){let r=[await It.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await og(t)],n=await kf({privateKey:r[0],publicKey:r[1]});return{privateKey:n[0],publicKey:n[1]}}async function Df(t,e){let r=await It.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await It.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(e));return new Uint8Array(n,0,n.byteLength)}async function Pf(t,e,r){let n=await It.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return It.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,e,r)}async function kf(t){if(t.privateKey==null||t.publicKey==null)throw new K("Private and public key are required","ERR_INVALID_PARAMETERS");return Promise.all([It.get().subtle.exportKey("jwk",t.privateKey),It.get().subtle.exportKey("jwk",t.publicKey)])}async function og(t){return It.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function Uf(t,e,r,n){let i=e?Lf(t):Rf(t),s=Dt(Uint8Array.from(r),"ascii"),o=n(s,i);return _t(o,"ascii")}function Of(t,e){return Uf(t,!0,e,(r,n)=>n.encrypt(r))}function Kf(t,e){return Uf(t,!1,e,(r,n)=>n.decrypt(r))}function ys(t){if(t.kty!=="RSA")throw new K("invalid key type","ERR_INVALID_KEY_TYPE");if(t.n==null)throw new K("invalid key modulus","ERR_INVALID_KEY_MODULUS");return _t(t.n,"base64url").length*8}var Jn=8192,Xn=class{_key;constructor(e){this._key=e}async verify(e,r){return Pf(this._key,r,e)}marshal(){return Ur.jwkToPkix(this._key)}get bytes(){return ve.encode({Type:yt.RSA,Data:this.marshal()}).subarray()}encrypt(e){return Of(this._key,e)}equals(e){return Yt(this.bytes,e.bytes)}async hash(){let{bytes:e}=await kt.digest(this.bytes);return e}},gn=class{_key;_publicKey;constructor(e,r){this._key=e,this._publicKey=r}genSecret(){return kr(16)}async sign(e){return Df(this._key,e)}get public(){if(this._publicKey==null)throw new K("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new Xn(this._publicKey)}decrypt(e){return Kf(this._key,e)}marshal(){return Ur.jwkToPkcs1(this._key)}get bytes(){return we.encode({Type:yt.RSA,Data:this.marshal()}).subarray()}equals(e){return Yt(this.bytes,e.bytes)}async hash(){let{bytes:e}=await kt.digest(this.bytes);return e}async id(){let e=await this.public.hash();return Dt(e,"base58btc")}async export(e,r="pkcs-8"){if(r==="pkcs-8"){let n=new Zn.default.util.ByteBuffer(this.marshal()),i=Zn.default.asn1.fromDer(n),s=Zn.default.pki.privateKeyFromAsn1(i),o={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return Zn.default.pki.encryptRsaPrivateKey(s,e,o)}else{if(r==="libp2p-key")return ln(this.bytes,e);throw new K(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}};async function ug(t){let e=Ur.pkcs1ToJwk(t);if(ys(e)>Jn)throw new K("key size is too large","ERR_KEY_SIZE_TOO_LARGE");let r=await ga(e);return new gn(r.privateKey,r.publicKey)}function cg(t){let e=Ur.pkixToJwk(t);if(ys(e)>Jn)throw new K("key size is too large","ERR_KEY_SIZE_TOO_LARGE");return new Xn(e)}async function fg(t){if(ys(t)>Jn)throw new K("key size is too large","ERR_KEY_SIZE_TOO_LARGE");let e=await ga(t);return new gn(e.privateKey,e.publicKey)}async function lg(t){if(t>Jn)throw new K("key size is too large","ERR_KEY_SIZE_TOO_LARGE");let e=await Nf(t);return new gn(e.privateKey,e.publicKey)}var Sa={};Lt(Sa,{Secp256k1PrivateKey:()=>ti,Secp256k1PublicKey:()=>jn,generateKeyPair:()=>Ag,unmarshalSecp256k1PrivateKey:()=>Bg,unmarshalSecp256k1PublicKey:()=>Cg});var hg=(t,e,r)=>t&e^~t&r,dg=(t,e,r)=>t&e^t&r^e&r,pg=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),hr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),dr=new Uint32Array(64),xa=class extends un{constructor(){super(64,32,8,!1),this.A=hr[0]|0,this.B=hr[1]|0,this.C=hr[2]|0,this.D=hr[3]|0,this.E=hr[4]|0,this.F=hr[5]|0,this.G=hr[6]|0,this.H=hr[7]|0}get(){let{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:u}=this;return[e,r,n,i,s,o,a,u]}set(e,r,n,i,s,o,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,r){for(let l=0;l<16;l++,r+=4)dr[l]=e.getUint32(r,!1);for(let l=16;l<64;l++){let h=dr[l-15],g=dr[l-2],d=ye(h,7)^ye(h,18)^h>>>3,p=ye(g,17)^ye(g,19)^g>>>10;dr[l]=p+dr[l-7]+d+dr[l-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:u,G:c,H:f}=this;for(let l=0;l<64;l++){let h=ye(a,6)^ye(a,11)^ye(a,25),g=f+h+hg(a,u,c)+pg[l]+dr[l]|0,p=(ye(n,2)^ye(n,13)^ye(n,22))+dg(n,i,s)|0;f=c,c=u,u=a,a=o+g|0,o=s,s=i,i=n,n=g+p|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,c=c+this.G|0,f=f+this.H|0,this.set(n,i,s,o,a,u,c,f)}roundClean(){dr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Mf=Qi(()=>new xa);function yg(t){let e=Gn(t);Le(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:gg,hexToBytes:mg}=Ji,Or={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){let{Err:e}=Or;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");let r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:gg(n),l:t.subarray(r+2)}},toSig(t){let{Err:e}=Or,r=typeof t=="string"?mg(t):t;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");let{d:i,l:s}=Or._parseInt(r.subarray(2)),{d:o,l:a}=Or._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(t){let e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,r=c=>{let f=c.toString(16);return f.length&1?`0${f}`:f},n=e(r(t.s)),i=e(r(t.r)),s=n.length/2,o=i.length/2,a=r(s),u=r(o);return`30${r(o+s+4)}02${u}${i}02${a}${n}`}},Qe=BigInt(0),fe=BigInt(1),bw=BigInt(2),Ff=BigInt(3),vw=BigInt(4);function xg(t){let e=yg(t),{Fp:r}=e,n=e.toBytes||((d,p,y)=>{let m=p.toAffine();return ze(Uint8Array.from([4]),r.toBytes(m.x),r.toBytes(m.y))}),i=e.fromBytes||(d=>{let p=d.subarray(1),y=r.fromBytes(p.subarray(0,r.BYTES)),m=r.fromBytes(p.subarray(r.BYTES,2*r.BYTES));return{x:y,y:m}});function s(d){let{a:p,b:y}=e,m=r.sqr(d),w=r.mul(m,d);return r.add(r.add(w,r.mul(d,p)),y)}if(!r.eql(r.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(d){return typeof d=="bigint"&&Qe<d&&d<e.n}function a(d){if(!o(d))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(d){let{allowedPrivateKeyLengths:p,nByteLength:y,wrapPrivateKey:m,n:w}=e;if(p&&typeof d!="bigint"){if(d instanceof Uint8Array&&(d=Ve(d)),typeof d!="string"||!p.includes(d.length))throw new Error("Invalid key");d=d.padStart(y*2,"0")}let b;try{b=typeof d=="bigint"?d:He(Bt("private key",d,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof d}`)}return m&&(b=lt(b,w)),a(b),b}let c=new Map;function f(d){if(!(d instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(p,y,m){if(this.px=p,this.py=y,this.pz=m,p==null||!r.isValid(p))throw new Error("x required");if(y==null||!r.isValid(y))throw new Error("y required");if(m==null||!r.isValid(m))throw new Error("z required")}static fromAffine(p){let{x:y,y:m}=p||{};if(!p||!r.isValid(y)||!r.isValid(m))throw new Error("invalid affine point");if(p instanceof l)throw new Error("projective point not allowed");let w=b=>r.eql(b,r.ZERO);return w(y)&&w(m)?l.ZERO:new l(y,m,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(p){let y=r.invertBatch(p.map(m=>m.pz));return p.map((m,w)=>m.toAffine(y[w])).map(l.fromAffine)}static fromHex(p){let y=l.fromAffine(i(Bt("pointHex",p)));return y.assertValidity(),y}static fromPrivateKey(p){return l.BASE.multiply(u(p))}_setWindowSize(p){this._WINDOW_SIZE=p,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:p,y}=this.toAffine();if(!r.isValid(p)||!r.isValid(y))throw new Error("bad point: x or y not FE");let m=r.sqr(y),w=s(p);if(!r.eql(m,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:p}=this.toAffine();if(r.isOdd)return!r.isOdd(p);throw new Error("Field doesn't support isOdd")}equals(p){f(p);let{px:y,py:m,pz:w}=this,{px:b,py:T,pz:E}=p,S=r.eql(r.mul(y,E),r.mul(b,w)),L=r.eql(r.mul(m,E),r.mul(T,w));return S&&L}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){let{a:p,b:y}=e,m=r.mul(y,Ff),{px:w,py:b,pz:T}=this,E=r.ZERO,S=r.ZERO,L=r.ZERO,N=r.mul(w,w),G=r.mul(b,b),W=r.mul(T,T),H=r.mul(w,b);return H=r.add(H,H),L=r.mul(w,T),L=r.add(L,L),E=r.mul(p,L),S=r.mul(m,W),S=r.add(E,S),E=r.sub(G,S),S=r.add(G,S),S=r.mul(E,S),E=r.mul(H,E),L=r.mul(m,L),W=r.mul(p,W),H=r.sub(N,W),H=r.mul(p,H),H=r.add(H,L),L=r.add(N,N),N=r.add(L,N),N=r.add(N,W),N=r.mul(N,H),S=r.add(S,N),W=r.mul(b,T),W=r.add(W,W),N=r.mul(W,H),E=r.sub(E,N),L=r.mul(W,G),L=r.add(L,L),L=r.add(L,L),new l(E,S,L)}add(p){f(p);let{px:y,py:m,pz:w}=this,{px:b,py:T,pz:E}=p,S=r.ZERO,L=r.ZERO,N=r.ZERO,G=e.a,W=r.mul(e.b,Ff),H=r.mul(y,b),j=r.mul(m,T),ft=r.mul(w,E),Vt=r.add(y,m),_=r.add(b,T);Vt=r.mul(Vt,_),_=r.add(H,j),Vt=r.sub(Vt,_),_=r.add(y,w);let P=r.add(b,E);return _=r.mul(_,P),P=r.add(H,ft),_=r.sub(_,P),P=r.add(m,w),S=r.add(T,E),P=r.mul(P,S),S=r.add(j,ft),P=r.sub(P,S),N=r.mul(G,_),S=r.mul(W,ft),N=r.add(S,N),S=r.sub(j,N),N=r.add(j,N),L=r.mul(S,N),j=r.add(H,H),j=r.add(j,H),ft=r.mul(G,ft),_=r.mul(W,_),j=r.add(j,ft),ft=r.sub(H,ft),ft=r.mul(G,ft),_=r.add(_,ft),H=r.mul(j,_),L=r.add(L,H),H=r.mul(P,_),S=r.mul(Vt,S),S=r.sub(S,H),H=r.mul(Vt,j),N=r.mul(P,N),N=r.add(N,H),new l(S,L,N)}subtract(p){return this.add(p.negate())}is0(){return this.equals(l.ZERO)}wNAF(p){return g.wNAFCached(this,c,p,y=>{let m=r.invertBatch(y.map(w=>w.pz));return y.map((w,b)=>w.toAffine(m[b])).map(l.fromAffine)})}multiplyUnsafe(p){let y=l.ZERO;if(p===Qe)return y;if(a(p),p===fe)return this;let{endo:m}=e;if(!m)return g.unsafeLadder(this,p);let{k1neg:w,k1:b,k2neg:T,k2:E}=m.splitScalar(p),S=y,L=y,N=this;for(;b>Qe||E>Qe;)b&fe&&(S=S.add(N)),E&fe&&(L=L.add(N)),N=N.double(),b>>=fe,E>>=fe;return w&&(S=S.negate()),T&&(L=L.negate()),L=new l(r.mul(L.px,m.beta),L.py,L.pz),S.add(L)}multiply(p){a(p);let y=p,m,w,{endo:b}=e;if(b){let{k1neg:T,k1:E,k2neg:S,k2:L}=b.splitScalar(y),{p:N,f:G}=this.wNAF(E),{p:W,f:H}=this.wNAF(L);N=g.constTimeNegate(T,N),W=g.constTimeNegate(S,W),W=new l(r.mul(W.px,b.beta),W.py,W.pz),m=N.add(W),w=G.add(H)}else{let{p:T,f:E}=this.wNAF(y);m=T,w=E}return l.normalizeZ([m,w])[0]}multiplyAndAddUnsafe(p,y,m){let w=l.BASE,b=(E,S)=>S===Qe||S===fe||!E.equals(w)?E.multiplyUnsafe(S):E.multiply(S),T=b(this,y).add(b(p,m));return T.is0()?void 0:T}toAffine(p){let{px:y,py:m,pz:w}=this,b=this.is0();p==null&&(p=b?r.ONE:r.inv(w));let T=r.mul(y,p),E=r.mul(m,p),S=r.mul(w,p);if(b)return{x:r.ZERO,y:r.ZERO};if(!r.eql(S,r.ONE))throw new Error("invZ was invalid");return{x:T,y:E}}isTorsionFree(){let{h:p,isTorsionFree:y}=e;if(p===fe)return!0;if(y)return y(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:p,clearCofactor:y}=e;return p===fe?this:y?y(l,this):this.multiplyUnsafe(e.h)}toRawBytes(p=!0){return this.assertValidity(),n(l,this,p)}toHex(p=!0){return Ve(this.toRawBytes(p))}}l.BASE=new l(e.Gx,e.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);let h=e.nBitLength,g=es(l,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:s,isWithinCurveOrder:o}}function bg(t){let e=Gn(t);return Le(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function qf(t){let e=bg(t),{Fp:r,n}=e,i=r.BYTES+1,s=2*r.BYTES+1;function o(_){return Qe<_&&_<r.ORDER}function a(_){return lt(_,n)}function u(_){return ji(_,n)}let{ProjectivePoint:c,normPrivateKeyToScalar:f,weierstrassEquation:l,isWithinCurveOrder:h}=xg({...e,toBytes(_,P,R){let D=P.toAffine(),C=r.toBytes(D.x),O=ze;return R?O(Uint8Array.from([P.hasEvenY()?2:3]),C):O(Uint8Array.from([4]),C,r.toBytes(D.y))},fromBytes(_){let P=_.length,R=_[0],D=_.subarray(1);if(P===i&&(R===2||R===3)){let C=He(D);if(!o(C))throw new Error("Point is not on curve");let O=l(C),F=r.sqrt(O),z=(F&fe)===fe;return(R&1)===1!==z&&(F=r.neg(F)),{x:C,y:F}}else if(P===s&&R===4){let C=r.fromBytes(D.subarray(0,r.BYTES)),O=r.fromBytes(D.subarray(r.BYTES,2*r.BYTES));return{x:C,y:O}}else throw new Error(`Point of length ${P} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),g=_=>Ve(cr(_,e.nByteLength));function d(_){let P=n>>fe;return _>P}function p(_){return d(_)?a(-_):_}let y=(_,P,R)=>He(_.slice(P,R));class m{constructor(P,R,D){this.r=P,this.s=R,this.recovery=D,this.assertValidity()}static fromCompact(P){let R=e.nByteLength;return P=Bt("compactSignature",P,R*2),new m(y(P,0,R),y(P,R,2*R))}static fromDER(P){let{r:R,s:D}=Or.toSig(Bt("DER",P));return new m(R,D)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(P){return new m(this.r,this.s,P)}recoverPublicKey(P){let{r:R,s:D,recovery:C}=this,O=L(Bt("msgHash",P));if(C==null||![0,1,2,3].includes(C))throw new Error("recovery id invalid");let F=C===2||C===3?R+e.n:R;if(F>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let z=C&1?"03":"02",X=c.fromHex(z+g(F)),tt=u(F),ut=a(-O*tt),et=a(D*tt),st=c.BASE.multiplyAndAddUnsafe(X,ut,et);if(!st)throw new Error("point at infinify");return st.assertValidity(),st}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return _r(this.toDERHex())}toDERHex(){return Or.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return _r(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}let w={isValidPrivateKey(_){try{return f(_),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{let _=Fo(e.n);return dc(e.randomBytes(_),e.n)},precompute(_=8,P=c.BASE){return P._setWindowSize(_),P.multiply(BigInt(3)),P}};function b(_,P=!0){return c.fromPrivateKey(_).toRawBytes(P)}function T(_){let P=_ instanceof Uint8Array,R=typeof _=="string",D=(P||R)&&_.length;return P?D===i||D===s:R?D===2*i||D===2*s:_ instanceof c}function E(_,P,R=!0){if(T(_))throw new Error("first arg must be private key");if(!T(P))throw new Error("second arg must be public key");return c.fromHex(P).multiply(f(_)).toRawBytes(R)}let S=e.bits2int||function(_){let P=He(_),R=_.length*8-e.nBitLength;return R>0?P>>BigInt(R):P},L=e.bits2int_modN||function(_){return a(S(_))},N=zn(e.nBitLength);function G(_){if(typeof _!="bigint")throw new Error("bigint expected");if(!(Qe<=_&&_<N))throw new Error(`bigint expected < 2^${e.nBitLength}`);return cr(_,e.nByteLength)}function W(_,P,R=H){if(["recovered","canonical"].some(Et=>Et in R))throw new Error("sign() legacy options not supported");let{hash:D,randomBytes:C}=e,{lowS:O,prehash:F,extraEntropy:z}=R;O==null&&(O=!0),_=Bt("msgHash",_),F&&(_=Bt("prehashed msgHash",D(_)));let X=L(_),tt=f(P),ut=[G(tt),G(X)];if(z!=null){let Et=z===!0?C(r.BYTES):z;ut.push(Bt("extraEntropy",Et))}let et=ze(...ut),st=X;function Rt(Et){let Ht=S(Et);if(!h(Ht))return;let zt=u(Ht),Pt=c.BASE.multiply(Ht).toAffine(),Wt=a(Pt.x);if(Wt===Qe)return;let Pe=a(zt*a(st+Wt*tt));if(Pe===Qe)return;let pr=(Pt.x===Wt?0:2)|Number(Pt.y&fe),mn=Pe;return O&&d(Pe)&&(mn=p(Pe),pr^=1),new m(Wt,mn,pr)}return{seed:et,k2sig:Rt}}let H={lowS:e.lowS,prehash:!1},j={lowS:e.lowS,prehash:!1};function ft(_,P,R=H){let{seed:D,k2sig:C}=W(_,P,R),O=e;return Uo(O.hash.outputLen,O.nByteLength,O.hmac)(D,C)}c.BASE._setWindowSize(8);function Vt(_,P,R,D=j){let C=_;if(P=Bt("msgHash",P),R=Bt("publicKey",R),"strict"in D)throw new Error("options.strict was renamed to lowS");let{lowS:O,prehash:F}=D,z,X;try{if(typeof C=="string"||C instanceof Uint8Array)try{z=m.fromDER(C)}catch(Pt){if(!(Pt instanceof Or.Err))throw Pt;z=m.fromCompact(C)}else if(typeof C=="object"&&typeof C.r=="bigint"&&typeof C.s=="bigint"){let{r:Pt,s:Wt}=C;z=new m(Pt,Wt)}else throw new Error("PARSE");X=c.fromHex(R)}catch(Pt){if(Pt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(O&&z.hasHighS())return!1;F&&(P=e.hash(P));let{r:tt,s:ut}=z,et=L(P),st=u(ut),Rt=a(et*st),Et=a(tt*st),Ht=c.BASE.multiplyAndAddUnsafe(X,Rt,Et)?.toAffine();return Ht?a(Ht.x)===tt:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:E,sign:ft,verify:Vt,ProjectivePoint:c,Signature:m,utils:w}}var gs=class extends on{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,ec(e);let n=Hn(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return sn(this),this.iHash.update(e),this}digestInto(e){sn(this),To(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},ba=(t,e,r)=>new gs(t,e).update(r).digest();ba.create=(t,e)=>new gs(t,e);function vg(t){return{hash:t,hmac:(e,...r)=>ba(t,e,Yi(...r)),randomBytes:an}}function Vf(t,e){let r=n=>qf({...t,...vg(n)});return Object.freeze({...r(e),create:r})}var Gf=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Hf=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),wg=BigInt(1),va=BigInt(2),zf=(t,e)=>(t+e/va)/e;function Eg(t){let e=Gf,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),c=t*t*t%e,f=c*c*t%e,l=vt(f,r,e)*f%e,h=vt(l,r,e)*f%e,g=vt(h,va,e)*c%e,d=vt(g,i,e)*g%e,p=vt(d,s,e)*d%e,y=vt(p,a,e)*p%e,m=vt(y,u,e)*y%e,w=vt(m,a,e)*p%e,b=vt(w,r,e)*f%e,T=vt(b,o,e)*d%e,E=vt(T,n,e)*c%e,S=vt(E,va,e);if(!wa.eql(wa.sqr(S),t))throw new Error("Cannot find square root");return S}var wa=ts(Gf,void 0,void 0,{sqrt:Eg}),$e=Vf({a:BigInt(0),b:BigInt(7),Fp:wa,n:Hf,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=Hf,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-wg*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=zf(s*t,e),u=zf(-n*t,e),c=lt(t-a*r-u*i,e),f=lt(-a*n-u*s,e),l=c>o,h=f>o;if(l&&(c=e-c),h&&(f=e-f),c>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:l,k1:c,k2neg:h,k2:f}}}},Mf),Nw=BigInt(0);var Dw=$e.ProjectivePoint;function Wf(){return $e.utils.randomPrivateKey()}async function Yf(t,e){let{digest:r}=await kt.digest(e);try{return $e.sign(r,t).toDERRawBytes()}catch(n){throw new K(String(n),"ERR_INVALID_INPUT")}}async function Qf(t,e,r){try{let{digest:n}=await kt.digest(r);return $e.verify(e,n,t)}catch(n){throw new K(String(n),"ERR_INVALID_INPUT")}}function $f(t){return $e.ProjectivePoint.fromHex(t).toRawBytes(!0)}function Zf(t){try{$e.getPublicKey(t,!0)}catch(e){throw new K(String(e),"ERR_INVALID_PRIVATE_KEY")}}function Ea(t){try{$e.ProjectivePoint.fromHex(t)}catch(e){throw new K(String(e),"ERR_INVALID_PUBLIC_KEY")}}function Xf(t){try{return $e.getPublicKey(t,!0)}catch(e){throw new K(String(e),"ERR_INVALID_PRIVATE_KEY")}}var jn=class{_key;constructor(e){Ea(e),this._key=e}async verify(e,r){return Qf(this._key,r,e)}marshal(){return $f(this._key)}get bytes(){return ve.encode({Type:yt.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return Yt(this.bytes,e.bytes)}async hash(){let{bytes:e}=await kt.digest(this.bytes);return e}},ti=class{_key;_publicKey;constructor(e,r){this._key=e,this._publicKey=r??Xf(e),Zf(this._key),Ea(this._publicKey)}async sign(e){return Yf(this._key,e)}get public(){return new jn(this._publicKey)}marshal(){return this._key}get bytes(){return we.encode({Type:yt.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return Yt(this.bytes,e.bytes)}async hash(){let{bytes:e}=await kt.digest(this.bytes);return e}async id(){let e=await this.public.hash();return Dt(e,"base58btc")}async export(e,r="libp2p-key"){if(r==="libp2p-key")return ln(this.bytes,e);throw new K(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function Bg(t){return new ti(t)}function Cg(t){return new jn(t)}async function Ag(){let t=Wf();return new ti(t)}var De={rsa:ma,ed25519:la,secp256k1:Sa};function Ba(t){let e=Object.keys(De).join(" / ");return new K(`invalid or unsupported key type ${t}. Must be ${e}`,"ERR_UNSUPPORTED_KEY_TYPE")}function Ca(t){if(t=t.toLowerCase(),t==="rsa"||t==="ed25519"||t==="secp256k1")return De[t];throw Ba(t)}async function _g(t,e){return Ca(t).generateKeyPair(e??2048)}async function Ig(t,e,r){if(t.toLowerCase()!=="ed25519")throw new K("Seed key derivation is unimplemented for RSA or secp256k1","ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return fa(e)}function Tg(t){let e=ve.decode(t),r=e.Data??new Uint8Array;switch(e.Type){case yt.RSA:return De.rsa.unmarshalRsaPublicKey(r);case yt.Ed25519:return De.ed25519.unmarshalEd25519PublicKey(r);case yt.Secp256k1:return De.secp256k1.unmarshalSecp256k1PublicKey(r);default:throw Ba(e.Type??"unknown")}}function Rg(t,e){return e=(e??"rsa").toLowerCase(),Ca(e),t.bytes}async function Jf(t){let e=we.decode(t),r=e.Data??new Uint8Array;switch(e.Type){case yt.RSA:return De.rsa.unmarshalRsaPrivateKey(r);case yt.Ed25519:return De.ed25519.unmarshalEd25519PrivateKey(r);case yt.Secp256k1:return De.secp256k1.unmarshalSecp256k1PrivateKey(r);default:throw Ba(e.Type??"RSA")}}function Lg(t,e){return e=(e??"rsa").toLowerCase(),Ca(e),t.bytes}async function Ng(t,e){try{let i=await wf(t,e);return await Jf(i)}catch{}let r=ms.default.pki.decryptRsaPrivateKey(t,e);if(r===null)throw new K("Cannot read the key, most likely the password is wrong or not a RSA key","ERR_CANNOT_DECRYPT_PEM");let n=ms.default.asn1.toDer(ms.default.pki.privateKeyToAsn1(r));return n=_t(n.getBytes(),"ascii"),De.rsa.unmarshalRsaPrivateKey(n)}var Dg=dt(bo(),1),Pg=dt(At(),1);function jf(){return BigInt(`0x${Dt(kr(8),"base16")}`)}var tl=(t,e)=>{let r=_t(e.toString(16).padStart(16,"0"),"base16"),n=new Uint8Array(t.length+r.length);return n.set(t,0),n.set(r,t.length),n},el=t=>kt.encode(t);var rl=function(t){return Array.isArray(t)?t:[t]},kg=async t=>{if(t.sequenceNumber==null||t.from==null||t.signature==null)return!1;let e=Bn(t.from);return e.publicKey!=null?!0:t.key!=null?(await ui(t.key)).equals(e):!1},nl=async t=>{if(t.from==null)throw new K("RPC message was missing from",Ut.ERR_MISSING_FROM);if(!await kg(t))return{type:"unsigned",topic:t.topic??"",data:t.data??new Uint8Array(0)};let e=Bn(t.from),r={type:"signed",from:Bn(t.from),topic:t.topic??"",sequenceNumber:Og(t.sequenceNumber??new Uint8Array(0)),data:t.data??new Uint8Array(0),signature:t.signature??new Uint8Array(0),key:t.key??e.publicKey??new Uint8Array(0)};if(r.key.length===0)throw new K("Signed RPC message was missing key",Ut.ERR_MISSING_KEY);return r},ri=t=>t.type==="signed"?{from:t.from.multihash.bytes,data:t.data,sequenceNumber:Ug(t.sequenceNumber),topic:t.topic,signature:t.signature,key:t.key}:{data:t.data,topic:t.topic},Ug=t=>{let e=t.toString(16);return e.length%2!==0&&(e=`0${e}`),_t(e,"base16")},Og=t=>BigInt(`0x${Dt(t,"base16")}`);var il=_t("libp2p-pubsub:");async function sl(t,e,r){if(t.privateKey==null)throw new Error("Cannot sign message, no private key present");if(t.publicKey==null)throw new Error("Cannot sign message, no public key present");let n={type:"signed",topic:e.topic,data:e.data,sequenceNumber:e.sequenceNumber,from:t},i=Zt([il,r(ri(n)).subarray()]),s=await ei.unmarshalPrivateKey(t.privateKey);return n.signature=await s.sign(i),n.key=t.publicKey,n}async function ol(t,e){if(t.type!=="signed")throw new Error('Message type must be "signed" to be verified');if(t.signature==null)throw new Error("Message must contain a signature to be verified");if(t.from==null)throw new Error("Message must contain a from property to be verified");let r=Zt([il,e({...ri(t),signature:void 0,key:void 0}).subarray()]),n=await Kg(t);return ei.unmarshalPublicKey(n).verify(r,t.signature)}async function Kg(t){if(t.type!=="signed")throw new Error('Message type must be "signed" to have a public key');if(t.from==null)throw new Error("Could not get the public key from the originator id");if(t.key!=null){let e=await ui(t.key);if(e.publicKey!=null)return e.publicKey}if(t.from.publicKey!=null)return t.from.publicKey;throw new Error("Could not get the public key from the originator id")}var mt=oi("libp2p:pubsub"),Aa=class extends Kr{started;topics;subscriptions;peers;globalSignaturePolicy;canRelayMessage;emitSelf;topicValidators;queue;multicodecs;components;_registrarTopologyIds;enabled;maxInboundStreams;maxOutboundStreams;constructor(e,r){super();let{multicodecs:n=[],globalSignaturePolicy:i="StrictSign",canRelayMessage:s=!1,emitSelf:o=!1,messageProcessingConcurrency:a=10,maxInboundStreams:u=1,maxOutboundStreams:c=1}=r;this.components=e,this.multicodecs=rl(n),this.enabled=r.enabled!==!1,this.started=!1,this.topics=new Map,this.subscriptions=new Set,this.peers=new Cn,this.globalSignaturePolicy=i==="StrictNoSign"?"StrictNoSign":"StrictSign",this.canRelayMessage=s,this.emitSelf=o,this.topicValidators=new Map,this.queue=new E0({concurrency:a}),this.maxInboundStreams=u,this.maxOutboundStreams=c,this._onIncomingStream=this._onIncomingStream.bind(this),this._onPeerConnected=this._onPeerConnected.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this)}async start(){if(this.started||!this.enabled)return;mt("starting");let e=this.components.registrar;await Promise.all(this.multicodecs.map(async n=>{await e.handle(n,this._onIncomingStream,{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams})}));let r={onConnect:this._onPeerConnected,onDisconnect:this._onPeerDisconnected};this._registrarTopologyIds=await Promise.all(this.multicodecs.map(async n=>e.register(n,r))),mt("started"),this.started=!0}async stop(){if(!this.started||!this.enabled)return;let e=this.components.registrar;this._registrarTopologyIds!=null&&this._registrarTopologyIds?.forEach(r=>{e.unregister(r)}),await Promise.all(this.multicodecs.map(async r=>{await e.unhandle(r)})),mt("stopping");for(let r of this.peers.values())r.close();this.peers.clear(),this.subscriptions=new Set,this.started=!1,mt("stopped")}isStarted(){return this.started}_onIncomingStream(e){let{stream:r,connection:n}=e,i=n.remotePeer;if(r.protocol==null){r.abort(new Error("Stream was not multiplexed"));return}let s=this.addPeer(i,r.protocol),o=s.attachInboundStream(r);this.processMessages(i,o,s).catch(a=>{mt(a)})}_onPeerConnected(e,r){mt("connected %p",e),Promise.resolve().then(async()=>{try{let n=await r.newStream(this.multicodecs);if(n.protocol==null){n.abort(new Error("Stream was not multiplexed"));return}await this.addPeer(e,n.protocol).attachOutboundStream(n)}catch(n){mt.error(n)}this.send(e,{subscriptions:Array.from(this.subscriptions).map(n=>n.toString()),subscribe:!0})}).catch(n=>{mt.error(n)})}_onPeerDisconnected(e,r){let n=e.toString();mt("connection ended",n),this._removePeer(e)}addPeer(e,r){let n=this.peers.get(e);if(n!=null)return n;mt("new peer %p",e);let i=new Bi({id:e,protocol:r});return this.peers.set(e,i),i.addEventListener("close",()=>this._removePeer(e),{once:!0}),i}_removePeer(e){let r=this.peers.get(e);if(r!=null){r.close(),mt("delete peer %p",e),this.peers.delete(e);for(let n of this.topics.values())n.delete(e);return r}}async processMessages(e,r,n){try{await _n(r,async i=>{for await(let s of i){let o=this.decodeRpc(s),a=[];for(let u of o.messages??[]){if(u.from==null||u.data==null||u.topic==null){mt("message from %p was missing from, data or topic fields, dropping",e);continue}a.push({from:u.from,data:u.data,topic:u.topic,sequenceNumber:u.sequenceNumber??void 0,signature:u.signature??void 0,key:u.key??void 0})}this.processRpc(e,n,{subscriptions:(o.subscriptions??[]).map(u=>({subscribe:!!u.subscribe,topic:u.topic??""})),messages:a}).catch(u=>{mt(u)})}})}catch(i){this._onPeerDisconnected(n.id,i)}}async processRpc(e,r,n){if(!this.acceptFrom(e))return mt("received message from unacceptable peer %p",e),!1;mt("rpc from %p",e);let{subscriptions:i,messages:s}=n;return i!=null&&i.length>0&&(mt("subscription update from %p",e),i.forEach(o=>{this.processRpcSubOpt(e,o)}),super.dispatchEvent(new Se("subscription-change",{detail:{peerId:r.id,subscriptions:i.map(({topic:o,subscribe:a})=>({topic:`${o??""}`,subscribe:!!a}))}}))),s!=null&&s.length>0&&(mt("messages from %p",e),this.queue.addAll(s.map(o=>async()=>{if(o.topic==null||!this.subscriptions.has(o.topic)&&!this.canRelayMessage)return mt("received message we didn't subscribe to. Dropping."),!1;try{let a=await nl(o);await this.processMessage(e,a)}catch(a){mt.error(a)}})).catch(o=>{mt(o)})),!0}processRpcSubOpt(e,r){let n=r.topic;if(n==null)return;let i=this.topics.get(n);i==null&&(i=new An,this.topics.set(n,i)),r.subscribe===!0?i.add(e):i.delete(e)}async processMessage(e,r){if(!(this.components.peerId.equals(e)&&!this.emitSelf)){try{await this.validate(e,r)}catch(n){mt("Message is invalid, dropping it. %O",n);return}this.subscriptions.has(r.topic)&&(!this.components.peerId.equals(e)||this.emitSelf)&&super.dispatchEvent(new Se("message",{detail:r})),await this.publishMessage(e,r)}}getMsgId(e){switch(this.globalSignaturePolicy){case"StrictSign":if(e.type!=="signed")throw new K('Message type should be "signed" when signature policy is StrictSign but it was not',Ut.ERR_MISSING_SIGNATURE);if(e.sequenceNumber==null)throw new K("Need seqno when signature policy is StrictSign but it was missing",Ut.ERR_MISSING_SEQNO);if(e.key==null)throw new K("Need key when signature policy is StrictSign but it was missing",Ut.ERR_MISSING_KEY);return tl(e.key,e.sequenceNumber);case"StrictNoSign":return el(e.data);default:throw new K("Cannot get message id: unhandled signature policy",Ut.ERR_UNHANDLED_SIGNATURE_POLICY)}}acceptFrom(e){return!0}send(e,r){let{messages:n,subscriptions:i,subscribe:s}=r;this.sendRpc(e,{subscriptions:(i??[]).map(o=>({topic:o,subscribe:!!s})),messages:(n??[]).map(ri)})}sendRpc(e,r){let n=this.peers.get(e);if(n==null||!n.isWritable){mt.error("Cannot send RPC to %p as there is no open stream to it available",e);return}n.write(this.encodeRpc(r))}async validate(e,r){switch(this.globalSignaturePolicy){case"StrictNoSign":if(r.type!=="unsigned")throw new K('Message type should be "unsigned" when signature policy is StrictNoSign but it was not',Ut.ERR_MISSING_SIGNATURE);if(r.signature!=null)throw new K("StrictNoSigning: signature should not be present",Ut.ERR_UNEXPECTED_SIGNATURE);if(r.key!=null)throw new K("StrictNoSigning: key should not be present",Ut.ERR_UNEXPECTED_KEY);if(r.sequenceNumber!=null)throw new K("StrictNoSigning: seqno should not be present",Ut.ERR_UNEXPECTED_SEQNO);break;case"StrictSign":if(r.type!=="signed")throw new K('Message type should be "signed" when signature policy is StrictSign but it was not',Ut.ERR_MISSING_SIGNATURE);if(r.signature==null)throw new K("StrictSigning: Signing required and no signature was present",Ut.ERR_MISSING_SIGNATURE);if(r.sequenceNumber==null)throw new K("StrictSigning: Signing required and no sequenceNumber was present",Ut.ERR_MISSING_SEQNO);if(!await ol(r,this.encodeMessage.bind(this)))throw new K("StrictSigning: Invalid message signature",Ut.ERR_INVALID_SIGNATURE);break;default:throw new K("Cannot validate message: unhandled signature policy",Ut.ERR_UNHANDLED_SIGNATURE_POLICY)}let i=this.topicValidators.get(r.topic);if(i!=null){let s=await i(e,r);if(s===xn.Reject||s===xn.Ignore)throw new K("Message validation failed",Ut.ERR_TOPIC_VALIDATOR_REJECT)}}async buildMessage(e){switch(this.globalSignaturePolicy){case"StrictSign":return sl(this.components.peerId,e,this.encodeMessage.bind(this));case"StrictNoSign":return Promise.resolve({type:"unsigned",...e});default:throw new K("Cannot build message: unhandled signature policy",Ut.ERR_UNHANDLED_SIGNATURE_POLICY)}}getSubscribers(e){if(!this.started)throw new K("not started yet","ERR_NOT_STARTED_YET");if(e==null)throw new K("topic is required","ERR_NOT_VALID_TOPIC");let r=this.topics.get(e.toString());return r==null?[]:Array.from(r.values())}async publish(e,r){if(!this.started)throw new Error("Pubsub has not started");let n={from:this.components.peerId,topic:e,data:r??new Uint8Array(0),sequenceNumber:jf()};mt("publish topic: %s from: %p data: %m",e,n.from,n.data);let i=await this.buildMessage(n),s=!1;this.emitSelf&&this.subscriptions.has(e)&&(s=!0,super.dispatchEvent(new Se("message",{detail:i})));let o=await this.publishMessage(this.components.peerId,i);return s&&(o.recipients=[...o.recipients,this.components.peerId]),o}subscribe(e){if(!this.started)throw new Error("Pubsub has not started");if(mt("subscribe to topic: %s",e),!this.subscriptions.has(e)){this.subscriptions.add(e);for(let r of this.peers.keys())this.send(r,{subscriptions:[e],subscribe:!0})}}unsubscribe(e){if(!this.started)throw new Error("Pubsub is not started");super.removeEventListener(e);let r=this.subscriptions.has(e);if(mt("unsubscribe from %s - am subscribed %s",e,r),r){this.subscriptions.delete(e);for(let n of this.peers.keys())this.send(n,{subscriptions:[e],subscribe:!1})}}getTopics(){if(!this.started)throw new Error("Pubsub is not started");return Array.from(this.subscriptions)}getPeers(){if(!this.started)throw new Error("Pubsub is not started");return Array.from(this.peers.keys())}};return vl(Mg);})();
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
return Libp2PPubsub}));
